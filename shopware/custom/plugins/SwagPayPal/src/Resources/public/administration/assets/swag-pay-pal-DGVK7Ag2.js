const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BziGdwzm.js","assets/index-CU9ICRvn.css","assets/index-FwxGWv-e.js","assets/index-HymAk-nV.css","assets/index-DVkGKjlB.js","assets/index-BmAyTjXj.css","assets/index-BoPYR1do.js","assets/index-Byf0Bk_y.css","assets/index-DXOKjrRo.js","assets/index-DBZ497D4.css","assets/index-BsFzNe0C.js","assets/index-VgY7miCV.css","assets/index-NSbpapJx.js","assets/index-DxjX7zqQ.css","assets/index-DnLidD0f.js","assets/index-Br_Ysh01.css","assets/index-FZMr6DU-.js","assets/index-NbytPWh9.css","assets/index-D8Q_Oavj.js","assets/index-CLP-xInC.css","assets/index-BBIxhann.js","assets/index-Dap6VQOd.css","assets/index-COETuq5G.js","assets/index-CN4ZE8zI.css","assets/index-DruaxD0u.js","assets/index-C7Fc4ciV.css","assets/index-DB5t7QRC.js","assets/swag-paypal-settings.constant-CPy-PEVU.js","assets/index-CiLDMmBW.css","assets/index-CjRcIrtF.js","assets/index-BVeiQxSF.css","assets/index-8wR70pcV.js","assets/index-BG2n8H6c.css","assets/index-CPmC0Ucc.js","assets/index-_UKqtJSz.css","assets/index-y6NUUcVz.js","assets/index-c5j1S4M2.css","assets/index-D0J5BLj8.js"])))=>i.map(i=>d[i]);
var pS=Object.defineProperty;var dS=(a,i,r)=>i in a?pS(a,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[i]=r;var Gp=(a,i,r)=>dS(a,typeof i!="symbol"?i+"":i,r);const hS="modulepreload",fS=function(a){return window.__sw__.assetPath+"/bundles/swagpaypal/administration/"+a},Wp={},Te=function(i,r,o){let c=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const _=document.querySelector("meta[property=csp-nonce]"),g=(_==null?void 0:_.nonce)||(_==null?void 0:_.getAttribute("nonce"));c=Promise.allSettled(r.map(w=>{if(w=fS(w),w in Wp)return;Wp[w]=!0;const S=w.endsWith(".css"),m=S?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${w}"]${m}`))return;const b=document.createElement("link");if(b.rel=S?"stylesheet":hS,S||(b.as="script"),b.crossOrigin="",b.href=w,g&&b.setAttribute("nonce",g),document.head.appendChild(b),S)return new Promise((R,U)=>{b.addEventListener("load",R),b.addEventListener("error",()=>U(new Error(`Unable to preload CSS for ${w}`)))})}))}function h(_){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=_,window.dispatchEvent(g),!g.defaultPrevented)throw _}return c.then(_=>{for(const g of _||[])g.status==="rejected"&&h(g.reason);return i().catch(h)})};Shopware.Service("privileges").addPrivilegeMappingEntry({category:"permissions",parent:"swag_paypal",key:"swag_paypal",roles:{viewer:{privileges:["sales_channel:read","sales_channel_payment_method:read","system_config:read"],dependencies:[]},editor:{privileges:["sales_channel:update","sales_channel_payment_method:create","sales_channel_payment_method:update","system_config:update","system_config:create","system_config:delete"],dependencies:["swag_paypal.viewer"]}}});Shopware.Service("privileges").addPrivilegeMappingEntry({category:"permissions",parent:null,key:"sales_channel",roles:{viewer:{privileges:["swag_paypal_pos_sales_channel:read","swag_paypal_pos_sales_channel_run:read","swag_paypal_pos_sales_channel_run:update","swag_paypal_pos_sales_channel_run:create","swag_paypal_pos_sales_channel_run_log:read","sales_channel_payment_method:read"]},editor:{privileges:["swag_paypal_pos_sales_channel:update","swag_paypal_pos_sales_channel_run:delete","payment_method:update"]},creator:{privileges:["swag_paypal_pos_sales_channel:create","payment_method:create","shipping_method:create","delivery_time:create"]},deleter:{privileges:["swag_paypal_pos_sales_channel:delete"]}}});Shopware.Store.register({id:"swagPayPalMerchantInformation",state:()=>({salesChannel:null,allMerchantInformations:{}}),actions:{set(a,i){this.allMerchantInformations[String(a)]=i},has(a){return this.allMerchantInformations.hasOwnProperty(String(a))},delete(a){delete this.allMerchantInformations[String(a)]}},getters:{isLoading(){return!this.allMerchantInformations.hasOwnProperty(String(this.salesChannel))},actual(){return this.allMerchantInformations[String(this.salesChannel)]??{merchantIntegrations:null,capabilities:{}}},products(){var a;return((a=this.actual.merchantIntegrations)==null?void 0:a.products)??[]},capabilities(){return this.actual.capabilities},merchantCapabilities(){var a;return((a=this.actual.merchantIntegrations)==null?void 0:a.capabilities)??[]},canVault(){return this.merchantCapabilities.some(a=>a.name==="PAYPAL_WALLET_VAULTING_ADVANCED"&&a.status==="ACTIVE")},canPPCP(){return this.merchantCapabilities.some(a=>a.name==="PAYPAL_CHECKOUT"&&a.status==="ACTIVE")}}});Shopware.Store.register({id:"swagPayPalSettings",state:()=>({salesChannel:null,allConfigs:{}}),actions:{setConfig(a,i){this.allConfigs[String(a)]=i},hasConfig(a){return this.allConfigs.hasOwnProperty(String(a))},set(a,i){this.allConfigs[String(this.salesChannel)][a]=i},get(a){return this.actual[a]??this.root[a]},getRoot(a){return this.root[a]},getActual(a){return this.actual[a]}},getters:{isLoading(){return!this.allConfigs.hasOwnProperty(String(this.salesChannel))},isSandbox(){return this.actual["SwagPayPal.settings.sandbox"]??this.root["SwagPayPal.settings.sandbox"]??!1},root(){return this.allConfigs.null??{}},actual(){return this.allConfigs[String(this.salesChannel)]??{}}}});Shopware.Component.register("swag-paypal-onboarding-button",()=>Te(()=>import("./index-BziGdwzm.js"),__vite__mapDeps([0,1])));Shopware.Component.register("swag-paypal-setting",()=>Te(()=>import("./index-FwxGWv-e.js"),__vite__mapDeps([2,3])));Shopware.Vue.watch(()=>Shopware.Store.get("swagPayPalSettings").salesChannel,a=>{Shopware.Store.get("swagPayPalMerchantInformation").salesChannel=a});Shopware.Vue.watch(()=>Shopware.Store.get("swagPayPalMerchantInformation").salesChannel,a=>{Shopware.Store.get("swagPayPalSettings").salesChannel=a});Shopware.Mixin.register("swag-paypal-notification",Shopware.Component.wrapComponentConfig({mixins:[Shopware.Mixin.getByName("notification")],methods:{createMessageFromError(a){var o,c;return(a.errors??((c=(o=a==null?void 0:a.response)==null?void 0:o.data)==null?void 0:c.errors)??[]).map(h=>{var S,m;const _=typeof((m=(S=h.meta)==null?void 0:S.parameters)==null?void 0:m.message)=="string"&&h.meta.parameters.message||h.detail,g=`swag-paypal.errors.${h.code}`,w=this.$t(g,{message:_});return g!==w?w:_}).join("<br>")}}}));Shopware.Mixin.register("swag-paypal-pos-catch-error",Shopware.Component.wrapComponentConfig({mixins:[Shopware.Mixin.getByName("swag-paypal-notification")],methods:{catchError(a,i){var c,h;const o=(((h=(c=i==null?void 0:i.response)==null?void 0:c.data)==null?void 0:h.errors)??[]).map(_=>{var S;let g="";const w=(S=_.meta)==null?void 0:S.parameters;return w&&(w.salesChannelIds?g+=`<br>${w.salesChannelIds}`:w.message&&(g+=`${w.message} (${w.name??""})`),w.name&&(g&&(g+=": "),g+=`${w.name}`)),g||(g=this.createMessageFromError({errors:[_]})),g}).join("<br>");this.createNotificationError({title:this.$t("swag-paypal.notifications.posError.title"),message:(a?this.$t(a)+": ":"")+o})}}}));Shopware.Mixin.register("swag-paypal-pos-log-label",Shopware.Component.wrapComponentConfig({methods:{getLabelVariant(a){return a>=400?"danger":a>=300?"warning":a>200?"info":"success"},getLabel(a){return a>=300?"swag-paypal-pos.detail.logs.states.failed":"swag-paypal-pos.detail.logs.states.success"}}}));Shopware.Mixin.register("swag-paypal-settings",Shopware.Component.wrapComponentConfig({inject:["systemConfigApiService","SwagPayPalSettingsService"],mixins:[Shopware.Mixin.getByName("swag-paypal-notification")],data(){return{savingSettings:"none"}},computed:{settingsStore(){return Shopware.Store.get("swagPayPalSettings")}},watch:{"settingsStore.salesChannel":{immediate:!0,handler(a){this.fetchSettings(a)}}},beforeCreate(){Shopware.Store.get("swagPayPalSettings").$reset()},methods:{async fetchSettings(a){if(this.settingsStore.hasConfig(a))return;const i=await this.systemConfigApiService.getValues("SwagPayPal.settings",a);this.settingsStore.setConfig(a,i||{})},async saveSettings(){return this.savingSettings="loading",this.SwagPayPalSettingsService.save(this.settingsStore.allConfigs).then(a=>(Object.entries(a).forEach(([i,r])=>{this.handleSettingsSaveInformation(i,r)}),this.savingSettings="success",setTimeout(()=>{this.savingSettings="none"},5e3),a)).catch(a=>{this.createNotificationError({title:this.$t("swag-paypal.notifications.save.title"),message:this.$t("swag-paypal.notifications.save.errorMessage",{message:this.createMessageFromError(a)})}),this.savingSettings="none"})},handleSettingsSaveInformation(a,i){(i.sandboxCredentialsChanged||i.liveCredentialsChanged)&&Shopware.Store.get("swagPayPalMerchantInformation").delete(a),i.webhookErrors.forEach(r=>{this.createNotificationWarning({title:this.$t("swag-paypal.notifications.save.title"),message:this.$t("swag-paypal.notifications.save.webhookMessage",{message:r})})})}}}));Shopware.Mixin.register("swag-paypal-merchant-information",Shopware.Component.wrapComponentConfig({inject:["SwagPayPalSettingsService"],mixins:[Shopware.Mixin.getByName("swag-paypal-notification")],computed:{merchantInformationStore(){return Shopware.Store.get("swagPayPalMerchantInformation")}},watch:{"merchantInformationStore.salesChannel":{immediate:!0,handler(a){this.fetchMerchantInformation(a)}},savingSettings(a){a==="success"&&this.fetchMerchantInformation(this.merchantInformationStore.salesChannel)}},beforeCreate(){Shopware.Store.get("swagPayPalMerchantInformation").$reset()},methods:{async fetchMerchantInformation(a){if(this.merchantInformationStore.has(a))return;const i=await this.SwagPayPalSettingsService.getMerchantInformation(a).catch(r=>(this.createNotificationError({title:this.$t("swag-paypal.notifications.merchantInformation.title"),message:this.$t("swag-paypal.notifications.merchantInformation.errorMessage",{message:this.createMessageFromError(r)})}),null));i&&this.merchantInformationStore.set(a,i)}}}));Shopware.Component.override("sw-first-run-wizard-paypal-credentials",()=>Te(()=>import("./index-DVkGKjlB.js"),__vite__mapDeps([4,5])));Shopware.Component.override("sw-sales-channel-modal-detail",()=>Te(()=>import("./index-BoPYR1do.js"),__vite__mapDeps([6,7])));Shopware.Component.override("sw-sales-channel-modal-grid",()=>Te(()=>import("./index-DXOKjrRo.js"),__vite__mapDeps([8,9])));Shopware.Component.override("sw-settings-shipping-detail",()=>Te(()=>import("./index-BsFzNe0C.js"),__vite__mapDeps([10,11])));Shopware.Component.override("sw-extension-card-base",()=>Te(()=>import("./index-DT6hpUCH.js"),[]));Shopware.Service("privileges").addPrivilegeMappingEntry({category:"permissions",parent:"swag_paypal",key:"swag_paypal_disputes",roles:{viewer:{privileges:["sales_channel:read"],dependencies:[]}}});const gS=`{% block swag_paypal_disputes_list %} <sw-page class="swag-paypal-disputes-list"> {% block swag_paypal_disputes_list_smart_bar_header %} <template #smart-bar-header> {% block swag_paypal_disputes_list_smart_bar_header_title %} <h2> {% block swag_paypal_disputes_list_smart_bar_header_title_text %} {{ $t('swag-paypal-disputes.list.title') }} {% endblock %} {% block swag_paypal_disputes_list_smart_bar_header_amount %} <template v-if="!isLoading"> ({{ total }}) </template> {% endblock %} </h2> {% endblock %} </template> {% endblock %} {% block swag_paypal_disputes_list_content %} <template #content> <sw-loader v-if="isLoading" /> <template v-else> {% block swag_paypal_disputes_list_content_grid %} <sw-data-grid v-if="disputes.length > 0" :dataSource="visibleDisputes" :columns="disputesColumns" :showActions="false" :showSelection="false" > {% block swag_paypal_disputes_list_content_grid_column_update_time %} <template #column-update_time="{ item }"> <div> <div>{{ formatUpdateDate(item.update_time) }}</div> <div>{{ formatUpdateTime(item.update_time) }}</div> </div> </template> {% endblock %} {% block swag_paypal_disputes_list_content_grid_column_seller_response_due_date %} <template #column-response_due_date="{ item }"> <template v-if="item.seller_response_due_date"> <strong>{{ $t('swag-paypal-disputes.common.response_due_date.seller') }}</strong>: {{ formatDate(item.seller_response_due_date) }} </template> <template v-else-if="item.buyer_response_due_date"> <strong>{{ $t('swag-paypal-disputes.common.response_due_date.buyer') }}</strong>: {{ formatDate(item.buyer_response_due_date) }} </template> </template> {% endblock %} {% block swag_paypal_disputes_list_content_grid_column_status %} <template #column-status="{ item }"> <div> <div> {{ formatTechnicalText(item.dispute_state) }} <template v-if="item.dispute_state !== item.status"> ({{ formatTechnicalText(item.status) }}) </template> </div> <div class="swag-paypal-disputes-list__reason"> {{ formatTechnicalText(item.reason) }} </div> </div> </template> {% endblock %} {% block swag_paypal_disputes_list_content_grid_column_dispute_id %} <template #column-dispute_id="{ item }"> <router-link :to="{ name: 'swag.paypal.disputes.detail', params: { disputeId: item.dispute_id , salesChannelId} }" > {{ item.dispute_id }} </router-link> </template> {% endblock %} {% block swag_paypal_disputes_list_content_grid_column_dispute_life_cycle_stage %} <template #column-dispute_life_cycle_stage="{ item }"> <div v-if="item.dispute_life_cycle_stage === 'INQUIRY'" class="swag-paypal-disputes-list__stage-inquiry" > {{ formatTechnicalText(item.dispute_life_cycle_stage) }} </div> <div v-else class="swag-paypal-disputes-list__stage-other" > {{ formatTechnicalText(item.dispute_life_cycle_stage) }} </div> </template> {% endblock %} {% block swag_paypal_disputes_list_content_grid_column_dispute_amount %} <template #column-dispute_amount="{ item }"> {{ item.dispute_amount.value }} {{ item.dispute_amount.currency_code }} </template> {% endblock %} {% block swag_paypal_disputes_list_content_grid_pagination %} <template #pagination> <sw-pagination :page="page" :limit="limit" :total="total" @page-change="onPageChange" /> </template> {% endblock %} </sw-data-grid> {% endblock %} {% block swag_paypal_disputes_list_content_empty_state %} <sw-empty-state v-if="notAuthorized" :title="$t('swag-paypal-disputes.list.emptyStateNotAuthorized.title')" icon="regular-exclamation-triangle" color="#F88962" > <i18n-t tag="p" keypath="swag-paypal-disputes.list.emptyStateNotAuthorized.subline" > <template #link> <sw-internal-link :routerLink="{ name: 'sw.settings.payment.overview' }" :inline="true" :hideIcon="true" > {{ $t('swag-paypal-disputes.list.emptyStateNotAuthorized.link') }} </sw-internal-link> </template> </i18n-t> </sw-empty-state> <sw-empty-state v-else-if="showEmptyStateWithNoDisputes" :title="$t('swag-paypal-disputes.list.emptyState.title')" :subline="$t('swag-paypal-disputes.list.emptyState.subline')" icon="regular-comments" color="#F88962" /> {% endblock %} </template> </template> {% endblock %} {% block swag_paypal_disputes_list_sidebar %} <template #sidebar> <sw-sidebar class="swag-paypal-disputes-list__sidebar"> {% block swag_paypal_disputes_list_sidebar_refresh %} <sw-sidebar-item icon="regular-sync" :title="$t('swag-paypal-disputes.list.titleSidebarItemRefresh')" @click="onRefresh" /> {% endblock %} {% block swag_paypal_disputes_list_sidebar_filter %} <sw-sidebar-item icon="regular-filter" :title="$t('swag-paypal-disputes.list.titleSidebarItemFilter')" > {% block swag_paypal_disputes_list_sidebar_filter_items %} {% block swag_paypal_disputes_list_sidebar_filter_sales_channel %} <sw-sales-channel-switch :label="$t('sw-settings.system-config.labelSalesChannelSelect')" @change-sales-channel-id="onSalesChannelChanged" /> {% endblock %} {% block swag_paypal_disputes_list_sidebar_filter_dispute_state %} <sw-multi-select :label="$t('swag-paypal-disputes.common.status')" :options="disputeStates" :value="disputeStateFilter" @update:value="onChangeDisputeStateFilter" /> {% endblock %} {% endblock %} </sw-sidebar-item> {% endblock %} </sw-sidebar> </template> {% endblock %} </sw-page> {% endblock %}`,Kp="REQUIRED_ACTION",Vp="REQUIRED_OTHER_PARTY_ACTION",Yp="UNDER_PAYPAL_REVIEW",Xp="RESOLVED",Zp="OPEN_INQUIRIES",Jp="APPEALABLE",_S="SWAG_PAYPAL__NOT_AUTHORIZED",{Filter:yS}=Shopware,{debounce:mS}=Shopware.Utils,{capitalizeString:wS}=Shopware.Utils.string,vS=Shopware.Component.wrapComponentConfig({template:gS,inject:["SwagPayPalDisputeApiService","systemConfigApiService"],emits:["page-change"],mixins:[Shopware.Mixin.getByName("swag-paypal-notification")],data(){return{isLoading:!1,notAuthorized:!1,disputes:[],disputeStates:[{value:Kp,label:this.formatTechnicalText(Kp)},{value:Vp,label:this.formatTechnicalText(Vp)},{value:Yp,label:this.formatTechnicalText(Yp)},{value:Xp,label:this.formatTechnicalText(Xp)},{value:Zp,label:this.formatTechnicalText(Zp)},{value:Jp,label:this.formatTechnicalText(Jp)}],disputeStateFilter:[],salesChannelId:null,total:0,limit:10,page:1,resolutionCenterUrl:"https://www.paypal.com/resolutioncenter"}},computed:{dateFilter(){return yS.getByName("date")},showEmptyStateWithNoDisputes(){return!this.notAuthorized&&this.disputes.length===0},disputesColumns(){return[{property:"dispute_id",label:this.$t("swag-paypal-disputes.common.dispute_id")},{property:"update_time",label:this.$t("swag-paypal-disputes.common.update_time")},{property:"response_due_date",label:this.$t("swag-paypal-disputes.common.response_due_date.label")},{property:"status",label:this.$t("swag-paypal-disputes.common.status")},{property:"dispute_life_cycle_stage",label:this.$t("swag-paypal-disputes.common.dispute_life_cycle_stage")},{property:"dispute_amount",label:this.$t("swag-paypal-disputes.common.dispute_amount")}]},visibleDisputes(){return this.disputes.slice((this.page-1)*this.limit,(this.page-1)*this.limit+this.limit)}},created(){this.createdComponent()},methods:{async createdComponent(){this.isLoading=!0,(await this.systemConfigApiService.getValues("SwagPayPal.settings"))["SwagPayPal.settings.sandbox"]&&(this.resolutionCenterUrl="https://www.sandbox.paypal.com/resolutioncenter"),this.getList()},getList(){this.isLoading=!0,this.disputes=[];const a=this.disputeStateFilter.join(",")||null;this.SwagPayPalDisputeApiService.list(this.salesChannelId,a).then(i=>{i.items!==null&&(this.disputes=this.sortDisputes(i.items)),this.total=this.disputes.length,this.isLoading=!1}).catch(this.handleError.bind(this))},sortDisputes(a){return a.sort((i,r)=>i.status==="RESOLVED"?1:r.status==="RESOLVED"?-1:0)},debouncedGetList:mS(function(){this.getList()},850),handleError(a){var i,r,o;((o=(r=(i=a.response)==null?void 0:i.data.errors)==null?void 0:r[0])==null?void 0:o.code)===_S?this.notAuthorized=!0:this.createNotificationError({title:this.$t("swag-paypal-disputes.list.errorTitle"),message:this.createMessageFromError(a)}),this.isLoading=!1},formatUpdateDate(a){return this.formatDate(a,{})},formatUpdateTime(a){return this.formatDate(a,{day:void 0,month:void 0,year:void 0,hour:"2-digit",minute:"2-digit",second:"2-digit"})},formatTechnicalText(a){return wS(a).replace(/_/g," ")},onPageChange({page:a,limit:i}){this.page=a,this.limit=i,this.$emit("page-change")},onRefresh(){this.getList()},onChangeDisputeStateFilter(a){this.disputeStateFilter=a,this.debouncedGetList()},onSalesChannelChanged(a){this.salesChannelId=a,this.getList()},getExternalDetailPageLink(a){return`${this.resolutionCenterUrl}/${a.dispute_id??""}`},formatDate(a,i={hour:"2-digit",minute:"2-digit",second:"2-digit"}){return this.dateFilter(a,i)}}}),bS=Object.freeze(Object.defineProperty({__proto__:null,default:vS},Symbol.toStringTag,{value:"Module"}));Shopware.Component.register("swag-paypal-disputes-detail",()=>Te(()=>import("./index-NSbpapJx.js"),__vite__mapDeps([12,13])));Shopware.Component.register("swag-paypal-disputes-list",()=>Te(()=>Promise.resolve().then(()=>bS),void 0));Shopware.Module.register("swag-paypal-disputes",{type:"plugin",name:"paypal-disputes",title:"swag-paypal-disputes.general.mainMenuItemGeneral",description:"swag-paypal-disputes.general.descriptionTextModule",version:"1.0.0",targetVersion:"1.0.0",color:"#F88962",icon:"regular-comments",favicon:"icon-module-customers.png",routes:{index:{component:"swag-paypal-disputes-list",path:"index",meta:{privilege:"swag_paypal_disputes.viewer"}},detail:{component:"swag-paypal-disputes-detail",path:"detail/:disputeId/:salesChannelId?",props:{default(a){return{disputeId:a.params.disputeId,salesChannelId:a.params.salesChannelId}}},meta:{privilege:"swag_paypal_disputes.viewer",parentPath:"swag.paypal.disputes.index"}}},navigation:[{id:"swag-paypal-disputes",path:"swag.paypal.disputes.index",label:"swag-paypal-disputes.general.mainMenuItemGeneral",parent:"sw-customer",privilege:"swag_paypal_disputes.viewer"}]});var At=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zf(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Fs,Qp;function SS(){if(Qp)return Fs;Qp=1;var a=Object.prototype,i=a.hasOwnProperty;function r(o,c){return o!=null&&i.call(o,c)}return Fs=r,Fs}var Bs,ed;function za(){if(ed)return Bs;ed=1;var a=Array.isArray;return Bs=a,Bs}var Ms,td;function qf(){if(td)return Ms;td=1;var a=typeof At=="object"&&At&&At.Object===Object&&At;return Ms=a,Ms}var Us,ad;function Ft(){if(ad)return Us;ad=1;var a=qf(),i=typeof self=="object"&&self&&self.Object===Object&&self,r=a||i||Function("return this")();return Us=r,Us}var js,nd;function Qr(){if(nd)return js;nd=1;var a=Ft(),i=a.Symbol;return js=i,js}var Hs,rd;function CS(){if(rd)return Hs;rd=1;var a=Qr(),i=Object.prototype,r=i.hasOwnProperty,o=i.toString,c=a?a.toStringTag:void 0;function h(_){var g=r.call(_,c),w=_[c];try{_[c]=void 0;var S=!0}catch{}var m=o.call(_);return S&&(g?_[c]=w:delete _[c]),m}return Hs=h,Hs}var Gs,id;function PS(){if(id)return Gs;id=1;var a=Object.prototype,i=a.toString;function r(o){return i.call(o)}return Gs=r,Gs}var Ws,sd;function Gn(){if(sd)return Ws;sd=1;var a=Qr(),i=CS(),r=PS(),o="[object Null]",c="[object Undefined]",h=a?a.toStringTag:void 0;function _(g){return g==null?g===void 0?c:o:h&&h in Object(g)?i(g):r(g)}return Ws=_,Ws}var Ks,od;function sn(){if(od)return Ks;od=1;function a(i){return i!=null&&typeof i=="object"}return Ks=a,Ks}var Vs,ld;function Pc(){if(ld)return Vs;ld=1;var a=Gn(),i=sn(),r="[object Symbol]";function o(c){return typeof c=="symbol"||i(c)&&a(c)==r}return Vs=o,Vs}var Ys,cd;function AS(){if(cd)return Ys;cd=1;var a=za(),i=Pc(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;function c(h,_){if(a(h))return!1;var g=typeof h;return g=="number"||g=="symbol"||g=="boolean"||h==null||i(h)?!0:o.test(h)||!r.test(h)||_!=null&&h in Object(_)}return Ys=c,Ys}var Xs,ud;function Wn(){if(ud)return Xs;ud=1;function a(i){var r=typeof i;return i!=null&&(r=="object"||r=="function")}return Xs=a,Xs}var Zs,pd;function Ff(){if(pd)return Zs;pd=1;var a=Gn(),i=Wn(),r="[object AsyncFunction]",o="[object Function]",c="[object GeneratorFunction]",h="[object Proxy]";function _(g){if(!i(g))return!1;var w=a(g);return w==o||w==c||w==r||w==h}return Zs=_,Zs}var Js,dd;function IS(){if(dd)return Js;dd=1;var a=Ft(),i=a["__core-js_shared__"];return Js=i,Js}var Qs,hd;function ES(){if(hd)return Qs;hd=1;var a=IS(),i=function(){var o=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}();function r(o){return!!i&&i in o}return Qs=r,Qs}var eo,fd;function Bf(){if(fd)return eo;fd=1;var a=Function.prototype,i=a.toString;function r(o){if(o!=null){try{return i.call(o)}catch{}try{return o+""}catch{}}return""}return eo=r,eo}var to,gd;function kS(){if(gd)return to;gd=1;var a=Ff(),i=ES(),r=Wn(),o=Bf(),c=/[\\^$.*+?()[\]{}|]/g,h=/^\[object .+?Constructor\]$/,_=Function.prototype,g=Object.prototype,w=_.toString,S=g.hasOwnProperty,m=RegExp("^"+w.call(S).replace(c,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function b(R){if(!r(R)||i(R))return!1;var U=a(R)?m:h;return U.test(o(R))}return to=b,to}var ao,_d;function RS(){if(_d)return ao;_d=1;function a(i,r){return i==null?void 0:i[r]}return ao=a,ao}var no,yd;function qa(){if(yd)return no;yd=1;var a=kS(),i=RS();function r(o,c){var h=i(o,c);return a(h)?h:void 0}return no=r,no}var ro,md;function ei(){if(md)return ro;md=1;var a=qa(),i=a(Object,"create");return ro=i,ro}var io,wd;function $S(){if(wd)return io;wd=1;var a=ei();function i(){this.__data__=a?a(null):{},this.size=0}return io=i,io}var so,vd;function TS(){if(vd)return so;vd=1;function a(i){var r=this.has(i)&&delete this.__data__[i];return this.size-=r?1:0,r}return so=a,so}var oo,bd;function xS(){if(bd)return oo;bd=1;var a=ei(),i="__lodash_hash_undefined__",r=Object.prototype,o=r.hasOwnProperty;function c(h){var _=this.__data__;if(a){var g=_[h];return g===i?void 0:g}return o.call(_,h)?_[h]:void 0}return oo=c,oo}var lo,Sd;function LS(){if(Sd)return lo;Sd=1;var a=ei(),i=Object.prototype,r=i.hasOwnProperty;function o(c){var h=this.__data__;return a?h[c]!==void 0:r.call(h,c)}return lo=o,lo}var co,Cd;function OS(){if(Cd)return co;Cd=1;var a=ei(),i="__lodash_hash_undefined__";function r(o,c){var h=this.__data__;return this.size+=this.has(o)?0:1,h[o]=a&&c===void 0?i:c,this}return co=r,co}var uo,Pd;function DS(){if(Pd)return uo;Pd=1;var a=$S(),i=TS(),r=xS(),o=LS(),c=OS();function h(_){var g=-1,w=_==null?0:_.length;for(this.clear();++g<w;){var S=_[g];this.set(S[0],S[1])}}return h.prototype.clear=a,h.prototype.delete=i,h.prototype.get=r,h.prototype.has=o,h.prototype.set=c,uo=h,uo}var po,Ad;function NS(){if(Ad)return po;Ad=1;function a(){this.__data__=[],this.size=0}return po=a,po}var ho,Id;function Mf(){if(Id)return ho;Id=1;function a(i,r){return i===r||i!==i&&r!==r}return ho=a,ho}var fo,Ed;function ti(){if(Ed)return fo;Ed=1;var a=Mf();function i(r,o){for(var c=r.length;c--;)if(a(r[c][0],o))return c;return-1}return fo=i,fo}var go,kd;function zS(){if(kd)return go;kd=1;var a=ti(),i=Array.prototype,r=i.splice;function o(c){var h=this.__data__,_=a(h,c);if(_<0)return!1;var g=h.length-1;return _==g?h.pop():r.call(h,_,1),--this.size,!0}return go=o,go}var _o,Rd;function qS(){if(Rd)return _o;Rd=1;var a=ti();function i(r){var o=this.__data__,c=a(o,r);return c<0?void 0:o[c][1]}return _o=i,_o}var yo,$d;function FS(){if($d)return yo;$d=1;var a=ti();function i(r){return a(this.__data__,r)>-1}return yo=i,yo}var mo,Td;function BS(){if(Td)return mo;Td=1;var a=ti();function i(r,o){var c=this.__data__,h=a(c,r);return h<0?(++this.size,c.push([r,o])):c[h][1]=o,this}return mo=i,mo}var wo,xd;function ai(){if(xd)return wo;xd=1;var a=NS(),i=zS(),r=qS(),o=FS(),c=BS();function h(_){var g=-1,w=_==null?0:_.length;for(this.clear();++g<w;){var S=_[g];this.set(S[0],S[1])}}return h.prototype.clear=a,h.prototype.delete=i,h.prototype.get=r,h.prototype.has=o,h.prototype.set=c,wo=h,wo}var vo,Ld;function Ac(){if(Ld)return vo;Ld=1;var a=qa(),i=Ft(),r=a(i,"Map");return vo=r,vo}var bo,Od;function MS(){if(Od)return bo;Od=1;var a=DS(),i=ai(),r=Ac();function o(){this.size=0,this.__data__={hash:new a,map:new(r||i),string:new a}}return bo=o,bo}var So,Dd;function US(){if(Dd)return So;Dd=1;function a(i){var r=typeof i;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?i!=="__proto__":i===null}return So=a,So}var Co,Nd;function ni(){if(Nd)return Co;Nd=1;var a=US();function i(r,o){var c=r.__data__;return a(o)?c[typeof o=="string"?"string":"hash"]:c.map}return Co=i,Co}var Po,zd;function jS(){if(zd)return Po;zd=1;var a=ni();function i(r){var o=a(this,r).delete(r);return this.size-=o?1:0,o}return Po=i,Po}var Ao,qd;function HS(){if(qd)return Ao;qd=1;var a=ni();function i(r){return a(this,r).get(r)}return Ao=i,Ao}var Io,Fd;function GS(){if(Fd)return Io;Fd=1;var a=ni();function i(r){return a(this,r).has(r)}return Io=i,Io}var Eo,Bd;function WS(){if(Bd)return Eo;Bd=1;var a=ni();function i(r,o){var c=a(this,r),h=c.size;return c.set(r,o),this.size+=c.size==h?0:1,this}return Eo=i,Eo}var ko,Md;function Uf(){if(Md)return ko;Md=1;var a=MS(),i=jS(),r=HS(),o=GS(),c=WS();function h(_){var g=-1,w=_==null?0:_.length;for(this.clear();++g<w;){var S=_[g];this.set(S[0],S[1])}}return h.prototype.clear=a,h.prototype.delete=i,h.prototype.get=r,h.prototype.has=o,h.prototype.set=c,ko=h,ko}var Ro,Ud;function KS(){if(Ud)return Ro;Ud=1;var a=Uf(),i="Expected a function";function r(o,c){if(typeof o!="function"||c!=null&&typeof c!="function")throw new TypeError(i);var h=function(){var _=arguments,g=c?c.apply(this,_):_[0],w=h.cache;if(w.has(g))return w.get(g);var S=o.apply(this,_);return h.cache=w.set(g,S)||w,S};return h.cache=new(r.Cache||a),h}return r.Cache=a,Ro=r,Ro}var $o,jd;function VS(){if(jd)return $o;jd=1;var a=KS(),i=500;function r(o){var c=a(o,function(_){return h.size===i&&h.clear(),_}),h=c.cache;return c}return $o=r,$o}var To,Hd;function YS(){if(Hd)return To;Hd=1;var a=VS(),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,o=a(function(c){var h=[];return c.charCodeAt(0)===46&&h.push(""),c.replace(i,function(_,g,w,S){h.push(w?S.replace(r,"$1"):g||_)}),h});return To=o,To}var xo,Gd;function XS(){if(Gd)return xo;Gd=1;function a(i,r){for(var o=-1,c=i==null?0:i.length,h=Array(c);++o<c;)h[o]=r(i[o],o,i);return h}return xo=a,xo}var Lo,Wd;function ZS(){if(Wd)return Lo;Wd=1;var a=Qr(),i=XS(),r=za(),o=Pc(),c=a?a.prototype:void 0,h=c?c.toString:void 0;function _(g){if(typeof g=="string")return g;if(r(g))return i(g,_)+"";if(o(g))return h?h.call(g):"";var w=g+"";return w=="0"&&1/g==-1/0?"-0":w}return Lo=_,Lo}var Oo,Kd;function JS(){if(Kd)return Oo;Kd=1;var a=ZS();function i(r){return r==null?"":a(r)}return Oo=i,Oo}var Do,Vd;function QS(){if(Vd)return Do;Vd=1;var a=za(),i=AS(),r=YS(),o=JS();function c(h,_){return a(h)?h:i(h,_)?[h]:r(o(h))}return Do=c,Do}var No,Yd;function eC(){if(Yd)return No;Yd=1;var a=Gn(),i=sn(),r="[object Arguments]";function o(c){return i(c)&&a(c)==r}return No=o,No}var zo,Xd;function jf(){if(Xd)return zo;Xd=1;var a=eC(),i=sn(),r=Object.prototype,o=r.hasOwnProperty,c=r.propertyIsEnumerable,h=a(function(){return arguments}())?a:function(_){return i(_)&&o.call(_,"callee")&&!c.call(_,"callee")};return zo=h,zo}var qo,Zd;function Hf(){if(Zd)return qo;Zd=1;var a=9007199254740991,i=/^(?:0|[1-9]\d*)$/;function r(o,c){var h=typeof o;return c=c??a,!!c&&(h=="number"||h!="symbol"&&i.test(o))&&o>-1&&o%1==0&&o<c}return qo=r,qo}var Fo,Jd;function Ic(){if(Jd)return Fo;Jd=1;var a=9007199254740991;function i(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=a}return Fo=i,Fo}var Bo,Qd;function tC(){if(Qd)return Bo;Qd=1;var a=Pc();function i(r){if(typeof r=="string"||a(r))return r;var o=r+"";return o=="0"&&1/r==-1/0?"-0":o}return Bo=i,Bo}var Mo,eh;function aC(){if(eh)return Mo;eh=1;var a=QS(),i=jf(),r=za(),o=Hf(),c=Ic(),h=tC();function _(g,w,S){w=a(w,g);for(var m=-1,b=w.length,R=!1;++m<b;){var U=h(w[m]);if(!(R=g!=null&&S(g,U)))break;g=g[U]}return R||++m!=b?R:(b=g==null?0:g.length,!!b&&c(b)&&o(U,b)&&(r(g)||i(g)))}return Mo=_,Mo}var Uo,th;function nC(){if(th)return Uo;th=1;var a=SS(),i=aC();function r(o,c){return o!=null&&i(o,c,a)}return Uo=r,Uo}var rC=nC();const iC=zf(rC);function Gf(){return String(Date.now().toString(36)+Math.random().toString(36).substr(2))}function ri(a){return a!==null&&typeof a=="object"}function sC(){const a=window.location;return new URL(a.pathname,a.origin).toString()}function Kn(a,i){return ri(i)&&i.__type__&&i.__type__===a}function oC(a,i){return iC(a,i)}function Ec(a,i,r="root"){for(let o in a){const c=a[o];if(i.apply(this,[a,o,c,r]),ri(c)){let h=r+"."+o;Ec(c,i,h)}}}function lC(a){return a!==Object(a)||a===null||a===void 0}function ah(a){return typeof a!="string"?a:a.replace(/^root\./,"")}function Wf(a){if(typeof a!="string"||a==="")return;const i=new URL(a);return i.origin===window.location.origin?{baseUrl:i.hostname,permissions:{additional:["*"],create:["*"],read:["*"],update:["*"],delete:["*"]}}:Object.values(window._swsdk.adminExtensions).find(r=>new URL(r.baseUrl).hostname===i.hostname)}class Fa extends Error{constructor(i,r){super(`Your app is missing the privileges ${r.join(", ")} for action "${i}".`),Object.defineProperty(this,"missingPrivileges",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"messageType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.missingPrivileges=r,this.messageType=i,Object.setPrototypeOf(this,Fa.prototype)}toJSON(){return{__type__:"__MissingPrivilegesError__",__messageType__:this.messageType,__data__:this.missingPrivileges}}}var cC=function(a,i,r,o){function c(h){return h instanceof r?h:new r(function(_){_(h)})}return new(r||(r=Promise))(function(h,_){function g(m){try{S(o.next(m))}catch(b){_(b)}}function w(m){try{S(o.throw(m))}catch(b){_(b)}}function S(m){m.done?h(m.value):c(m.value).then(g,w)}S((o=o.apply(a,i||[])).next())})};const uC=({send:a,handle:i})=>{const r={};let o=!1;function c(){o||(o=!0,i("__function__",({args:h,id:_})=>cC(this,void 0,void 0,function*(){return yield Promise.resolve(r[_](...h))})))}return{name:"function",serialize:({value:h})=>{if(typeof h=="function"){const _=Gf();return r[_]=h,c(),{__type__:"__function__",id:_,origin:window.origin}}},deserialize:({value:h,event:_})=>{var g;const w=(g=_==null?void 0:_.source)!==null&&g!==void 0?g:window;if(ri(h)&&h.__type__&&h.__type__==="__function__"&&typeof h.id=="string"){const S=h.id,m=h.origin;return(...b)=>a("__function__",{args:b,id:S},w,m)}}}};var jo,nh;function pC(){if(nh)return jo;nh=1;var a=ai();function i(){this.__data__=new a,this.size=0}return jo=i,jo}var Ho,rh;function dC(){if(rh)return Ho;rh=1;function a(i){var r=this.__data__,o=r.delete(i);return this.size=r.size,o}return Ho=a,Ho}var Go,ih;function hC(){if(ih)return Go;ih=1;function a(i){return this.__data__.get(i)}return Go=a,Go}var Wo,sh;function fC(){if(sh)return Wo;sh=1;function a(i){return this.__data__.has(i)}return Wo=a,Wo}var Ko,oh;function gC(){if(oh)return Ko;oh=1;var a=ai(),i=Ac(),r=Uf(),o=200;function c(h,_){var g=this.__data__;if(g instanceof a){var w=g.__data__;if(!i||w.length<o-1)return w.push([h,_]),this.size=++g.size,this;g=this.__data__=new r(w)}return g.set(h,_),this.size=g.size,this}return Ko=c,Ko}var Vo,lh;function _C(){if(lh)return Vo;lh=1;var a=ai(),i=pC(),r=dC(),o=hC(),c=fC(),h=gC();function _(g){var w=this.__data__=new a(g);this.size=w.size}return _.prototype.clear=i,_.prototype.delete=r,_.prototype.get=o,_.prototype.has=c,_.prototype.set=h,Vo=_,Vo}var Yo,ch;function yC(){if(ch)return Yo;ch=1;function a(i,r){for(var o=-1,c=i==null?0:i.length;++o<c&&r(i[o],o,i)!==!1;);return i}return Yo=a,Yo}var Xo,uh;function mC(){if(uh)return Xo;uh=1;var a=qa(),i=function(){try{var r=a(Object,"defineProperty");return r({},"",{}),r}catch{}}();return Xo=i,Xo}var Zo,ph;function Kf(){if(ph)return Zo;ph=1;var a=mC();function i(r,o,c){o=="__proto__"&&a?a(r,o,{configurable:!0,enumerable:!0,value:c,writable:!0}):r[o]=c}return Zo=i,Zo}var Jo,dh;function Vf(){if(dh)return Jo;dh=1;var a=Kf(),i=Mf(),r=Object.prototype,o=r.hasOwnProperty;function c(h,_,g){var w=h[_];(!(o.call(h,_)&&i(w,g))||g===void 0&&!(_ in h))&&a(h,_,g)}return Jo=c,Jo}var Qo,hh;function ii(){if(hh)return Qo;hh=1;var a=Vf(),i=Kf();function r(o,c,h,_){var g=!h;h||(h={});for(var w=-1,S=c.length;++w<S;){var m=c[w],b=_?_(h[m],o[m],m,h,o):void 0;b===void 0&&(b=o[m]),g?i(h,m,b):a(h,m,b)}return h}return Qo=r,Qo}var el,fh;function wC(){if(fh)return el;fh=1;function a(i,r){for(var o=-1,c=Array(i);++o<i;)c[o]=r(o);return c}return el=a,el}var qn={exports:{}},tl,gh;function vC(){if(gh)return tl;gh=1;function a(){return!1}return tl=a,tl}qn.exports;var _h;function Yf(){return _h||(_h=1,function(a,i){var r=Ft(),o=vC(),c=i&&!i.nodeType&&i,h=c&&!0&&a&&!a.nodeType&&a,_=h&&h.exports===c,g=_?r.Buffer:void 0,w=g?g.isBuffer:void 0,S=w||o;a.exports=S}(qn,qn.exports)),qn.exports}var al,yh;function bC(){if(yh)return al;yh=1;var a=Gn(),i=Ic(),r=sn(),o="[object Arguments]",c="[object Array]",h="[object Boolean]",_="[object Date]",g="[object Error]",w="[object Function]",S="[object Map]",m="[object Number]",b="[object Object]",R="[object RegExp]",U="[object Set]",Y="[object String]",N="[object WeakMap]",G="[object ArrayBuffer]",ae="[object DataView]",K="[object Float32Array]",we="[object Float64Array]",be="[object Int8Array]",B="[object Int16Array]",ee="[object Int32Array]",X="[object Uint8Array]",ue="[object Uint8ClampedArray]",fe="[object Uint16Array]",De="[object Uint32Array]",te={};te[K]=te[we]=te[be]=te[B]=te[ee]=te[X]=te[ue]=te[fe]=te[De]=!0,te[o]=te[c]=te[G]=te[h]=te[ae]=te[_]=te[g]=te[w]=te[S]=te[m]=te[b]=te[R]=te[U]=te[Y]=te[N]=!1;function Re(Ue){return r(Ue)&&i(Ue.length)&&!!te[a(Ue)]}return al=Re,al}var nl,mh;function kc(){if(mh)return nl;mh=1;function a(i){return function(r){return i(r)}}return nl=a,nl}var Fn={exports:{}};Fn.exports;var wh;function Rc(){return wh||(wh=1,function(a,i){var r=qf(),o=i&&!i.nodeType&&i,c=o&&!0&&a&&!a.nodeType&&a,h=c&&c.exports===o,_=h&&r.process,g=function(){try{var w=c&&c.require&&c.require("util").types;return w||_&&_.binding&&_.binding("util")}catch{}}();a.exports=g}(Fn,Fn.exports)),Fn.exports}var rl,vh;function SC(){if(vh)return rl;vh=1;var a=bC(),i=kc(),r=Rc(),o=r&&r.isTypedArray,c=o?i(o):a;return rl=c,rl}var il,bh;function Xf(){if(bh)return il;bh=1;var a=wC(),i=jf(),r=za(),o=Yf(),c=Hf(),h=SC(),_=Object.prototype,g=_.hasOwnProperty;function w(S,m){var b=r(S),R=!b&&i(S),U=!b&&!R&&o(S),Y=!b&&!R&&!U&&h(S),N=b||R||U||Y,G=N?a(S.length,String):[],ae=G.length;for(var K in S)(m||g.call(S,K))&&!(N&&(K=="length"||U&&(K=="offset"||K=="parent")||Y&&(K=="buffer"||K=="byteLength"||K=="byteOffset")||c(K,ae)))&&G.push(K);return G}return il=w,il}var sl,Sh;function $c(){if(Sh)return sl;Sh=1;var a=Object.prototype;function i(r){var o=r&&r.constructor,c=typeof o=="function"&&o.prototype||a;return r===c}return sl=i,sl}var ol,Ch;function Zf(){if(Ch)return ol;Ch=1;function a(i,r){return function(o){return i(r(o))}}return ol=a,ol}var ll,Ph;function CC(){if(Ph)return ll;Ph=1;var a=Zf(),i=a(Object.keys,Object);return ll=i,ll}var cl,Ah;function PC(){if(Ah)return cl;Ah=1;var a=$c(),i=CC(),r=Object.prototype,o=r.hasOwnProperty;function c(h){if(!a(h))return i(h);var _=[];for(var g in Object(h))o.call(h,g)&&g!="constructor"&&_.push(g);return _}return cl=c,cl}var ul,Ih;function Jf(){if(Ih)return ul;Ih=1;var a=Ff(),i=Ic();function r(o){return o!=null&&i(o.length)&&!a(o)}return ul=r,ul}var pl,Eh;function Tc(){if(Eh)return pl;Eh=1;var a=Xf(),i=PC(),r=Jf();function o(c){return r(c)?a(c):i(c)}return pl=o,pl}var dl,kh;function AC(){if(kh)return dl;kh=1;var a=ii(),i=Tc();function r(o,c){return o&&a(c,i(c),o)}return dl=r,dl}var hl,Rh;function IC(){if(Rh)return hl;Rh=1;function a(i){var r=[];if(i!=null)for(var o in Object(i))r.push(o);return r}return hl=a,hl}var fl,$h;function EC(){if($h)return fl;$h=1;var a=Wn(),i=$c(),r=IC(),o=Object.prototype,c=o.hasOwnProperty;function h(_){if(!a(_))return r(_);var g=i(_),w=[];for(var S in _)S=="constructor"&&(g||!c.call(_,S))||w.push(S);return w}return fl=h,fl}var gl,Th;function xc(){if(Th)return gl;Th=1;var a=Xf(),i=EC(),r=Jf();function o(c){return r(c)?a(c,!0):i(c)}return gl=o,gl}var _l,xh;function kC(){if(xh)return _l;xh=1;var a=ii(),i=xc();function r(o,c){return o&&a(c,i(c),o)}return _l=r,_l}var Bn={exports:{}};Bn.exports;var Lh;function RC(){return Lh||(Lh=1,function(a,i){var r=Ft(),o=i&&!i.nodeType&&i,c=o&&!0&&a&&!a.nodeType&&a,h=c&&c.exports===o,_=h?r.Buffer:void 0,g=_?_.allocUnsafe:void 0;function w(S,m){if(m)return S.slice();var b=S.length,R=g?g(b):new S.constructor(b);return S.copy(R),R}a.exports=w}(Bn,Bn.exports)),Bn.exports}var yl,Oh;function $C(){if(Oh)return yl;Oh=1;function a(i,r){var o=-1,c=i.length;for(r||(r=Array(c));++o<c;)r[o]=i[o];return r}return yl=a,yl}var ml,Dh;function TC(){if(Dh)return ml;Dh=1;function a(i,r){for(var o=-1,c=i==null?0:i.length,h=0,_=[];++o<c;){var g=i[o];r(g,o,i)&&(_[h++]=g)}return _}return ml=a,ml}var wl,Nh;function Qf(){if(Nh)return wl;Nh=1;function a(){return[]}return wl=a,wl}var vl,zh;function Lc(){if(zh)return vl;zh=1;var a=TC(),i=Qf(),r=Object.prototype,o=r.propertyIsEnumerable,c=Object.getOwnPropertySymbols,h=c?function(_){return _==null?[]:(_=Object(_),a(c(_),function(g){return o.call(_,g)}))}:i;return vl=h,vl}var bl,qh;function xC(){if(qh)return bl;qh=1;var a=ii(),i=Lc();function r(o,c){return a(o,i(o),c)}return bl=r,bl}var Sl,Fh;function eg(){if(Fh)return Sl;Fh=1;function a(i,r){for(var o=-1,c=r.length,h=i.length;++o<c;)i[h+o]=r[o];return i}return Sl=a,Sl}var Cl,Bh;function tg(){if(Bh)return Cl;Bh=1;var a=Zf(),i=a(Object.getPrototypeOf,Object);return Cl=i,Cl}var Pl,Mh;function ag(){if(Mh)return Pl;Mh=1;var a=eg(),i=tg(),r=Lc(),o=Qf(),c=Object.getOwnPropertySymbols,h=c?function(_){for(var g=[];_;)a(g,r(_)),_=i(_);return g}:o;return Pl=h,Pl}var Al,Uh;function LC(){if(Uh)return Al;Uh=1;var a=ii(),i=ag();function r(o,c){return a(o,i(o),c)}return Al=r,Al}var Il,jh;function ng(){if(jh)return Il;jh=1;var a=eg(),i=za();function r(o,c,h){var _=c(o);return i(o)?_:a(_,h(o))}return Il=r,Il}var El,Hh;function OC(){if(Hh)return El;Hh=1;var a=ng(),i=Lc(),r=Tc();function o(c){return a(c,r,i)}return El=o,El}var kl,Gh;function DC(){if(Gh)return kl;Gh=1;var a=ng(),i=ag(),r=xc();function o(c){return a(c,r,i)}return kl=o,kl}var Rl,Wh;function NC(){if(Wh)return Rl;Wh=1;var a=qa(),i=Ft(),r=a(i,"DataView");return Rl=r,Rl}var $l,Kh;function zC(){if(Kh)return $l;Kh=1;var a=qa(),i=Ft(),r=a(i,"Promise");return $l=r,$l}var Tl,Vh;function qC(){if(Vh)return Tl;Vh=1;var a=qa(),i=Ft(),r=a(i,"Set");return Tl=r,Tl}var xl,Yh;function FC(){if(Yh)return xl;Yh=1;var a=qa(),i=Ft(),r=a(i,"WeakMap");return xl=r,xl}var Ll,Xh;function Oc(){if(Xh)return Ll;Xh=1;var a=NC(),i=Ac(),r=zC(),o=qC(),c=FC(),h=Gn(),_=Bf(),g="[object Map]",w="[object Object]",S="[object Promise]",m="[object Set]",b="[object WeakMap]",R="[object DataView]",U=_(a),Y=_(i),N=_(r),G=_(o),ae=_(c),K=h;return(a&&K(new a(new ArrayBuffer(1)))!=R||i&&K(new i)!=g||r&&K(r.resolve())!=S||o&&K(new o)!=m||c&&K(new c)!=b)&&(K=function(we){var be=h(we),B=be==w?we.constructor:void 0,ee=B?_(B):"";if(ee)switch(ee){case U:return R;case Y:return g;case N:return S;case G:return m;case ae:return b}return be}),Ll=K,Ll}var Ol,Zh;function BC(){if(Zh)return Ol;Zh=1;var a=Object.prototype,i=a.hasOwnProperty;function r(o){var c=o.length,h=new o.constructor(c);return c&&typeof o[0]=="string"&&i.call(o,"index")&&(h.index=o.index,h.input=o.input),h}return Ol=r,Ol}var Dl,Jh;function MC(){if(Jh)return Dl;Jh=1;var a=Ft(),i=a.Uint8Array;return Dl=i,Dl}var Nl,Qh;function Dc(){if(Qh)return Nl;Qh=1;var a=MC();function i(r){var o=new r.constructor(r.byteLength);return new a(o).set(new a(r)),o}return Nl=i,Nl}var zl,ef;function UC(){if(ef)return zl;ef=1;var a=Dc();function i(r,o){var c=o?a(r.buffer):r.buffer;return new r.constructor(c,r.byteOffset,r.byteLength)}return zl=i,zl}var ql,tf;function jC(){if(tf)return ql;tf=1;var a=/\w*$/;function i(r){var o=new r.constructor(r.source,a.exec(r));return o.lastIndex=r.lastIndex,o}return ql=i,ql}var Fl,af;function HC(){if(af)return Fl;af=1;var a=Qr(),i=a?a.prototype:void 0,r=i?i.valueOf:void 0;function o(c){return r?Object(r.call(c)):{}}return Fl=o,Fl}var Bl,nf;function GC(){if(nf)return Bl;nf=1;var a=Dc();function i(r,o){var c=o?a(r.buffer):r.buffer;return new r.constructor(c,r.byteOffset,r.length)}return Bl=i,Bl}var Ml,rf;function WC(){if(rf)return Ml;rf=1;var a=Dc(),i=UC(),r=jC(),o=HC(),c=GC(),h="[object Boolean]",_="[object Date]",g="[object Map]",w="[object Number]",S="[object RegExp]",m="[object Set]",b="[object String]",R="[object Symbol]",U="[object ArrayBuffer]",Y="[object DataView]",N="[object Float32Array]",G="[object Float64Array]",ae="[object Int8Array]",K="[object Int16Array]",we="[object Int32Array]",be="[object Uint8Array]",B="[object Uint8ClampedArray]",ee="[object Uint16Array]",X="[object Uint32Array]";function ue(fe,De,te){var Re=fe.constructor;switch(De){case U:return a(fe);case h:case _:return new Re(+fe);case Y:return i(fe,te);case N:case G:case ae:case K:case we:case be:case B:case ee:case X:return c(fe,te);case g:return new Re;case w:case b:return new Re(fe);case S:return r(fe);case m:return new Re;case R:return o(fe)}}return Ml=ue,Ml}var Ul,sf;function KC(){if(sf)return Ul;sf=1;var a=Wn(),i=Object.create,r=function(){function o(){}return function(c){if(!a(c))return{};if(i)return i(c);o.prototype=c;var h=new o;return o.prototype=void 0,h}}();return Ul=r,Ul}var jl,of;function VC(){if(of)return jl;of=1;var a=KC(),i=tg(),r=$c();function o(c){return typeof c.constructor=="function"&&!r(c)?a(i(c)):{}}return jl=o,jl}var Hl,lf;function YC(){if(lf)return Hl;lf=1;var a=Oc(),i=sn(),r="[object Map]";function o(c){return i(c)&&a(c)==r}return Hl=o,Hl}var Gl,cf;function XC(){if(cf)return Gl;cf=1;var a=YC(),i=kc(),r=Rc(),o=r&&r.isMap,c=o?i(o):a;return Gl=c,Gl}var Wl,uf;function ZC(){if(uf)return Wl;uf=1;var a=Oc(),i=sn(),r="[object Set]";function o(c){return i(c)&&a(c)==r}return Wl=o,Wl}var Kl,pf;function JC(){if(pf)return Kl;pf=1;var a=ZC(),i=kc(),r=Rc(),o=r&&r.isSet,c=o?i(o):a;return Kl=c,Kl}var Vl,df;function QC(){if(df)return Vl;df=1;var a=_C(),i=yC(),r=Vf(),o=AC(),c=kC(),h=RC(),_=$C(),g=xC(),w=LC(),S=OC(),m=DC(),b=Oc(),R=BC(),U=WC(),Y=VC(),N=za(),G=Yf(),ae=XC(),K=Wn(),we=JC(),be=Tc(),B=xc(),ee=1,X=2,ue=4,fe="[object Arguments]",De="[object Array]",te="[object Boolean]",Re="[object Date]",Ue="[object Error]",It="[object Function]",ra="[object GeneratorFunction]",Sa="[object Map]",We="[object Number]",nt="[object Object]",ln="[object RegExp]",ia="[object Set]",xe="[object String]",Ba="[object Symbol]",cn="[object WeakMap]",un="[object ArrayBuffer]",Lt="[object DataView]",sa="[object Float32Array]",pn="[object Float64Array]",Mt="[object Int8Array]",Ut="[object Int16Array]",dn="[object Int32Array]",oa="[object Uint8Array]",la="[object Uint8ClampedArray]",Ma="[object Uint16Array]",Xe="[object Uint32Array]",se={};se[fe]=se[De]=se[un]=se[Lt]=se[te]=se[Re]=se[sa]=se[pn]=se[Mt]=se[Ut]=se[dn]=se[Sa]=se[We]=se[nt]=se[ln]=se[ia]=se[xe]=se[Ba]=se[oa]=se[la]=se[Ma]=se[Xe]=!0,se[Ue]=se[It]=se[cn]=!1;function ca(ie,rt,_t,Et,qe,je){var Le,jt=rt&ee,ct=rt&X,Ua=rt&ue;if(_t&&(Le=qe?_t(ie,Et,qe,je):_t(ie)),Le!==void 0)return Le;if(!K(ie))return ie;var kt=N(ie);if(kt){if(Le=R(ie),!jt)return _(ie,Le)}else{var Ke=b(ie),Ht=Ke==It||Ke==ra;if(G(ie))return h(ie,jt);if(Ke==nt||Ke==fe||Ht&&!qe){if(Le=ct||Ht?{}:Y(ie),!jt)return ct?w(ie,c(Le,ie)):g(ie,o(Le,ie))}else{if(!se[Ke])return qe?ie:{};Le=U(ie,Ke,jt)}}je||(je=new a);var Gt=je.get(ie);if(Gt)return Gt;je.set(ie,Le),we(ie)?ie.forEach(function(Ze){Le.add(ca(Ze,rt,_t,Ze,ie,je))}):ae(ie)&&ie.forEach(function(Ze,Je){Le.set(Je,ca(Ze,rt,_t,Je,ie,je))});var ua=Ua?ct?m:S:ct?B:be,Wt=kt?void 0:ua(ie);return i(Wt||ie,function(Ze,Je){Wt&&(Je=Ze,Ze=ie[Je]),r(Le,Je,ca(Ze,rt,_t,Je,ie,je))}),Le}return Vl=ca,Vl}var Yl,hf;function eP(){if(hf)return Yl;hf=1;var a=QC(),i=1,r=4;function o(c){return a(c,i|r)}return Yl=o,Yl}var tP=eP();const wc=zf(tP);let aP=1,nP=null,vc=class rg{constructor(i=aP,r=nP){Object.defineProperty(this,"title",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"limit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"term",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filters",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ids",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"associations",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"postFilter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sortings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"aggregations",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"grouping",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"groupFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"totalCountMode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.page=i,this.limit=r,this.term=null,this.title=null,this.filters=[],this.includes=null,this.ids=[],this.queries=[],this.associations=[],this.postFilter=[],this.sortings=[],this.aggregations=[],this.grouping=[],this.groupFields=[],this.fields=[],this.totalCountMode=1}static fromCriteria(i){return wc(i)}parse(){const i={};return this.ids.length>0&&(i.ids=this.ids.join("|")),this.page!==null&&(i.page=this.page),this.limit!==null&&(i.limit=this.limit),this.term!==null&&(i.term=this.term),this.queries.length>0&&(i.query=this.queries),this.filters.length>0&&(i.filter=this.filters),this.postFilter.length>0&&(i["post-filter"]=this.postFilter),this.sortings.length>0&&(i.sort=this.sortings),this.aggregations.length>0&&(i.aggregations=this.aggregations),this.groupFields.length>0&&(i.groupFields=this.groupFields),this.grouping.length>0&&(i.grouping=this.grouping),this.fields.length>0&&(i.fields=this.fields),this.associations.length>0&&(i.associations={},this.associations.forEach(r=>{i.associations&&(i.associations[r.association]=r.criteria.parse())})),this.includes!==null&&(i.includes=this.includes),this.totalCountMode!==null&&(i["total-count-mode"]=this.totalCountMode),i}setTitle(i){return this.title=i,this}getTitle(){return this.title}setIds(i){return this.ids=i,this}setTotalCountMode(i){return typeof i!="number"&&(this.totalCountMode=null),this.totalCountMode=i<0||i>2?null:i,this}setPage(i){return this.page=i,this}setLimit(i){return this.limit=i,this}setTerm(i){return this.term=i,this}addFilter(i){return this.filters.push(i),this}addIncludes(i){return Object.entries(i).forEach(([r,o])=>{this.includes===null&&(this.includes={}),this.includes[r]||(this.includes[r]=[]),this.includes[r].push(...o)}),this}addPostFilter(i){return this.postFilter.push(i),this}addSorting(i){return this.sortings.push(i),this}addQuery(i,r,o=null){const c={score:r,query:i};return o&&(c[o]=o),this.queries.push(c),this}addGroupField(i){return this.groupFields.push(i),this}addGrouping(i){return this.grouping.push(i),this}addFields(...i){return this.fields.push(...i),this}addAggregation(i){return this.aggregations.push(i),this}addAssociation(i){const r=i.split(".");let o=this;return r.forEach(c=>{o=o.getAssociation(c)}),this}getAssociation(i){const r=i.split(".");let o=this;return r.forEach(c=>{o.hasAssociation(c)||o.associations.push({association:c,criteria:new rg(null,null)}),o=o.getAssociationCriteria(c)}),o}getAssociationCriteria(i){let r=null;return this.associations.forEach(o=>{o.association===i&&(r=o.criteria)}),r}getLimit(){var i;return(i=this.limit)!==null&&i!==void 0?i:0}getPage(){var i;return(i=this.page)!==null&&i!==void 0?i:0}getCriteriaData(){return{page:this.page,limit:this.limit,term:this.term,title:this.title,filters:this.filters,ids:this.ids,queries:this.queries,associations:this.associations,postFilter:this.postFilter,sortings:this.sortings,aggregations:this.aggregations,grouping:this.grouping,fields:this.fields,groupFields:this.groupFields,totalCountMode:this.totalCountMode,includes:this.includes}}hasAssociation(i){return this.associations.some(r=>r.association===i)}resetSorting(){this.sortings=[]}static avg(i,r){return{type:"avg",name:i,field:r}}static count(i,r){return{type:"count",name:i,field:r}}static max(i,r){return{type:"max",name:i,field:r}}static min(i,r){return{type:"min",name:i,field:r}}static stats(i,r){return{type:"stats",name:i,field:r}}static sum(i,r){return{type:"sum",name:i,field:r}}static terms(i,r,o=null,c=null,h=null){return{type:"terms",name:i,field:r,limit:o,sort:c,aggregation:h}}static entityAggregation(i,r,o){return{type:"entity",name:i,field:r,definition:o}}static filter(i,r,o){return{type:"filter",name:i,filter:r,aggregation:o}}static histogram(i,r,o,c,h,_){return{type:"histogram",name:i,field:r,interval:o,format:c,aggregation:h,timeZone:_}}static sort(i,r="ASC",o=!1){return{field:i,order:r,naturalSorting:o}}static naturalSorting(i,r="ASC"){return{field:i,order:r,naturalSorting:!0}}static countSorting(i,r="ASC"){return{field:i,order:r,naturalSorting:!1,type:"count"}}static contains(i,r){return{type:"contains",field:i,value:r}}static prefix(i,r){return{type:"prefix",field:i,value:r}}static suffix(i,r){return{type:"suffix",field:i,value:r}}static equalsAny(i,r){return{type:"equalsAny",field:i,value:r.join("|")}}static range(i,r){return{type:"range",field:i,parameters:r}}static equals(i,r){return{type:"equals",field:i,value:r}}static not(i,r=[]){return{type:"not",operator:i,queries:r}}static multi(i,r=[]){return{type:"multi",operator:i,queries:r}}};const rP=()=>({name:"criteria",serialize:({value:a,customizerMethod:i,seen:r,path:o})=>{if(a instanceof vc)return{__type__:"__Criteria__",data:i(a.getCriteriaData(),r,o)}},deserialize:({value:a,customizerMethod:i})=>{if(Kn("__Criteria__",a)&&typeof a.data=="object"){const r=a.data,o=new vc;return o.setPage(r.page),o.setLimit(r.limit),o.setTerm(r.term),r.title!==null&&o.setTitle(r.title),r.filters.forEach(c=>{o.addFilter(c)}),o.setIds(r.ids),r.queries.forEach(({query:c,score:h})=>{o.addQuery(c,h)}),r.associations.forEach(c=>{o.associations.push(i(c))}),r.postFilter.forEach(c=>{o.addPostFilter(c)}),r.sortings.forEach(c=>{o.addSorting(c)}),r.aggregations.forEach(c=>{o.addAggregation(c)}),r.grouping.forEach(c=>{o.addGrouping(c)}),r.fields.forEach(c=>{o.addFields(c)}),r.groupFields.forEach(c=>{o.addGroupField(c)}),r.includes&&o.addIncludes(r.includes),o.setTotalCountMode(r.totalCountMode),o}}});let iP=(a,i,r)=>{a[i]=r};class sP{constructor(i,r,o,c={}){var h,_;Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_origin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_entityName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_draft",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isDirty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isNew",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.id=i,this._origin=c.originData?wc(c.originData):wc(o),this._entityName=r,this._draft=o,this._isDirty=(h=c.isDirty)!==null&&h!==void 0?h:!1,this._isNew=(_=c.isNew)!==null&&_!==void 0?_:!1;const g=this;return new Proxy(this._draft,{get(w,S){return S in g._draft?g._draft[S]:g[S]},set(w,S,m){return iP(g._draft,S,m),g._isDirty=!0,!0}})}__identifier__(){return"Entity"}markAsNew(){this._isNew=!0}isNew(){return this._isNew}getIsDirty(){return this._isDirty}getOrigin(){return this._origin}getDraft(){return this._draft}getEntityName(){return this._entityName}}const oP=function(i,r,o,c){return new sP(i,r,o,c)},lP=()=>({name:"entity",serialize:({value:a,customizerMethod:i,seen:r,path:o})=>{if(!(!ri(a)||typeof a.__identifier__!="function"||a.__identifier__()!=="Entity"))return{__type__:"__Entity__",__id__:a.id,__entityName__:a._entityName,__isDirty__:a._isDirty,__isNew__:a._isNew,__origin__:i(a._origin,r,o),__draft__:i(a._draft,r,o)}},deserialize:({value:a,customizerMethod:i})=>{if(Kn("__Entity__",a)&&typeof a.__origin__=="object")return new oP(a.__id__,a.__entityName__,i(a.__draft__),{originData:i(a.__origin__),isDirty:a.__isDirty__,isNew:a.__isNew__})}});let ff=class bc extends Array{constructor(i,r,o,c=null,h=[],_=null,g=null){super(),Object.defineProperty(this,"entity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"source",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"criteria",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"aggregations",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"total",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"remove",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"has",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"get",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"getAt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"getIds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"add",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"addAt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"moveItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__identifier__",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.entity=r,this.source=i,this.context=o,this.criteria=c,this.aggregations=g,this.total=_,this.push(...h),this.__identifier__=()=>"EntityCollection",this.first=function(){return this.length<=0?null:this[0]},this.last=function(){return this.length<=0?null:this[this.length-1]},this.remove=function(S){const m=this.findIndex(b=>b.id===S);return m<0?!1:(this.splice(m,1),!0)},this.has=function(S){return this.some(m=>m.id===S)},this.get=function(S){const m=this.find(b=>b.id===S);return typeof m<"u"?m:null},this.getAt=function(S){const m=this[S];return typeof m<"u"?m:null},this.getIds=function(){return this.map(S=>S.id)},this.add=function(S){this.push(S)},this.addAt=function(S,m){if(typeof m>"u"){this.add(S);return}this.splice(m,0,S)},this.moveItem=function(S,m=null){if(m===null&&(m=this.length),S<0||S>=this.length)return null;if(m===S)return this.getAt(S);const b=this.find((Y,N)=>N===S);if(typeof b>"u")return null;const R=this.filter((Y,N)=>N!==S),U=[...R.slice(0,m),b,...R.slice(m)];return this.splice(0,this.length,...U),b},this.filter=function(S,m){const b=Object.getPrototypeOf(this).filter.call(this,S,m);return new bc(this.source,this.entity,this.context,this.criteria,b,this.total,this.aggregations)}}static fromCollection(i){return new bc(i.source,i.entity,i.context,i.criteria===null?i.criteria:vc.fromCriteria(i.criteria),i,i.total,i.aggregations)}};const cP=()=>({name:"entity-collection",serialize:({value:a,customizerMethod:i,seen:r,path:o})=>{if(a instanceof ff||a!=null&&a.__identifier__&&a.__identifier__()==="EntityCollection")return i({__type__:"__EntityCollection__",__source__:a.source,__entityName__:a.entity,__context__:a.context,__criteria__:a.criteria,__entities__:Array.from(a),__total__:a.total,__aggregations__:a.aggregations},r,o)},deserialize:({value:a,customizerMethod:i})=>{if(Kn("__EntityCollection__",a))return new ff(a.__source__,a.__entityName__,a.__context__,i(a.__criteria__),i(a.__entities__),a.__total__,a.__aggregations__)}});class Mn extends Error{constructor(i,r){super(i),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:500}),r&&(this.code=r)}toJSON(){return{__type__:"__HandleError__",__code__:this.code,__message__:this.message}}}const uP=()=>({name:"handle-error",serialize:()=>{},deserialize:({value:a})=>{if(Kn("__HandleError__",a))return new Mn(a.__message__,a.__code__)}});var Un={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var pP=Un.exports,gf;function dP(){return gf||(gf=1,function(a,i){(function(){var r,o="4.17.21",c=200,h="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",_="Expected a function",g="Invalid `variable` option passed into `_.template`",w="__lodash_hash_undefined__",S=500,m="__lodash_placeholder__",b=1,R=2,U=4,Y=1,N=2,G=1,ae=2,K=4,we=8,be=16,B=32,ee=64,X=128,ue=256,fe=512,De=30,te="...",Re=800,Ue=16,It=1,ra=2,Sa=3,We=1/0,nt=9007199254740991,ln=17976931348623157e292,ia=NaN,xe=4294967295,Ba=xe-1,cn=xe>>>1,un=[["ary",X],["bind",G],["bindKey",ae],["curry",we],["curryRight",be],["flip",fe],["partial",B],["partialRight",ee],["rearg",ue]],Lt="[object Arguments]",sa="[object Array]",pn="[object AsyncFunction]",Mt="[object Boolean]",Ut="[object Date]",dn="[object DOMException]",oa="[object Error]",la="[object Function]",Ma="[object GeneratorFunction]",Xe="[object Map]",se="[object Number]",ca="[object Null]",ie="[object Object]",rt="[object Promise]",_t="[object Proxy]",Et="[object RegExp]",qe="[object Set]",je="[object String]",Le="[object Symbol]",jt="[object Undefined]",ct="[object WeakMap]",Ua="[object WeakSet]",kt="[object ArrayBuffer]",Ke="[object DataView]",Ht="[object Float32Array]",Gt="[object Float64Array]",ua="[object Int8Array]",Wt="[object Int16Array]",Ze="[object Int32Array]",Je="[object Uint8Array]",hn="[object Uint8ClampedArray]",fn="[object Uint16Array]",Ca="[object Uint32Array]",Vn=/\b__p \+= '';/g,si=/\b(__p \+=) '' \+/g,Ot=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Yn=/&(?:amp|lt|gt|quot|#39);/g,Xn=/[&<>"']/g,Zn=RegExp(Yn.source),oi=RegExp(Xn.source),li=/<%-([\s\S]+?)%>/g,ci=/<%([\s\S]+?)%>/g,Jn=/<%=([\s\S]+?)%>/g,ui=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,pi=/^\w*$/,di=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,gn=/[\\^$.*+?()[\]{}|]/g,hi=RegExp(gn.source),_n=/^\s+/,Qn=/\s/,fi=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,gi=/\{\n\/\* \[wrapped with (.+)\] \*/,_i=/,? & /,yi=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,mi=/[()=,{}\[\]\/\s]/,wi=/\\(\\)?/g,vi=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,er=/\w*$/,bi=/^[-+]0x[0-9a-f]+$/i,Si=/^0b[01]+$/i,Ci=/^\[object .+?Constructor\]$/,Pi=/^0o[0-7]+$/i,Ai=/^(?:0|[1-9]\d*)$/,Ii=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ja=/($^)/,tr=/['\n\r\u2028\u2029\\]/g,Dt="\\ud800-\\udfff",ar="\\u0300-\\u036f",pa="\\ufe20-\\ufe2f",Ei="\\u20d0-\\u20ff",Pa=ar+pa+Ei,Ha="\\u2700-\\u27bf",nr="a-z\\xdf-\\xf6\\xf8-\\xff",ki="\\xac\\xb1\\xd7\\xf7",yn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ri="\\u2000-\\u206f",$i=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",p="A-Z\\xc0-\\xd6\\xd8-\\xde",v="\\ufe0e\\ufe0f",f=ki+yn+Ri+$i,A="[']",k="["+Dt+"]",P="["+f+"]",x="["+Pa+"]",z="\\d+",q="["+Ha+"]",F="["+nr+"]",M="[^"+Dt+f+z+Ha+nr+p+"]",W="\\ud83c[\\udffb-\\udfff]",le="(?:"+x+"|"+W+")",_e="[^"+Dt+"]",ye="(?:\\ud83c[\\udde6-\\uddff]){2}",Ee="[\\ud800-\\udbff][\\udc00-\\udfff]",Ce="["+p+"]",Qe="\\u200d",da="(?:"+F+"|"+M+")",mn="(?:"+Ce+"|"+M+")",rr="(?:"+A+"(?:d|ll|m|re|s|t|ve))?",Ga="(?:"+A+"(?:D|LL|M|RE|S|T|VE))?",Ti=le+"?",ir="["+v+"]?",xi="(?:"+Qe+"(?:"+[_e,ye,Ee].join("|")+")"+ir+Ti+")*",sr="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",yg="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",zc=ir+Ti+xi,mg="(?:"+[q,ye,Ee].join("|")+")"+zc,wg="(?:"+[_e+x+"?",x,ye,Ee,k].join("|")+")",vg=RegExp(A,"g"),bg=RegExp(x,"g"),Li=RegExp(W+"(?="+W+")|"+wg+zc,"g"),Sg=RegExp([Ce+"?"+F+"+"+rr+"(?="+[P,Ce,"$"].join("|")+")",mn+"+"+Ga+"(?="+[P,Ce+da,"$"].join("|")+")",Ce+"?"+da+"+"+rr,Ce+"+"+Ga,yg,sr,z,mg].join("|"),"g"),Cg=RegExp("["+Qe+Dt+Pa+v+"]"),Pg=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ag=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ig=-1,Ie={};Ie[Ht]=Ie[Gt]=Ie[ua]=Ie[Wt]=Ie[Ze]=Ie[Je]=Ie[hn]=Ie[fn]=Ie[Ca]=!0,Ie[Lt]=Ie[sa]=Ie[kt]=Ie[Mt]=Ie[Ke]=Ie[Ut]=Ie[oa]=Ie[la]=Ie[Xe]=Ie[se]=Ie[ie]=Ie[Et]=Ie[qe]=Ie[je]=Ie[ct]=!1;var Ae={};Ae[Lt]=Ae[sa]=Ae[kt]=Ae[Ke]=Ae[Mt]=Ae[Ut]=Ae[Ht]=Ae[Gt]=Ae[ua]=Ae[Wt]=Ae[Ze]=Ae[Xe]=Ae[se]=Ae[ie]=Ae[Et]=Ae[qe]=Ae[je]=Ae[Le]=Ae[Je]=Ae[hn]=Ae[fn]=Ae[Ca]=!0,Ae[oa]=Ae[la]=Ae[ct]=!1;var Eg={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},kg={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Rg={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},$g={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Tg=parseFloat,xg=parseInt,qc=typeof At=="object"&&At&&At.Object===Object&&At,Lg=typeof self=="object"&&self&&self.Object===Object&&self,He=qc||Lg||Function("return this")(),Oi=i&&!i.nodeType&&i,Aa=Oi&&!0&&a&&!a.nodeType&&a,Fc=Aa&&Aa.exports===Oi,Di=Fc&&qc.process,yt=function(){try{var I=Aa&&Aa.require&&Aa.require("util").types;return I||Di&&Di.binding&&Di.binding("util")}catch{}}(),Bc=yt&&yt.isArrayBuffer,Mc=yt&&yt.isDate,Uc=yt&&yt.isMap,jc=yt&&yt.isRegExp,Hc=yt&&yt.isSet,Gc=yt&&yt.isTypedArray;function ut(I,T,$){switch($.length){case 0:return I.call(T);case 1:return I.call(T,$[0]);case 2:return I.call(T,$[0],$[1]);case 3:return I.call(T,$[0],$[1],$[2])}return I.apply(T,$)}function Og(I,T,$,H){for(var ne=-1,me=I==null?0:I.length;++ne<me;){var Fe=I[ne];T(H,Fe,$(Fe),I)}return H}function mt(I,T){for(var $=-1,H=I==null?0:I.length;++$<H&&T(I[$],$,I)!==!1;);return I}function Dg(I,T){for(var $=I==null?0:I.length;$--&&T(I[$],$,I)!==!1;);return I}function Wc(I,T){for(var $=-1,H=I==null?0:I.length;++$<H;)if(!T(I[$],$,I))return!1;return!0}function ha(I,T){for(var $=-1,H=I==null?0:I.length,ne=0,me=[];++$<H;){var Fe=I[$];T(Fe,$,I)&&(me[ne++]=Fe)}return me}function or(I,T){var $=I==null?0:I.length;return!!$&&Wa(I,T,0)>-1}function Ni(I,T,$){for(var H=-1,ne=I==null?0:I.length;++H<ne;)if($(T,I[H]))return!0;return!1}function ke(I,T){for(var $=-1,H=I==null?0:I.length,ne=Array(H);++$<H;)ne[$]=T(I[$],$,I);return ne}function fa(I,T){for(var $=-1,H=T.length,ne=I.length;++$<H;)I[ne+$]=T[$];return I}function zi(I,T,$,H){var ne=-1,me=I==null?0:I.length;for(H&&me&&($=I[++ne]);++ne<me;)$=T($,I[ne],ne,I);return $}function Ng(I,T,$,H){var ne=I==null?0:I.length;for(H&&ne&&($=I[--ne]);ne--;)$=T($,I[ne],ne,I);return $}function qi(I,T){for(var $=-1,H=I==null?0:I.length;++$<H;)if(T(I[$],$,I))return!0;return!1}var zg=Fi("length");function qg(I){return I.split("")}function Fg(I){return I.match(yi)||[]}function Kc(I,T,$){var H;return $(I,function(ne,me,Fe){if(T(ne,me,Fe))return H=me,!1}),H}function lr(I,T,$,H){for(var ne=I.length,me=$+(H?1:-1);H?me--:++me<ne;)if(T(I[me],me,I))return me;return-1}function Wa(I,T,$){return T===T?Zg(I,T,$):lr(I,Vc,$)}function Bg(I,T,$,H){for(var ne=$-1,me=I.length;++ne<me;)if(H(I[ne],T))return ne;return-1}function Vc(I){return I!==I}function Yc(I,T){var $=I==null?0:I.length;return $?Mi(I,T)/$:ia}function Fi(I){return function(T){return T==null?r:T[I]}}function Bi(I){return function(T){return I==null?r:I[T]}}function Xc(I,T,$,H,ne){return ne(I,function(me,Fe,Pe){$=H?(H=!1,me):T($,me,Fe,Pe)}),$}function Mg(I,T){var $=I.length;for(I.sort(T);$--;)I[$]=I[$].value;return I}function Mi(I,T){for(var $,H=-1,ne=I.length;++H<ne;){var me=T(I[H]);me!==r&&($=$===r?me:$+me)}return $}function Ui(I,T){for(var $=-1,H=Array(I);++$<I;)H[$]=T($);return H}function Ug(I,T){return ke(T,function($){return[$,I[$]]})}function Zc(I){return I&&I.slice(0,tu(I)+1).replace(_n,"")}function pt(I){return function(T){return I(T)}}function ji(I,T){return ke(T,function($){return I[$]})}function wn(I,T){return I.has(T)}function Jc(I,T){for(var $=-1,H=I.length;++$<H&&Wa(T,I[$],0)>-1;);return $}function Qc(I,T){for(var $=I.length;$--&&Wa(T,I[$],0)>-1;);return $}function jg(I,T){for(var $=I.length,H=0;$--;)I[$]===T&&++H;return H}var Hg=Bi(Eg),Gg=Bi(kg);function Wg(I){return"\\"+$g[I]}function Kg(I,T){return I==null?r:I[T]}function Ka(I){return Cg.test(I)}function Vg(I){return Pg.test(I)}function Yg(I){for(var T,$=[];!(T=I.next()).done;)$.push(T.value);return $}function Hi(I){var T=-1,$=Array(I.size);return I.forEach(function(H,ne){$[++T]=[ne,H]}),$}function eu(I,T){return function($){return I(T($))}}function ga(I,T){for(var $=-1,H=I.length,ne=0,me=[];++$<H;){var Fe=I[$];(Fe===T||Fe===m)&&(I[$]=m,me[ne++]=$)}return me}function cr(I){var T=-1,$=Array(I.size);return I.forEach(function(H){$[++T]=H}),$}function Xg(I){var T=-1,$=Array(I.size);return I.forEach(function(H){$[++T]=[H,H]}),$}function Zg(I,T,$){for(var H=$-1,ne=I.length;++H<ne;)if(I[H]===T)return H;return-1}function Jg(I,T,$){for(var H=$+1;H--;)if(I[H]===T)return H;return H}function Va(I){return Ka(I)?e_(I):zg(I)}function Rt(I){return Ka(I)?t_(I):qg(I)}function tu(I){for(var T=I.length;T--&&Qn.test(I.charAt(T)););return T}var Qg=Bi(Rg);function e_(I){for(var T=Li.lastIndex=0;Li.test(I);)++T;return T}function t_(I){return I.match(Li)||[]}function a_(I){return I.match(Sg)||[]}var n_=function I(T){T=T==null?He:Ya.defaults(He.Object(),T,Ya.pick(He,Ag));var $=T.Array,H=T.Date,ne=T.Error,me=T.Function,Fe=T.Math,Pe=T.Object,Gi=T.RegExp,r_=T.String,wt=T.TypeError,ur=$.prototype,i_=me.prototype,Xa=Pe.prototype,pr=T["__core-js_shared__"],dr=i_.toString,Se=Xa.hasOwnProperty,s_=0,au=function(){var e=/[^.]+$/.exec(pr&&pr.keys&&pr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),hr=Xa.toString,o_=dr.call(Pe),l_=He._,c_=Gi("^"+dr.call(Se).replace(gn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fr=Fc?T.Buffer:r,_a=T.Symbol,gr=T.Uint8Array,nu=fr?fr.allocUnsafe:r,_r=eu(Pe.getPrototypeOf,Pe),ru=Pe.create,iu=Xa.propertyIsEnumerable,yr=ur.splice,su=_a?_a.isConcatSpreadable:r,vn=_a?_a.iterator:r,Ia=_a?_a.toStringTag:r,mr=function(){try{var e=Ta(Pe,"defineProperty");return e({},"",{}),e}catch{}}(),u_=T.clearTimeout!==He.clearTimeout&&T.clearTimeout,p_=H&&H.now!==He.Date.now&&H.now,d_=T.setTimeout!==He.setTimeout&&T.setTimeout,wr=Fe.ceil,vr=Fe.floor,Wi=Pe.getOwnPropertySymbols,h_=fr?fr.isBuffer:r,ou=T.isFinite,f_=ur.join,g_=eu(Pe.keys,Pe),Be=Fe.max,Ve=Fe.min,__=H.now,y_=T.parseInt,lu=Fe.random,m_=ur.reverse,Ki=Ta(T,"DataView"),bn=Ta(T,"Map"),Vi=Ta(T,"Promise"),Za=Ta(T,"Set"),Sn=Ta(T,"WeakMap"),Cn=Ta(Pe,"create"),br=Sn&&new Sn,Ja={},w_=xa(Ki),v_=xa(bn),b_=xa(Vi),S_=xa(Za),C_=xa(Sn),Sr=_a?_a.prototype:r,Pn=Sr?Sr.valueOf:r,cu=Sr?Sr.toString:r;function u(e){if(Oe(e)&&!re(e)&&!(e instanceof he)){if(e instanceof vt)return e;if(Se.call(e,"__wrapped__"))return up(e)}return new vt(e)}var Qa=function(){function e(){}return function(t){if(!$e(t))return{};if(ru)return ru(t);e.prototype=t;var n=new e;return e.prototype=r,n}}();function Cr(){}function vt(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}u.templateSettings={escape:li,evaluate:ci,interpolate:Jn,variable:"",imports:{_:u}},u.prototype=Cr.prototype,u.prototype.constructor=u,vt.prototype=Qa(Cr.prototype),vt.prototype.constructor=vt;function he(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=xe,this.__views__=[]}function P_(){var e=new he(this.__wrapped__);return e.__actions__=it(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=it(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=it(this.__views__),e}function A_(){if(this.__filtered__){var e=new he(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function I_(){var e=this.__wrapped__.value(),t=this.__dir__,n=re(e),s=t<0,l=n?e.length:0,d=qy(0,l,this.__views__),y=d.start,C=d.end,E=C-y,L=s?C:y-1,O=this.__iteratees__,D=O.length,j=0,V=Ve(E,this.__takeCount__);if(!n||!s&&l==E&&V==E)return Lu(e,this.__actions__);var J=[];e:for(;E--&&j<V;){L+=t;for(var ce=-1,Q=e[L];++ce<D;){var de=O[ce],ge=de.iteratee,ft=de.type,at=ge(Q);if(ft==ra)Q=at;else if(!at){if(ft==It)continue e;break e}}J[j++]=Q}return J}he.prototype=Qa(Cr.prototype),he.prototype.constructor=he;function Ea(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}function E_(){this.__data__=Cn?Cn(null):{},this.size=0}function k_(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function R_(e){var t=this.__data__;if(Cn){var n=t[e];return n===w?r:n}return Se.call(t,e)?t[e]:r}function $_(e){var t=this.__data__;return Cn?t[e]!==r:Se.call(t,e)}function T_(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Cn&&t===r?w:t,this}Ea.prototype.clear=E_,Ea.prototype.delete=k_,Ea.prototype.get=R_,Ea.prototype.has=$_,Ea.prototype.set=T_;function Kt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}function x_(){this.__data__=[],this.size=0}function L_(e){var t=this.__data__,n=Pr(t,e);if(n<0)return!1;var s=t.length-1;return n==s?t.pop():yr.call(t,n,1),--this.size,!0}function O_(e){var t=this.__data__,n=Pr(t,e);return n<0?r:t[n][1]}function D_(e){return Pr(this.__data__,e)>-1}function N_(e,t){var n=this.__data__,s=Pr(n,e);return s<0?(++this.size,n.push([e,t])):n[s][1]=t,this}Kt.prototype.clear=x_,Kt.prototype.delete=L_,Kt.prototype.get=O_,Kt.prototype.has=D_,Kt.prototype.set=N_;function Vt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}function z_(){this.size=0,this.__data__={hash:new Ea,map:new(bn||Kt),string:new Ea}}function q_(e){var t=Nr(this,e).delete(e);return this.size-=t?1:0,t}function F_(e){return Nr(this,e).get(e)}function B_(e){return Nr(this,e).has(e)}function M_(e,t){var n=Nr(this,e),s=n.size;return n.set(e,t),this.size+=n.size==s?0:1,this}Vt.prototype.clear=z_,Vt.prototype.delete=q_,Vt.prototype.get=F_,Vt.prototype.has=B_,Vt.prototype.set=M_;function ka(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Vt;++t<n;)this.add(e[t])}function U_(e){return this.__data__.set(e,w),this}function j_(e){return this.__data__.has(e)}ka.prototype.add=ka.prototype.push=U_,ka.prototype.has=j_;function $t(e){var t=this.__data__=new Kt(e);this.size=t.size}function H_(){this.__data__=new Kt,this.size=0}function G_(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function W_(e){return this.__data__.get(e)}function K_(e){return this.__data__.has(e)}function V_(e,t){var n=this.__data__;if(n instanceof Kt){var s=n.__data__;if(!bn||s.length<c-1)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new Vt(s)}return n.set(e,t),this.size=n.size,this}$t.prototype.clear=H_,$t.prototype.delete=G_,$t.prototype.get=W_,$t.prototype.has=K_,$t.prototype.set=V_;function uu(e,t){var n=re(e),s=!n&&La(e),l=!n&&!s&&ba(e),d=!n&&!s&&!l&&nn(e),y=n||s||l||d,C=y?Ui(e.length,r_):[],E=C.length;for(var L in e)(t||Se.call(e,L))&&!(y&&(L=="length"||l&&(L=="offset"||L=="parent")||d&&(L=="buffer"||L=="byteLength"||L=="byteOffset")||Jt(L,E)))&&C.push(L);return C}function pu(e){var t=e.length;return t?e[is(0,t-1)]:r}function Y_(e,t){return zr(it(e),Ra(t,0,e.length))}function X_(e){return zr(it(e))}function Yi(e,t,n){(n!==r&&!Tt(e[t],n)||n===r&&!(t in e))&&Yt(e,t,n)}function An(e,t,n){var s=e[t];(!(Se.call(e,t)&&Tt(s,n))||n===r&&!(t in e))&&Yt(e,t,n)}function Pr(e,t){for(var n=e.length;n--;)if(Tt(e[n][0],t))return n;return-1}function Z_(e,t,n,s){return ya(e,function(l,d,y){t(s,l,n(l),y)}),s}function du(e,t){return e&&zt(t,Me(t),e)}function J_(e,t){return e&&zt(t,ot(t),e)}function Yt(e,t,n){t=="__proto__"&&mr?mr(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Xi(e,t){for(var n=-1,s=t.length,l=$(s),d=e==null;++n<s;)l[n]=d?r:$s(e,t[n]);return l}function Ra(e,t,n){return e===e&&(n!==r&&(e=e<=n?e:n),t!==r&&(e=e>=t?e:t)),e}function bt(e,t,n,s,l,d){var y,C=t&b,E=t&R,L=t&U;if(n&&(y=l?n(e,s,l,d):n(e)),y!==r)return y;if(!$e(e))return e;var O=re(e);if(O){if(y=By(e),!C)return it(e,y)}else{var D=Ye(e),j=D==la||D==Ma;if(ba(e))return Nu(e,C);if(D==ie||D==Lt||j&&!l){if(y=E||j?{}:tp(e),!C)return E?Ry(e,J_(y,e)):ky(e,du(y,e))}else{if(!Ae[D])return l?e:{};y=My(e,D,C)}}d||(d=new $t);var V=d.get(e);if(V)return V;d.set(e,y),$p(e)?e.forEach(function(Q){y.add(bt(Q,t,n,Q,e,d))}):kp(e)&&e.forEach(function(Q,de){y.set(de,bt(Q,t,n,de,e,d))});var J=L?E?_s:gs:E?ot:Me,ce=O?r:J(e);return mt(ce||e,function(Q,de){ce&&(de=Q,Q=e[de]),An(y,de,bt(Q,t,n,de,e,d))}),y}function Q_(e){var t=Me(e);return function(n){return hu(n,e,t)}}function hu(e,t,n){var s=n.length;if(e==null)return!s;for(e=Pe(e);s--;){var l=n[s],d=t[l],y=e[l];if(y===r&&!(l in e)||!d(y))return!1}return!0}function fu(e,t,n){if(typeof e!="function")throw new wt(_);return xn(function(){e.apply(r,n)},t)}function In(e,t,n,s){var l=-1,d=or,y=!0,C=e.length,E=[],L=t.length;if(!C)return E;n&&(t=ke(t,pt(n))),s?(d=Ni,y=!1):t.length>=c&&(d=wn,y=!1,t=new ka(t));e:for(;++l<C;){var O=e[l],D=n==null?O:n(O);if(O=s||O!==0?O:0,y&&D===D){for(var j=L;j--;)if(t[j]===D)continue e;E.push(O)}else d(t,D,s)||E.push(O)}return E}var ya=Mu(Nt),gu=Mu(Ji,!0);function ey(e,t){var n=!0;return ya(e,function(s,l,d){return n=!!t(s,l,d),n}),n}function Ar(e,t,n){for(var s=-1,l=e.length;++s<l;){var d=e[s],y=t(d);if(y!=null&&(C===r?y===y&&!ht(y):n(y,C)))var C=y,E=d}return E}function ty(e,t,n,s){var l=e.length;for(n=oe(n),n<0&&(n=-n>l?0:l+n),s=s===r||s>l?l:oe(s),s<0&&(s+=l),s=n>s?0:xp(s);n<s;)e[n++]=t;return e}function _u(e,t){var n=[];return ya(e,function(s,l,d){t(s,l,d)&&n.push(s)}),n}function Ge(e,t,n,s,l){var d=-1,y=e.length;for(n||(n=jy),l||(l=[]);++d<y;){var C=e[d];t>0&&n(C)?t>1?Ge(C,t-1,n,s,l):fa(l,C):s||(l[l.length]=C)}return l}var Zi=Uu(),yu=Uu(!0);function Nt(e,t){return e&&Zi(e,t,Me)}function Ji(e,t){return e&&yu(e,t,Me)}function Ir(e,t){return ha(t,function(n){return Qt(e[n])})}function $a(e,t){t=wa(t,e);for(var n=0,s=t.length;e!=null&&n<s;)e=e[qt(t[n++])];return n&&n==s?e:r}function mu(e,t,n){var s=t(e);return re(e)?s:fa(s,n(e))}function et(e){return e==null?e===r?jt:ca:Ia&&Ia in Pe(e)?zy(e):Xy(e)}function Qi(e,t){return e>t}function ay(e,t){return e!=null&&Se.call(e,t)}function ny(e,t){return e!=null&&t in Pe(e)}function ry(e,t,n){return e>=Ve(t,n)&&e<Be(t,n)}function es(e,t,n){for(var s=n?Ni:or,l=e[0].length,d=e.length,y=d,C=$(d),E=1/0,L=[];y--;){var O=e[y];y&&t&&(O=ke(O,pt(t))),E=Ve(O.length,E),C[y]=!n&&(t||l>=120&&O.length>=120)?new ka(y&&O):r}O=e[0];var D=-1,j=C[0];e:for(;++D<l&&L.length<E;){var V=O[D],J=t?t(V):V;if(V=n||V!==0?V:0,!(j?wn(j,J):s(L,J,n))){for(y=d;--y;){var ce=C[y];if(!(ce?wn(ce,J):s(e[y],J,n)))continue e}j&&j.push(J),L.push(V)}}return L}function iy(e,t,n,s){return Nt(e,function(l,d,y){t(s,n(l),d,y)}),s}function En(e,t,n){t=wa(t,e),e=ip(e,t);var s=e==null?e:e[qt(Ct(t))];return s==null?r:ut(s,e,n)}function wu(e){return Oe(e)&&et(e)==Lt}function sy(e){return Oe(e)&&et(e)==kt}function oy(e){return Oe(e)&&et(e)==Ut}function kn(e,t,n,s,l){return e===t?!0:e==null||t==null||!Oe(e)&&!Oe(t)?e!==e&&t!==t:ly(e,t,n,s,kn,l)}function ly(e,t,n,s,l,d){var y=re(e),C=re(t),E=y?sa:Ye(e),L=C?sa:Ye(t);E=E==Lt?ie:E,L=L==Lt?ie:L;var O=E==ie,D=L==ie,j=E==L;if(j&&ba(e)){if(!ba(t))return!1;y=!0,O=!1}if(j&&!O)return d||(d=new $t),y||nn(e)?Ju(e,t,n,s,l,d):Dy(e,t,E,n,s,l,d);if(!(n&Y)){var V=O&&Se.call(e,"__wrapped__"),J=D&&Se.call(t,"__wrapped__");if(V||J){var ce=V?e.value():e,Q=J?t.value():t;return d||(d=new $t),l(ce,Q,n,s,d)}}return j?(d||(d=new $t),Ny(e,t,n,s,l,d)):!1}function cy(e){return Oe(e)&&Ye(e)==Xe}function ts(e,t,n,s){var l=n.length,d=l,y=!s;if(e==null)return!d;for(e=Pe(e);l--;){var C=n[l];if(y&&C[2]?C[1]!==e[C[0]]:!(C[0]in e))return!1}for(;++l<d;){C=n[l];var E=C[0],L=e[E],O=C[1];if(y&&C[2]){if(L===r&&!(E in e))return!1}else{var D=new $t;if(s)var j=s(L,O,E,e,t,D);if(!(j===r?kn(O,L,Y|N,s,D):j))return!1}}return!0}function vu(e){if(!$e(e)||Gy(e))return!1;var t=Qt(e)?c_:Ci;return t.test(xa(e))}function uy(e){return Oe(e)&&et(e)==Et}function py(e){return Oe(e)&&Ye(e)==qe}function dy(e){return Oe(e)&&jr(e.length)&&!!Ie[et(e)]}function bu(e){return typeof e=="function"?e:e==null?lt:typeof e=="object"?re(e)?Pu(e[0],e[1]):Cu(e):jp(e)}function as(e){if(!Tn(e))return g_(e);var t=[];for(var n in Pe(e))Se.call(e,n)&&n!="constructor"&&t.push(n);return t}function hy(e){if(!$e(e))return Yy(e);var t=Tn(e),n=[];for(var s in e)s=="constructor"&&(t||!Se.call(e,s))||n.push(s);return n}function ns(e,t){return e<t}function Su(e,t){var n=-1,s=st(e)?$(e.length):[];return ya(e,function(l,d,y){s[++n]=t(l,d,y)}),s}function Cu(e){var t=ms(e);return t.length==1&&t[0][2]?np(t[0][0],t[0][1]):function(n){return n===e||ts(n,e,t)}}function Pu(e,t){return vs(e)&&ap(t)?np(qt(e),t):function(n){var s=$s(n,e);return s===r&&s===t?Ts(n,e):kn(t,s,Y|N)}}function Er(e,t,n,s,l){e!==t&&Zi(t,function(d,y){if(l||(l=new $t),$e(d))fy(e,t,y,n,Er,s,l);else{var C=s?s(Ss(e,y),d,y+"",e,t,l):r;C===r&&(C=d),Yi(e,y,C)}},ot)}function fy(e,t,n,s,l,d,y){var C=Ss(e,n),E=Ss(t,n),L=y.get(E);if(L){Yi(e,n,L);return}var O=d?d(C,E,n+"",e,t,y):r,D=O===r;if(D){var j=re(E),V=!j&&ba(E),J=!j&&!V&&nn(E);O=E,j||V||J?re(C)?O=C:Ne(C)?O=it(C):V?(D=!1,O=Nu(E,!0)):J?(D=!1,O=zu(E,!0)):O=[]:Ln(E)||La(E)?(O=C,La(C)?O=Lp(C):(!$e(C)||Qt(C))&&(O=tp(E))):D=!1}D&&(y.set(E,O),l(O,E,s,d,y),y.delete(E)),Yi(e,n,O)}function Au(e,t){var n=e.length;if(n)return t+=t<0?n:0,Jt(t,n)?e[t]:r}function Iu(e,t,n){t.length?t=ke(t,function(d){return re(d)?function(y){return $a(y,d.length===1?d[0]:d)}:d}):t=[lt];var s=-1;t=ke(t,pt(Z()));var l=Su(e,function(d,y,C){var E=ke(t,function(L){return L(d)});return{criteria:E,index:++s,value:d}});return Mg(l,function(d,y){return Ey(d,y,n)})}function gy(e,t){return Eu(e,t,function(n,s){return Ts(e,s)})}function Eu(e,t,n){for(var s=-1,l=t.length,d={};++s<l;){var y=t[s],C=$a(e,y);n(C,y)&&Rn(d,wa(y,e),C)}return d}function _y(e){return function(t){return $a(t,e)}}function rs(e,t,n,s){var l=s?Bg:Wa,d=-1,y=t.length,C=e;for(e===t&&(t=it(t)),n&&(C=ke(e,pt(n)));++d<y;)for(var E=0,L=t[d],O=n?n(L):L;(E=l(C,O,E,s))>-1;)C!==e&&yr.call(C,E,1),yr.call(e,E,1);return e}function ku(e,t){for(var n=e?t.length:0,s=n-1;n--;){var l=t[n];if(n==s||l!==d){var d=l;Jt(l)?yr.call(e,l,1):ls(e,l)}}return e}function is(e,t){return e+vr(lu()*(t-e+1))}function yy(e,t,n,s){for(var l=-1,d=Be(wr((t-e)/(n||1)),0),y=$(d);d--;)y[s?d:++l]=e,e+=n;return y}function ss(e,t){var n="";if(!e||t<1||t>nt)return n;do t%2&&(n+=e),t=vr(t/2),t&&(e+=e);while(t);return n}function pe(e,t){return Cs(rp(e,t,lt),e+"")}function my(e){return pu(rn(e))}function wy(e,t){var n=rn(e);return zr(n,Ra(t,0,n.length))}function Rn(e,t,n,s){if(!$e(e))return e;t=wa(t,e);for(var l=-1,d=t.length,y=d-1,C=e;C!=null&&++l<d;){var E=qt(t[l]),L=n;if(E==="__proto__"||E==="constructor"||E==="prototype")return e;if(l!=y){var O=C[E];L=s?s(O,E,C):r,L===r&&(L=$e(O)?O:Jt(t[l+1])?[]:{})}An(C,E,L),C=C[E]}return e}var Ru=br?function(e,t){return br.set(e,t),e}:lt,vy=mr?function(e,t){return mr(e,"toString",{configurable:!0,enumerable:!1,value:Ls(t),writable:!0})}:lt;function by(e){return zr(rn(e))}function St(e,t,n){var s=-1,l=e.length;t<0&&(t=-t>l?0:l+t),n=n>l?l:n,n<0&&(n+=l),l=t>n?0:n-t>>>0,t>>>=0;for(var d=$(l);++s<l;)d[s]=e[s+t];return d}function Sy(e,t){var n;return ya(e,function(s,l,d){return n=t(s,l,d),!n}),!!n}function kr(e,t,n){var s=0,l=e==null?s:e.length;if(typeof t=="number"&&t===t&&l<=cn){for(;s<l;){var d=s+l>>>1,y=e[d];y!==null&&!ht(y)&&(n?y<=t:y<t)?s=d+1:l=d}return l}return os(e,t,lt,n)}function os(e,t,n,s){var l=0,d=e==null?0:e.length;if(d===0)return 0;t=n(t);for(var y=t!==t,C=t===null,E=ht(t),L=t===r;l<d;){var O=vr((l+d)/2),D=n(e[O]),j=D!==r,V=D===null,J=D===D,ce=ht(D);if(y)var Q=s||J;else L?Q=J&&(s||j):C?Q=J&&j&&(s||!V):E?Q=J&&j&&!V&&(s||!ce):V||ce?Q=!1:Q=s?D<=t:D<t;Q?l=O+1:d=O}return Ve(d,Ba)}function $u(e,t){for(var n=-1,s=e.length,l=0,d=[];++n<s;){var y=e[n],C=t?t(y):y;if(!n||!Tt(C,E)){var E=C;d[l++]=y===0?0:y}}return d}function Tu(e){return typeof e=="number"?e:ht(e)?ia:+e}function dt(e){if(typeof e=="string")return e;if(re(e))return ke(e,dt)+"";if(ht(e))return cu?cu.call(e):"";var t=e+"";return t=="0"&&1/e==-We?"-0":t}function ma(e,t,n){var s=-1,l=or,d=e.length,y=!0,C=[],E=C;if(n)y=!1,l=Ni;else if(d>=c){var L=t?null:Ly(e);if(L)return cr(L);y=!1,l=wn,E=new ka}else E=t?[]:C;e:for(;++s<d;){var O=e[s],D=t?t(O):O;if(O=n||O!==0?O:0,y&&D===D){for(var j=E.length;j--;)if(E[j]===D)continue e;t&&E.push(D),C.push(O)}else l(E,D,n)||(E!==C&&E.push(D),C.push(O))}return C}function ls(e,t){return t=wa(t,e),e=ip(e,t),e==null||delete e[qt(Ct(t))]}function xu(e,t,n,s){return Rn(e,t,n($a(e,t)),s)}function Rr(e,t,n,s){for(var l=e.length,d=s?l:-1;(s?d--:++d<l)&&t(e[d],d,e););return n?St(e,s?0:d,s?d+1:l):St(e,s?d+1:0,s?l:d)}function Lu(e,t){var n=e;return n instanceof he&&(n=n.value()),zi(t,function(s,l){return l.func.apply(l.thisArg,fa([s],l.args))},n)}function cs(e,t,n){var s=e.length;if(s<2)return s?ma(e[0]):[];for(var l=-1,d=$(s);++l<s;)for(var y=e[l],C=-1;++C<s;)C!=l&&(d[l]=In(d[l]||y,e[C],t,n));return ma(Ge(d,1),t,n)}function Ou(e,t,n){for(var s=-1,l=e.length,d=t.length,y={};++s<l;){var C=s<d?t[s]:r;n(y,e[s],C)}return y}function us(e){return Ne(e)?e:[]}function ps(e){return typeof e=="function"?e:lt}function wa(e,t){return re(e)?e:vs(e,t)?[e]:cp(ve(e))}var Cy=pe;function va(e,t,n){var s=e.length;return n=n===r?s:n,!t&&n>=s?e:St(e,t,n)}var Du=u_||function(e){return He.clearTimeout(e)};function Nu(e,t){if(t)return e.slice();var n=e.length,s=nu?nu(n):new e.constructor(n);return e.copy(s),s}function ds(e){var t=new e.constructor(e.byteLength);return new gr(t).set(new gr(e)),t}function Py(e,t){var n=t?ds(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function Ay(e){var t=new e.constructor(e.source,er.exec(e));return t.lastIndex=e.lastIndex,t}function Iy(e){return Pn?Pe(Pn.call(e)):{}}function zu(e,t){var n=t?ds(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function qu(e,t){if(e!==t){var n=e!==r,s=e===null,l=e===e,d=ht(e),y=t!==r,C=t===null,E=t===t,L=ht(t);if(!C&&!L&&!d&&e>t||d&&y&&E&&!C&&!L||s&&y&&E||!n&&E||!l)return 1;if(!s&&!d&&!L&&e<t||L&&n&&l&&!s&&!d||C&&n&&l||!y&&l||!E)return-1}return 0}function Ey(e,t,n){for(var s=-1,l=e.criteria,d=t.criteria,y=l.length,C=n.length;++s<y;){var E=qu(l[s],d[s]);if(E){if(s>=C)return E;var L=n[s];return E*(L=="desc"?-1:1)}}return e.index-t.index}function Fu(e,t,n,s){for(var l=-1,d=e.length,y=n.length,C=-1,E=t.length,L=Be(d-y,0),O=$(E+L),D=!s;++C<E;)O[C]=t[C];for(;++l<y;)(D||l<d)&&(O[n[l]]=e[l]);for(;L--;)O[C++]=e[l++];return O}function Bu(e,t,n,s){for(var l=-1,d=e.length,y=-1,C=n.length,E=-1,L=t.length,O=Be(d-C,0),D=$(O+L),j=!s;++l<O;)D[l]=e[l];for(var V=l;++E<L;)D[V+E]=t[E];for(;++y<C;)(j||l<d)&&(D[V+n[y]]=e[l++]);return D}function it(e,t){var n=-1,s=e.length;for(t||(t=$(s));++n<s;)t[n]=e[n];return t}function zt(e,t,n,s){var l=!n;n||(n={});for(var d=-1,y=t.length;++d<y;){var C=t[d],E=s?s(n[C],e[C],C,n,e):r;E===r&&(E=e[C]),l?Yt(n,C,E):An(n,C,E)}return n}function ky(e,t){return zt(e,ws(e),t)}function Ry(e,t){return zt(e,Qu(e),t)}function $r(e,t){return function(n,s){var l=re(n)?Og:Z_,d=t?t():{};return l(n,e,Z(s,2),d)}}function en(e){return pe(function(t,n){var s=-1,l=n.length,d=l>1?n[l-1]:r,y=l>2?n[2]:r;for(d=e.length>3&&typeof d=="function"?(l--,d):r,y&&tt(n[0],n[1],y)&&(d=l<3?r:d,l=1),t=Pe(t);++s<l;){var C=n[s];C&&e(t,C,s,d)}return t})}function Mu(e,t){return function(n,s){if(n==null)return n;if(!st(n))return e(n,s);for(var l=n.length,d=t?l:-1,y=Pe(n);(t?d--:++d<l)&&s(y[d],d,y)!==!1;);return n}}function Uu(e){return function(t,n,s){for(var l=-1,d=Pe(t),y=s(t),C=y.length;C--;){var E=y[e?C:++l];if(n(d[E],E,d)===!1)break}return t}}function $y(e,t,n){var s=t&G,l=$n(e);function d(){var y=this&&this!==He&&this instanceof d?l:e;return y.apply(s?n:this,arguments)}return d}function ju(e){return function(t){t=ve(t);var n=Ka(t)?Rt(t):r,s=n?n[0]:t.charAt(0),l=n?va(n,1).join(""):t.slice(1);return s[e]()+l}}function tn(e){return function(t){return zi(Mp(Bp(t).replace(vg,"")),e,"")}}function $n(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Qa(e.prototype),s=e.apply(n,t);return $e(s)?s:n}}function Ty(e,t,n){var s=$n(e);function l(){for(var d=arguments.length,y=$(d),C=d,E=an(l);C--;)y[C]=arguments[C];var L=d<3&&y[0]!==E&&y[d-1]!==E?[]:ga(y,E);if(d-=L.length,d<n)return Vu(e,t,Tr,l.placeholder,r,y,L,r,r,n-d);var O=this&&this!==He&&this instanceof l?s:e;return ut(O,this,y)}return l}function Hu(e){return function(t,n,s){var l=Pe(t);if(!st(t)){var d=Z(n,3);t=Me(t),n=function(C){return d(l[C],C,l)}}var y=e(t,n,s);return y>-1?l[d?t[y]:y]:r}}function Gu(e){return Zt(function(t){var n=t.length,s=n,l=vt.prototype.thru;for(e&&t.reverse();s--;){var d=t[s];if(typeof d!="function")throw new wt(_);if(l&&!y&&Dr(d)=="wrapper")var y=new vt([],!0)}for(s=y?s:n;++s<n;){d=t[s];var C=Dr(d),E=C=="wrapper"?ys(d):r;E&&bs(E[0])&&E[1]==(X|we|B|ue)&&!E[4].length&&E[9]==1?y=y[Dr(E[0])].apply(y,E[3]):y=d.length==1&&bs(d)?y[C]():y.thru(d)}return function(){var L=arguments,O=L[0];if(y&&L.length==1&&re(O))return y.plant(O).value();for(var D=0,j=n?t[D].apply(this,L):O;++D<n;)j=t[D].call(this,j);return j}})}function Tr(e,t,n,s,l,d,y,C,E,L){var O=t&X,D=t&G,j=t&ae,V=t&(we|be),J=t&fe,ce=j?r:$n(e);function Q(){for(var de=arguments.length,ge=$(de),ft=de;ft--;)ge[ft]=arguments[ft];if(V)var at=an(Q),gt=jg(ge,at);if(s&&(ge=Fu(ge,s,l,V)),d&&(ge=Bu(ge,d,y,V)),de-=gt,V&&de<L){var ze=ga(ge,at);return Vu(e,t,Tr,Q.placeholder,n,ge,ze,C,E,L-de)}var xt=D?n:this,ta=j?xt[e]:e;return de=ge.length,C?ge=Zy(ge,C):J&&de>1&&ge.reverse(),O&&E<de&&(ge.length=E),this&&this!==He&&this instanceof Q&&(ta=ce||$n(ta)),ta.apply(xt,ge)}return Q}function Wu(e,t){return function(n,s){return iy(n,e,t(s),{})}}function xr(e,t){return function(n,s){var l;if(n===r&&s===r)return t;if(n!==r&&(l=n),s!==r){if(l===r)return s;typeof n=="string"||typeof s=="string"?(n=dt(n),s=dt(s)):(n=Tu(n),s=Tu(s)),l=e(n,s)}return l}}function hs(e){return Zt(function(t){return t=ke(t,pt(Z())),pe(function(n){var s=this;return e(t,function(l){return ut(l,s,n)})})})}function Lr(e,t){t=t===r?" ":dt(t);var n=t.length;if(n<2)return n?ss(t,e):t;var s=ss(t,wr(e/Va(t)));return Ka(t)?va(Rt(s),0,e).join(""):s.slice(0,e)}function xy(e,t,n,s){var l=t&G,d=$n(e);function y(){for(var C=-1,E=arguments.length,L=-1,O=s.length,D=$(O+E),j=this&&this!==He&&this instanceof y?d:e;++L<O;)D[L]=s[L];for(;E--;)D[L++]=arguments[++C];return ut(j,l?n:this,D)}return y}function Ku(e){return function(t,n,s){return s&&typeof s!="number"&&tt(t,n,s)&&(n=s=r),t=ea(t),n===r?(n=t,t=0):n=ea(n),s=s===r?t<n?1:-1:ea(s),yy(t,n,s,e)}}function Or(e){return function(t,n){return typeof t=="string"&&typeof n=="string"||(t=Pt(t),n=Pt(n)),e(t,n)}}function Vu(e,t,n,s,l,d,y,C,E,L){var O=t&we,D=O?y:r,j=O?r:y,V=O?d:r,J=O?r:d;t|=O?B:ee,t&=~(O?ee:B),t&K||(t&=-4);var ce=[e,t,l,V,D,J,j,C,E,L],Q=n.apply(r,ce);return bs(e)&&sp(Q,ce),Q.placeholder=s,op(Q,e,t)}function fs(e){var t=Fe[e];return function(n,s){if(n=Pt(n),s=s==null?0:Ve(oe(s),292),s&&ou(n)){var l=(ve(n)+"e").split("e"),d=t(l[0]+"e"+(+l[1]+s));return l=(ve(d)+"e").split("e"),+(l[0]+"e"+(+l[1]-s))}return t(n)}}var Ly=Za&&1/cr(new Za([,-0]))[1]==We?function(e){return new Za(e)}:Ns;function Yu(e){return function(t){var n=Ye(t);return n==Xe?Hi(t):n==qe?Xg(t):Ug(t,e(t))}}function Xt(e,t,n,s,l,d,y,C){var E=t&ae;if(!E&&typeof e!="function")throw new wt(_);var L=s?s.length:0;if(L||(t&=-97,s=l=r),y=y===r?y:Be(oe(y),0),C=C===r?C:oe(C),L-=l?l.length:0,t&ee){var O=s,D=l;s=l=r}var j=E?r:ys(e),V=[e,t,n,s,l,O,D,d,y,C];if(j&&Vy(V,j),e=V[0],t=V[1],n=V[2],s=V[3],l=V[4],C=V[9]=V[9]===r?E?0:e.length:Be(V[9]-L,0),!C&&t&(we|be)&&(t&=-25),!t||t==G)var J=$y(e,t,n);else t==we||t==be?J=Ty(e,t,C):(t==B||t==(G|B))&&!l.length?J=xy(e,t,n,s):J=Tr.apply(r,V);var ce=j?Ru:sp;return op(ce(J,V),e,t)}function Xu(e,t,n,s){return e===r||Tt(e,Xa[n])&&!Se.call(s,n)?t:e}function Zu(e,t,n,s,l,d){return $e(e)&&$e(t)&&(d.set(t,e),Er(e,t,r,Zu,d),d.delete(t)),e}function Oy(e){return Ln(e)?r:e}function Ju(e,t,n,s,l,d){var y=n&Y,C=e.length,E=t.length;if(C!=E&&!(y&&E>C))return!1;var L=d.get(e),O=d.get(t);if(L&&O)return L==t&&O==e;var D=-1,j=!0,V=n&N?new ka:r;for(d.set(e,t),d.set(t,e);++D<C;){var J=e[D],ce=t[D];if(s)var Q=y?s(ce,J,D,t,e,d):s(J,ce,D,e,t,d);if(Q!==r){if(Q)continue;j=!1;break}if(V){if(!qi(t,function(de,ge){if(!wn(V,ge)&&(J===de||l(J,de,n,s,d)))return V.push(ge)})){j=!1;break}}else if(!(J===ce||l(J,ce,n,s,d))){j=!1;break}}return d.delete(e),d.delete(t),j}function Dy(e,t,n,s,l,d,y){switch(n){case Ke:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case kt:return!(e.byteLength!=t.byteLength||!d(new gr(e),new gr(t)));case Mt:case Ut:case se:return Tt(+e,+t);case oa:return e.name==t.name&&e.message==t.message;case Et:case je:return e==t+"";case Xe:var C=Hi;case qe:var E=s&Y;if(C||(C=cr),e.size!=t.size&&!E)return!1;var L=y.get(e);if(L)return L==t;s|=N,y.set(e,t);var O=Ju(C(e),C(t),s,l,d,y);return y.delete(e),O;case Le:if(Pn)return Pn.call(e)==Pn.call(t)}return!1}function Ny(e,t,n,s,l,d){var y=n&Y,C=gs(e),E=C.length,L=gs(t),O=L.length;if(E!=O&&!y)return!1;for(var D=E;D--;){var j=C[D];if(!(y?j in t:Se.call(t,j)))return!1}var V=d.get(e),J=d.get(t);if(V&&J)return V==t&&J==e;var ce=!0;d.set(e,t),d.set(t,e);for(var Q=y;++D<E;){j=C[D];var de=e[j],ge=t[j];if(s)var ft=y?s(ge,de,j,t,e,d):s(de,ge,j,e,t,d);if(!(ft===r?de===ge||l(de,ge,n,s,d):ft)){ce=!1;break}Q||(Q=j=="constructor")}if(ce&&!Q){var at=e.constructor,gt=t.constructor;at!=gt&&"constructor"in e&&"constructor"in t&&!(typeof at=="function"&&at instanceof at&&typeof gt=="function"&&gt instanceof gt)&&(ce=!1)}return d.delete(e),d.delete(t),ce}function Zt(e){return Cs(rp(e,r,hp),e+"")}function gs(e){return mu(e,Me,ws)}function _s(e){return mu(e,ot,Qu)}var ys=br?function(e){return br.get(e)}:Ns;function Dr(e){for(var t=e.name+"",n=Ja[t],s=Se.call(Ja,t)?n.length:0;s--;){var l=n[s],d=l.func;if(d==null||d==e)return l.name}return t}function an(e){var t=Se.call(u,"placeholder")?u:e;return t.placeholder}function Z(){var e=u.iteratee||Os;return e=e===Os?bu:e,arguments.length?e(arguments[0],arguments[1]):e}function Nr(e,t){var n=e.__data__;return Hy(t)?n[typeof t=="string"?"string":"hash"]:n.map}function ms(e){for(var t=Me(e),n=t.length;n--;){var s=t[n],l=e[s];t[n]=[s,l,ap(l)]}return t}function Ta(e,t){var n=Kg(e,t);return vu(n)?n:r}function zy(e){var t=Se.call(e,Ia),n=e[Ia];try{e[Ia]=r;var s=!0}catch{}var l=hr.call(e);return s&&(t?e[Ia]=n:delete e[Ia]),l}var ws=Wi?function(e){return e==null?[]:(e=Pe(e),ha(Wi(e),function(t){return iu.call(e,t)}))}:zs,Qu=Wi?function(e){for(var t=[];e;)fa(t,ws(e)),e=_r(e);return t}:zs,Ye=et;(Ki&&Ye(new Ki(new ArrayBuffer(1)))!=Ke||bn&&Ye(new bn)!=Xe||Vi&&Ye(Vi.resolve())!=rt||Za&&Ye(new Za)!=qe||Sn&&Ye(new Sn)!=ct)&&(Ye=function(e){var t=et(e),n=t==ie?e.constructor:r,s=n?xa(n):"";if(s)switch(s){case w_:return Ke;case v_:return Xe;case b_:return rt;case S_:return qe;case C_:return ct}return t});function qy(e,t,n){for(var s=-1,l=n.length;++s<l;){var d=n[s],y=d.size;switch(d.type){case"drop":e+=y;break;case"dropRight":t-=y;break;case"take":t=Ve(t,e+y);break;case"takeRight":e=Be(e,t-y);break}}return{start:e,end:t}}function Fy(e){var t=e.match(gi);return t?t[1].split(_i):[]}function ep(e,t,n){t=wa(t,e);for(var s=-1,l=t.length,d=!1;++s<l;){var y=qt(t[s]);if(!(d=e!=null&&n(e,y)))break;e=e[y]}return d||++s!=l?d:(l=e==null?0:e.length,!!l&&jr(l)&&Jt(y,l)&&(re(e)||La(e)))}function By(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&Se.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function tp(e){return typeof e.constructor=="function"&&!Tn(e)?Qa(_r(e)):{}}function My(e,t,n){var s=e.constructor;switch(t){case kt:return ds(e);case Mt:case Ut:return new s(+e);case Ke:return Py(e,n);case Ht:case Gt:case ua:case Wt:case Ze:case Je:case hn:case fn:case Ca:return zu(e,n);case Xe:return new s;case se:case je:return new s(e);case Et:return Ay(e);case qe:return new s;case Le:return Iy(e)}}function Uy(e,t){var n=t.length;if(!n)return e;var s=n-1;return t[s]=(n>1?"& ":"")+t[s],t=t.join(n>2?", ":" "),e.replace(fi,`{
/* [wrapped with `+t+`] */
`)}function jy(e){return re(e)||La(e)||!!(su&&e&&e[su])}function Jt(e,t){var n=typeof e;return t=t??nt,!!t&&(n=="number"||n!="symbol"&&Ai.test(e))&&e>-1&&e%1==0&&e<t}function tt(e,t,n){if(!$e(n))return!1;var s=typeof t;return(s=="number"?st(n)&&Jt(t,n.length):s=="string"&&t in n)?Tt(n[t],e):!1}function vs(e,t){if(re(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||ht(e)?!0:pi.test(e)||!ui.test(e)||t!=null&&e in Pe(t)}function Hy(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function bs(e){var t=Dr(e),n=u[t];if(typeof n!="function"||!(t in he.prototype))return!1;if(e===n)return!0;var s=ys(n);return!!s&&e===s[0]}function Gy(e){return!!au&&au in e}var Wy=pr?Qt:qs;function Tn(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Xa;return e===n}function ap(e){return e===e&&!$e(e)}function np(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==r||e in Pe(n))}}function Ky(e){var t=Mr(e,function(s){return n.size===S&&n.clear(),s}),n=t.cache;return t}function Vy(e,t){var n=e[1],s=t[1],l=n|s,d=l<(G|ae|X),y=s==X&&n==we||s==X&&n==ue&&e[7].length<=t[8]||s==(X|ue)&&t[7].length<=t[8]&&n==we;if(!(d||y))return e;s&G&&(e[2]=t[2],l|=n&G?0:K);var C=t[3];if(C){var E=e[3];e[3]=E?Fu(E,C,t[4]):C,e[4]=E?ga(e[3],m):t[4]}return C=t[5],C&&(E=e[5],e[5]=E?Bu(E,C,t[6]):C,e[6]=E?ga(e[5],m):t[6]),C=t[7],C&&(e[7]=C),s&X&&(e[8]=e[8]==null?t[8]:Ve(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=l,e}function Yy(e){var t=[];if(e!=null)for(var n in Pe(e))t.push(n);return t}function Xy(e){return hr.call(e)}function rp(e,t,n){return t=Be(t===r?e.length-1:t,0),function(){for(var s=arguments,l=-1,d=Be(s.length-t,0),y=$(d);++l<d;)y[l]=s[t+l];l=-1;for(var C=$(t+1);++l<t;)C[l]=s[l];return C[t]=n(y),ut(e,this,C)}}function ip(e,t){return t.length<2?e:$a(e,St(t,0,-1))}function Zy(e,t){for(var n=e.length,s=Ve(t.length,n),l=it(e);s--;){var d=t[s];e[s]=Jt(d,n)?l[d]:r}return e}function Ss(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var sp=lp(Ru),xn=d_||function(e,t){return He.setTimeout(e,t)},Cs=lp(vy);function op(e,t,n){var s=t+"";return Cs(e,Uy(s,Jy(Fy(s),n)))}function lp(e){var t=0,n=0;return function(){var s=__(),l=Ue-(s-n);if(n=s,l>0){if(++t>=Re)return arguments[0]}else t=0;return e.apply(r,arguments)}}function zr(e,t){var n=-1,s=e.length,l=s-1;for(t=t===r?s:t;++n<t;){var d=is(n,l),y=e[d];e[d]=e[n],e[n]=y}return e.length=t,e}var cp=Ky(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(di,function(n,s,l,d){t.push(l?d.replace(wi,"$1"):s||n)}),t});function qt(e){if(typeof e=="string"||ht(e))return e;var t=e+"";return t=="0"&&1/e==-We?"-0":t}function xa(e){if(e!=null){try{return dr.call(e)}catch{}try{return e+""}catch{}}return""}function Jy(e,t){return mt(un,function(n){var s="_."+n[0];t&n[1]&&!or(e,s)&&e.push(s)}),e.sort()}function up(e){if(e instanceof he)return e.clone();var t=new vt(e.__wrapped__,e.__chain__);return t.__actions__=it(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Qy(e,t,n){(n?tt(e,t,n):t===r)?t=1:t=Be(oe(t),0);var s=e==null?0:e.length;if(!s||t<1)return[];for(var l=0,d=0,y=$(wr(s/t));l<s;)y[d++]=St(e,l,l+=t);return y}function em(e){for(var t=-1,n=e==null?0:e.length,s=0,l=[];++t<n;){var d=e[t];d&&(l[s++]=d)}return l}function tm(){var e=arguments.length;if(!e)return[];for(var t=$(e-1),n=arguments[0],s=e;s--;)t[s-1]=arguments[s];return fa(re(n)?it(n):[n],Ge(t,1))}var am=pe(function(e,t){return Ne(e)?In(e,Ge(t,1,Ne,!0)):[]}),nm=pe(function(e,t){var n=Ct(t);return Ne(n)&&(n=r),Ne(e)?In(e,Ge(t,1,Ne,!0),Z(n,2)):[]}),rm=pe(function(e,t){var n=Ct(t);return Ne(n)&&(n=r),Ne(e)?In(e,Ge(t,1,Ne,!0),r,n):[]});function im(e,t,n){var s=e==null?0:e.length;return s?(t=n||t===r?1:oe(t),St(e,t<0?0:t,s)):[]}function sm(e,t,n){var s=e==null?0:e.length;return s?(t=n||t===r?1:oe(t),t=s-t,St(e,0,t<0?0:t)):[]}function om(e,t){return e&&e.length?Rr(e,Z(t,3),!0,!0):[]}function lm(e,t){return e&&e.length?Rr(e,Z(t,3),!0):[]}function cm(e,t,n,s){var l=e==null?0:e.length;return l?(n&&typeof n!="number"&&tt(e,t,n)&&(n=0,s=l),ty(e,t,n,s)):[]}function pp(e,t,n){var s=e==null?0:e.length;if(!s)return-1;var l=n==null?0:oe(n);return l<0&&(l=Be(s+l,0)),lr(e,Z(t,3),l)}function dp(e,t,n){var s=e==null?0:e.length;if(!s)return-1;var l=s-1;return n!==r&&(l=oe(n),l=n<0?Be(s+l,0):Ve(l,s-1)),lr(e,Z(t,3),l,!0)}function hp(e){var t=e==null?0:e.length;return t?Ge(e,1):[]}function um(e){var t=e==null?0:e.length;return t?Ge(e,We):[]}function pm(e,t){var n=e==null?0:e.length;return n?(t=t===r?1:oe(t),Ge(e,t)):[]}function dm(e){for(var t=-1,n=e==null?0:e.length,s={};++t<n;){var l=e[t];s[l[0]]=l[1]}return s}function fp(e){return e&&e.length?e[0]:r}function hm(e,t,n){var s=e==null?0:e.length;if(!s)return-1;var l=n==null?0:oe(n);return l<0&&(l=Be(s+l,0)),Wa(e,t,l)}function fm(e){var t=e==null?0:e.length;return t?St(e,0,-1):[]}var gm=pe(function(e){var t=ke(e,us);return t.length&&t[0]===e[0]?es(t):[]}),_m=pe(function(e){var t=Ct(e),n=ke(e,us);return t===Ct(n)?t=r:n.pop(),n.length&&n[0]===e[0]?es(n,Z(t,2)):[]}),ym=pe(function(e){var t=Ct(e),n=ke(e,us);return t=typeof t=="function"?t:r,t&&n.pop(),n.length&&n[0]===e[0]?es(n,r,t):[]});function mm(e,t){return e==null?"":f_.call(e,t)}function Ct(e){var t=e==null?0:e.length;return t?e[t-1]:r}function wm(e,t,n){var s=e==null?0:e.length;if(!s)return-1;var l=s;return n!==r&&(l=oe(n),l=l<0?Be(s+l,0):Ve(l,s-1)),t===t?Jg(e,t,l):lr(e,Vc,l,!0)}function vm(e,t){return e&&e.length?Au(e,oe(t)):r}var bm=pe(gp);function gp(e,t){return e&&e.length&&t&&t.length?rs(e,t):e}function Sm(e,t,n){return e&&e.length&&t&&t.length?rs(e,t,Z(n,2)):e}function Cm(e,t,n){return e&&e.length&&t&&t.length?rs(e,t,r,n):e}var Pm=Zt(function(e,t){var n=e==null?0:e.length,s=Xi(e,t);return ku(e,ke(t,function(l){return Jt(l,n)?+l:l}).sort(qu)),s});function Am(e,t){var n=[];if(!(e&&e.length))return n;var s=-1,l=[],d=e.length;for(t=Z(t,3);++s<d;){var y=e[s];t(y,s,e)&&(n.push(y),l.push(s))}return ku(e,l),n}function Ps(e){return e==null?e:m_.call(e)}function Im(e,t,n){var s=e==null?0:e.length;return s?(n&&typeof n!="number"&&tt(e,t,n)?(t=0,n=s):(t=t==null?0:oe(t),n=n===r?s:oe(n)),St(e,t,n)):[]}function Em(e,t){return kr(e,t)}function km(e,t,n){return os(e,t,Z(n,2))}function Rm(e,t){var n=e==null?0:e.length;if(n){var s=kr(e,t);if(s<n&&Tt(e[s],t))return s}return-1}function $m(e,t){return kr(e,t,!0)}function Tm(e,t,n){return os(e,t,Z(n,2),!0)}function xm(e,t){var n=e==null?0:e.length;if(n){var s=kr(e,t,!0)-1;if(Tt(e[s],t))return s}return-1}function Lm(e){return e&&e.length?$u(e):[]}function Om(e,t){return e&&e.length?$u(e,Z(t,2)):[]}function Dm(e){var t=e==null?0:e.length;return t?St(e,1,t):[]}function Nm(e,t,n){return e&&e.length?(t=n||t===r?1:oe(t),St(e,0,t<0?0:t)):[]}function zm(e,t,n){var s=e==null?0:e.length;return s?(t=n||t===r?1:oe(t),t=s-t,St(e,t<0?0:t,s)):[]}function qm(e,t){return e&&e.length?Rr(e,Z(t,3),!1,!0):[]}function Fm(e,t){return e&&e.length?Rr(e,Z(t,3)):[]}var Bm=pe(function(e){return ma(Ge(e,1,Ne,!0))}),Mm=pe(function(e){var t=Ct(e);return Ne(t)&&(t=r),ma(Ge(e,1,Ne,!0),Z(t,2))}),Um=pe(function(e){var t=Ct(e);return t=typeof t=="function"?t:r,ma(Ge(e,1,Ne,!0),r,t)});function jm(e){return e&&e.length?ma(e):[]}function Hm(e,t){return e&&e.length?ma(e,Z(t,2)):[]}function Gm(e,t){return t=typeof t=="function"?t:r,e&&e.length?ma(e,r,t):[]}function As(e){if(!(e&&e.length))return[];var t=0;return e=ha(e,function(n){if(Ne(n))return t=Be(n.length,t),!0}),Ui(t,function(n){return ke(e,Fi(n))})}function _p(e,t){if(!(e&&e.length))return[];var n=As(e);return t==null?n:ke(n,function(s){return ut(t,r,s)})}var Wm=pe(function(e,t){return Ne(e)?In(e,t):[]}),Km=pe(function(e){return cs(ha(e,Ne))}),Vm=pe(function(e){var t=Ct(e);return Ne(t)&&(t=r),cs(ha(e,Ne),Z(t,2))}),Ym=pe(function(e){var t=Ct(e);return t=typeof t=="function"?t:r,cs(ha(e,Ne),r,t)}),Xm=pe(As);function Zm(e,t){return Ou(e||[],t||[],An)}function Jm(e,t){return Ou(e||[],t||[],Rn)}var Qm=pe(function(e){var t=e.length,n=t>1?e[t-1]:r;return n=typeof n=="function"?(e.pop(),n):r,_p(e,n)});function yp(e){var t=u(e);return t.__chain__=!0,t}function ew(e,t){return t(e),e}function qr(e,t){return t(e)}var tw=Zt(function(e){var t=e.length,n=t?e[0]:0,s=this.__wrapped__,l=function(d){return Xi(d,e)};return t>1||this.__actions__.length||!(s instanceof he)||!Jt(n)?this.thru(l):(s=s.slice(n,+n+(t?1:0)),s.__actions__.push({func:qr,args:[l],thisArg:r}),new vt(s,this.__chain__).thru(function(d){return t&&!d.length&&d.push(r),d}))});function aw(){return yp(this)}function nw(){return new vt(this.value(),this.__chain__)}function rw(){this.__values__===r&&(this.__values__=Tp(this.value()));var e=this.__index__>=this.__values__.length,t=e?r:this.__values__[this.__index__++];return{done:e,value:t}}function iw(){return this}function sw(e){for(var t,n=this;n instanceof Cr;){var s=up(n);s.__index__=0,s.__values__=r,t?l.__wrapped__=s:t=s;var l=s;n=n.__wrapped__}return l.__wrapped__=e,t}function ow(){var e=this.__wrapped__;if(e instanceof he){var t=e;return this.__actions__.length&&(t=new he(this)),t=t.reverse(),t.__actions__.push({func:qr,args:[Ps],thisArg:r}),new vt(t,this.__chain__)}return this.thru(Ps)}function lw(){return Lu(this.__wrapped__,this.__actions__)}var cw=$r(function(e,t,n){Se.call(e,n)?++e[n]:Yt(e,n,1)});function uw(e,t,n){var s=re(e)?Wc:ey;return n&&tt(e,t,n)&&(t=r),s(e,Z(t,3))}function pw(e,t){var n=re(e)?ha:_u;return n(e,Z(t,3))}var dw=Hu(pp),hw=Hu(dp);function fw(e,t){return Ge(Fr(e,t),1)}function gw(e,t){return Ge(Fr(e,t),We)}function _w(e,t,n){return n=n===r?1:oe(n),Ge(Fr(e,t),n)}function mp(e,t){var n=re(e)?mt:ya;return n(e,Z(t,3))}function wp(e,t){var n=re(e)?Dg:gu;return n(e,Z(t,3))}var yw=$r(function(e,t,n){Se.call(e,n)?e[n].push(t):Yt(e,n,[t])});function mw(e,t,n,s){e=st(e)?e:rn(e),n=n&&!s?oe(n):0;var l=e.length;return n<0&&(n=Be(l+n,0)),Hr(e)?n<=l&&e.indexOf(t,n)>-1:!!l&&Wa(e,t,n)>-1}var ww=pe(function(e,t,n){var s=-1,l=typeof t=="function",d=st(e)?$(e.length):[];return ya(e,function(y){d[++s]=l?ut(t,y,n):En(y,t,n)}),d}),vw=$r(function(e,t,n){Yt(e,n,t)});function Fr(e,t){var n=re(e)?ke:Su;return n(e,Z(t,3))}function bw(e,t,n,s){return e==null?[]:(re(t)||(t=t==null?[]:[t]),n=s?r:n,re(n)||(n=n==null?[]:[n]),Iu(e,t,n))}var Sw=$r(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});function Cw(e,t,n){var s=re(e)?zi:Xc,l=arguments.length<3;return s(e,Z(t,4),n,l,ya)}function Pw(e,t,n){var s=re(e)?Ng:Xc,l=arguments.length<3;return s(e,Z(t,4),n,l,gu)}function Aw(e,t){var n=re(e)?ha:_u;return n(e,Ur(Z(t,3)))}function Iw(e){var t=re(e)?pu:my;return t(e)}function Ew(e,t,n){(n?tt(e,t,n):t===r)?t=1:t=oe(t);var s=re(e)?Y_:wy;return s(e,t)}function kw(e){var t=re(e)?X_:by;return t(e)}function Rw(e){if(e==null)return 0;if(st(e))return Hr(e)?Va(e):e.length;var t=Ye(e);return t==Xe||t==qe?e.size:as(e).length}function $w(e,t,n){var s=re(e)?qi:Sy;return n&&tt(e,t,n)&&(t=r),s(e,Z(t,3))}var Tw=pe(function(e,t){if(e==null)return[];var n=t.length;return n>1&&tt(e,t[0],t[1])?t=[]:n>2&&tt(t[0],t[1],t[2])&&(t=[t[0]]),Iu(e,Ge(t,1),[])}),Br=p_||function(){return He.Date.now()};function xw(e,t){if(typeof t!="function")throw new wt(_);return e=oe(e),function(){if(--e<1)return t.apply(this,arguments)}}function vp(e,t,n){return t=n?r:t,t=e&&t==null?e.length:t,Xt(e,X,r,r,r,r,t)}function bp(e,t){var n;if(typeof t!="function")throw new wt(_);return e=oe(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=r),n}}var Is=pe(function(e,t,n){var s=G;if(n.length){var l=ga(n,an(Is));s|=B}return Xt(e,s,t,n,l)}),Sp=pe(function(e,t,n){var s=G|ae;if(n.length){var l=ga(n,an(Sp));s|=B}return Xt(t,s,e,n,l)});function Cp(e,t,n){t=n?r:t;var s=Xt(e,we,r,r,r,r,r,t);return s.placeholder=Cp.placeholder,s}function Pp(e,t,n){t=n?r:t;var s=Xt(e,be,r,r,r,r,r,t);return s.placeholder=Pp.placeholder,s}function Ap(e,t,n){var s,l,d,y,C,E,L=0,O=!1,D=!1,j=!0;if(typeof e!="function")throw new wt(_);t=Pt(t)||0,$e(n)&&(O=!!n.leading,D="maxWait"in n,d=D?Be(Pt(n.maxWait)||0,t):d,j="trailing"in n?!!n.trailing:j);function V(ze){var xt=s,ta=l;return s=l=r,L=ze,y=e.apply(ta,xt),y}function J(ze){return L=ze,C=xn(de,t),O?V(ze):y}function ce(ze){var xt=ze-E,ta=ze-L,Hp=t-xt;return D?Ve(Hp,d-ta):Hp}function Q(ze){var xt=ze-E,ta=ze-L;return E===r||xt>=t||xt<0||D&&ta>=d}function de(){var ze=Br();if(Q(ze))return ge(ze);C=xn(de,ce(ze))}function ge(ze){return C=r,j&&s?V(ze):(s=l=r,y)}function ft(){C!==r&&Du(C),L=0,s=E=l=C=r}function at(){return C===r?y:ge(Br())}function gt(){var ze=Br(),xt=Q(ze);if(s=arguments,l=this,E=ze,xt){if(C===r)return J(E);if(D)return Du(C),C=xn(de,t),V(E)}return C===r&&(C=xn(de,t)),y}return gt.cancel=ft,gt.flush=at,gt}var Lw=pe(function(e,t){return fu(e,1,t)}),Ow=pe(function(e,t,n){return fu(e,Pt(t)||0,n)});function Dw(e){return Xt(e,fe)}function Mr(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new wt(_);var n=function(){var s=arguments,l=t?t.apply(this,s):s[0],d=n.cache;if(d.has(l))return d.get(l);var y=e.apply(this,s);return n.cache=d.set(l,y)||d,y};return n.cache=new(Mr.Cache||Vt),n}Mr.Cache=Vt;function Ur(e){if(typeof e!="function")throw new wt(_);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Nw(e){return bp(2,e)}var zw=Cy(function(e,t){t=t.length==1&&re(t[0])?ke(t[0],pt(Z())):ke(Ge(t,1),pt(Z()));var n=t.length;return pe(function(s){for(var l=-1,d=Ve(s.length,n);++l<d;)s[l]=t[l].call(this,s[l]);return ut(e,this,s)})}),Es=pe(function(e,t){var n=ga(t,an(Es));return Xt(e,B,r,t,n)}),Ip=pe(function(e,t){var n=ga(t,an(Ip));return Xt(e,ee,r,t,n)}),qw=Zt(function(e,t){return Xt(e,ue,r,r,r,t)});function Fw(e,t){if(typeof e!="function")throw new wt(_);return t=t===r?t:oe(t),pe(e,t)}function Bw(e,t){if(typeof e!="function")throw new wt(_);return t=t==null?0:Be(oe(t),0),pe(function(n){var s=n[t],l=va(n,0,t);return s&&fa(l,s),ut(e,this,l)})}function Mw(e,t,n){var s=!0,l=!0;if(typeof e!="function")throw new wt(_);return $e(n)&&(s="leading"in n?!!n.leading:s,l="trailing"in n?!!n.trailing:l),Ap(e,t,{leading:s,maxWait:t,trailing:l})}function Uw(e){return vp(e,1)}function jw(e,t){return Es(ps(t),e)}function Hw(){if(!arguments.length)return[];var e=arguments[0];return re(e)?e:[e]}function Gw(e){return bt(e,U)}function Ww(e,t){return t=typeof t=="function"?t:r,bt(e,U,t)}function Kw(e){return bt(e,b|U)}function Vw(e,t){return t=typeof t=="function"?t:r,bt(e,b|U,t)}function Yw(e,t){return t==null||hu(e,t,Me(t))}function Tt(e,t){return e===t||e!==e&&t!==t}var Xw=Or(Qi),Zw=Or(function(e,t){return e>=t}),La=wu(function(){return arguments}())?wu:function(e){return Oe(e)&&Se.call(e,"callee")&&!iu.call(e,"callee")},re=$.isArray,Jw=Bc?pt(Bc):sy;function st(e){return e!=null&&jr(e.length)&&!Qt(e)}function Ne(e){return Oe(e)&&st(e)}function Qw(e){return e===!0||e===!1||Oe(e)&&et(e)==Mt}var ba=h_||qs,ev=Mc?pt(Mc):oy;function tv(e){return Oe(e)&&e.nodeType===1&&!Ln(e)}function av(e){if(e==null)return!0;if(st(e)&&(re(e)||typeof e=="string"||typeof e.splice=="function"||ba(e)||nn(e)||La(e)))return!e.length;var t=Ye(e);if(t==Xe||t==qe)return!e.size;if(Tn(e))return!as(e).length;for(var n in e)if(Se.call(e,n))return!1;return!0}function nv(e,t){return kn(e,t)}function rv(e,t,n){n=typeof n=="function"?n:r;var s=n?n(e,t):r;return s===r?kn(e,t,r,n):!!s}function ks(e){if(!Oe(e))return!1;var t=et(e);return t==oa||t==dn||typeof e.message=="string"&&typeof e.name=="string"&&!Ln(e)}function iv(e){return typeof e=="number"&&ou(e)}function Qt(e){if(!$e(e))return!1;var t=et(e);return t==la||t==Ma||t==pn||t==_t}function Ep(e){return typeof e=="number"&&e==oe(e)}function jr(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=nt}function $e(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function Oe(e){return e!=null&&typeof e=="object"}var kp=Uc?pt(Uc):cy;function sv(e,t){return e===t||ts(e,t,ms(t))}function ov(e,t,n){return n=typeof n=="function"?n:r,ts(e,t,ms(t),n)}function lv(e){return Rp(e)&&e!=+e}function cv(e){if(Wy(e))throw new ne(h);return vu(e)}function uv(e){return e===null}function pv(e){return e==null}function Rp(e){return typeof e=="number"||Oe(e)&&et(e)==se}function Ln(e){if(!Oe(e)||et(e)!=ie)return!1;var t=_r(e);if(t===null)return!0;var n=Se.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&dr.call(n)==o_}var Rs=jc?pt(jc):uy;function dv(e){return Ep(e)&&e>=-nt&&e<=nt}var $p=Hc?pt(Hc):py;function Hr(e){return typeof e=="string"||!re(e)&&Oe(e)&&et(e)==je}function ht(e){return typeof e=="symbol"||Oe(e)&&et(e)==Le}var nn=Gc?pt(Gc):dy;function hv(e){return e===r}function fv(e){return Oe(e)&&Ye(e)==ct}function gv(e){return Oe(e)&&et(e)==Ua}var _v=Or(ns),yv=Or(function(e,t){return e<=t});function Tp(e){if(!e)return[];if(st(e))return Hr(e)?Rt(e):it(e);if(vn&&e[vn])return Yg(e[vn]());var t=Ye(e),n=t==Xe?Hi:t==qe?cr:rn;return n(e)}function ea(e){if(!e)return e===0?e:0;if(e=Pt(e),e===We||e===-We){var t=e<0?-1:1;return t*ln}return e===e?e:0}function oe(e){var t=ea(e),n=t%1;return t===t?n?t-n:t:0}function xp(e){return e?Ra(oe(e),0,xe):0}function Pt(e){if(typeof e=="number")return e;if(ht(e))return ia;if($e(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=$e(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Zc(e);var n=Si.test(e);return n||Pi.test(e)?xg(e.slice(2),n?2:8):bi.test(e)?ia:+e}function Lp(e){return zt(e,ot(e))}function mv(e){return e?Ra(oe(e),-nt,nt):e===0?e:0}function ve(e){return e==null?"":dt(e)}var wv=en(function(e,t){if(Tn(t)||st(t)){zt(t,Me(t),e);return}for(var n in t)Se.call(t,n)&&An(e,n,t[n])}),Op=en(function(e,t){zt(t,ot(t),e)}),Gr=en(function(e,t,n,s){zt(t,ot(t),e,s)}),vv=en(function(e,t,n,s){zt(t,Me(t),e,s)}),bv=Zt(Xi);function Sv(e,t){var n=Qa(e);return t==null?n:du(n,t)}var Cv=pe(function(e,t){e=Pe(e);var n=-1,s=t.length,l=s>2?t[2]:r;for(l&&tt(t[0],t[1],l)&&(s=1);++n<s;)for(var d=t[n],y=ot(d),C=-1,E=y.length;++C<E;){var L=y[C],O=e[L];(O===r||Tt(O,Xa[L])&&!Se.call(e,L))&&(e[L]=d[L])}return e}),Pv=pe(function(e){return e.push(r,Zu),ut(Dp,r,e)});function Av(e,t){return Kc(e,Z(t,3),Nt)}function Iv(e,t){return Kc(e,Z(t,3),Ji)}function Ev(e,t){return e==null?e:Zi(e,Z(t,3),ot)}function kv(e,t){return e==null?e:yu(e,Z(t,3),ot)}function Rv(e,t){return e&&Nt(e,Z(t,3))}function $v(e,t){return e&&Ji(e,Z(t,3))}function Tv(e){return e==null?[]:Ir(e,Me(e))}function xv(e){return e==null?[]:Ir(e,ot(e))}function $s(e,t,n){var s=e==null?r:$a(e,t);return s===r?n:s}function Lv(e,t){return e!=null&&ep(e,t,ay)}function Ts(e,t){return e!=null&&ep(e,t,ny)}var Ov=Wu(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=hr.call(t)),e[t]=n},Ls(lt)),Dv=Wu(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=hr.call(t)),Se.call(e,t)?e[t].push(n):e[t]=[n]},Z),Nv=pe(En);function Me(e){return st(e)?uu(e):as(e)}function ot(e){return st(e)?uu(e,!0):hy(e)}function zv(e,t){var n={};return t=Z(t,3),Nt(e,function(s,l,d){Yt(n,t(s,l,d),s)}),n}function qv(e,t){var n={};return t=Z(t,3),Nt(e,function(s,l,d){Yt(n,l,t(s,l,d))}),n}var Fv=en(function(e,t,n){Er(e,t,n)}),Dp=en(function(e,t,n,s){Er(e,t,n,s)}),Bv=Zt(function(e,t){var n={};if(e==null)return n;var s=!1;t=ke(t,function(d){return d=wa(d,e),s||(s=d.length>1),d}),zt(e,_s(e),n),s&&(n=bt(n,b|R|U,Oy));for(var l=t.length;l--;)ls(n,t[l]);return n});function Mv(e,t){return Np(e,Ur(Z(t)))}var Uv=Zt(function(e,t){return e==null?{}:gy(e,t)});function Np(e,t){if(e==null)return{};var n=ke(_s(e),function(s){return[s]});return t=Z(t),Eu(e,n,function(s,l){return t(s,l[0])})}function jv(e,t,n){t=wa(t,e);var s=-1,l=t.length;for(l||(l=1,e=r);++s<l;){var d=e==null?r:e[qt(t[s])];d===r&&(s=l,d=n),e=Qt(d)?d.call(e):d}return e}function Hv(e,t,n){return e==null?e:Rn(e,t,n)}function Gv(e,t,n,s){return s=typeof s=="function"?s:r,e==null?e:Rn(e,t,n,s)}var zp=Yu(Me),qp=Yu(ot);function Wv(e,t,n){var s=re(e),l=s||ba(e)||nn(e);if(t=Z(t,4),n==null){var d=e&&e.constructor;l?n=s?new d:[]:$e(e)?n=Qt(d)?Qa(_r(e)):{}:n={}}return(l?mt:Nt)(e,function(y,C,E){return t(n,y,C,E)}),n}function Kv(e,t){return e==null?!0:ls(e,t)}function Vv(e,t,n){return e==null?e:xu(e,t,ps(n))}function Yv(e,t,n,s){return s=typeof s=="function"?s:r,e==null?e:xu(e,t,ps(n),s)}function rn(e){return e==null?[]:ji(e,Me(e))}function Xv(e){return e==null?[]:ji(e,ot(e))}function Zv(e,t,n){return n===r&&(n=t,t=r),n!==r&&(n=Pt(n),n=n===n?n:0),t!==r&&(t=Pt(t),t=t===t?t:0),Ra(Pt(e),t,n)}function Jv(e,t,n){return t=ea(t),n===r?(n=t,t=0):n=ea(n),e=Pt(e),ry(e,t,n)}function Qv(e,t,n){if(n&&typeof n!="boolean"&&tt(e,t,n)&&(t=n=r),n===r&&(typeof t=="boolean"?(n=t,t=r):typeof e=="boolean"&&(n=e,e=r)),e===r&&t===r?(e=0,t=1):(e=ea(e),t===r?(t=e,e=0):t=ea(t)),e>t){var s=e;e=t,t=s}if(n||e%1||t%1){var l=lu();return Ve(e+l*(t-e+Tg("1e-"+((l+"").length-1))),t)}return is(e,t)}var eb=tn(function(e,t,n){return t=t.toLowerCase(),e+(n?Fp(t):t)});function Fp(e){return xs(ve(e).toLowerCase())}function Bp(e){return e=ve(e),e&&e.replace(Ii,Hg).replace(bg,"")}function tb(e,t,n){e=ve(e),t=dt(t);var s=e.length;n=n===r?s:Ra(oe(n),0,s);var l=n;return n-=t.length,n>=0&&e.slice(n,l)==t}function ab(e){return e=ve(e),e&&oi.test(e)?e.replace(Xn,Gg):e}function nb(e){return e=ve(e),e&&hi.test(e)?e.replace(gn,"\\$&"):e}var rb=tn(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),ib=tn(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),sb=ju("toLowerCase");function ob(e,t,n){e=ve(e),t=oe(t);var s=t?Va(e):0;if(!t||s>=t)return e;var l=(t-s)/2;return Lr(vr(l),n)+e+Lr(wr(l),n)}function lb(e,t,n){e=ve(e),t=oe(t);var s=t?Va(e):0;return t&&s<t?e+Lr(t-s,n):e}function cb(e,t,n){e=ve(e),t=oe(t);var s=t?Va(e):0;return t&&s<t?Lr(t-s,n)+e:e}function ub(e,t,n){return n||t==null?t=0:t&&(t=+t),y_(ve(e).replace(_n,""),t||0)}function pb(e,t,n){return(n?tt(e,t,n):t===r)?t=1:t=oe(t),ss(ve(e),t)}function db(){var e=arguments,t=ve(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var hb=tn(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});function fb(e,t,n){return n&&typeof n!="number"&&tt(e,t,n)&&(t=n=r),n=n===r?xe:n>>>0,n?(e=ve(e),e&&(typeof t=="string"||t!=null&&!Rs(t))&&(t=dt(t),!t&&Ka(e))?va(Rt(e),0,n):e.split(t,n)):[]}var gb=tn(function(e,t,n){return e+(n?" ":"")+xs(t)});function _b(e,t,n){return e=ve(e),n=n==null?0:Ra(oe(n),0,e.length),t=dt(t),e.slice(n,n+t.length)==t}function yb(e,t,n){var s=u.templateSettings;n&&tt(e,t,n)&&(t=r),e=ve(e),t=Gr({},t,s,Xu);var l=Gr({},t.imports,s.imports,Xu),d=Me(l),y=ji(l,d),C,E,L=0,O=t.interpolate||ja,D="__p += '",j=Gi((t.escape||ja).source+"|"+O.source+"|"+(O===Jn?vi:ja).source+"|"+(t.evaluate||ja).source+"|$","g"),V="//# sourceURL="+(Se.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ig+"]")+`
`;e.replace(j,function(Q,de,ge,ft,at,gt){return ge||(ge=ft),D+=e.slice(L,gt).replace(tr,Wg),de&&(C=!0,D+=`' +
__e(`+de+`) +
'`),at&&(E=!0,D+=`';
`+at+`;
__p += '`),ge&&(D+=`' +
((__t = (`+ge+`)) == null ? '' : __t) +
'`),L=gt+Q.length,Q}),D+=`';
`;var J=Se.call(t,"variable")&&t.variable;if(!J)D=`with (obj) {
`+D+`
}
`;else if(mi.test(J))throw new ne(g);D=(E?D.replace(Vn,""):D).replace(si,"$1").replace(Ot,"$1;"),D="function("+(J||"obj")+`) {
`+(J?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(C?", __e = _.escape":"")+(E?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+D+`return __p
}`;var ce=Up(function(){return me(d,V+"return "+D).apply(r,y)});if(ce.source=D,ks(ce))throw ce;return ce}function mb(e){return ve(e).toLowerCase()}function wb(e){return ve(e).toUpperCase()}function vb(e,t,n){if(e=ve(e),e&&(n||t===r))return Zc(e);if(!e||!(t=dt(t)))return e;var s=Rt(e),l=Rt(t),d=Jc(s,l),y=Qc(s,l)+1;return va(s,d,y).join("")}function bb(e,t,n){if(e=ve(e),e&&(n||t===r))return e.slice(0,tu(e)+1);if(!e||!(t=dt(t)))return e;var s=Rt(e),l=Qc(s,Rt(t))+1;return va(s,0,l).join("")}function Sb(e,t,n){if(e=ve(e),e&&(n||t===r))return e.replace(_n,"");if(!e||!(t=dt(t)))return e;var s=Rt(e),l=Jc(s,Rt(t));return va(s,l).join("")}function Cb(e,t){var n=De,s=te;if($e(t)){var l="separator"in t?t.separator:l;n="length"in t?oe(t.length):n,s="omission"in t?dt(t.omission):s}e=ve(e);var d=e.length;if(Ka(e)){var y=Rt(e);d=y.length}if(n>=d)return e;var C=n-Va(s);if(C<1)return s;var E=y?va(y,0,C).join(""):e.slice(0,C);if(l===r)return E+s;if(y&&(C+=E.length-C),Rs(l)){if(e.slice(C).search(l)){var L,O=E;for(l.global||(l=Gi(l.source,ve(er.exec(l))+"g")),l.lastIndex=0;L=l.exec(O);)var D=L.index;E=E.slice(0,D===r?C:D)}}else if(e.indexOf(dt(l),C)!=C){var j=E.lastIndexOf(l);j>-1&&(E=E.slice(0,j))}return E+s}function Pb(e){return e=ve(e),e&&Zn.test(e)?e.replace(Yn,Qg):e}var Ab=tn(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),xs=ju("toUpperCase");function Mp(e,t,n){return e=ve(e),t=n?r:t,t===r?Vg(e)?a_(e):Fg(e):e.match(t)||[]}var Up=pe(function(e,t){try{return ut(e,r,t)}catch(n){return ks(n)?n:new ne(n)}}),Ib=Zt(function(e,t){return mt(t,function(n){n=qt(n),Yt(e,n,Is(e[n],e))}),e});function Eb(e){var t=e==null?0:e.length,n=Z();return e=t?ke(e,function(s){if(typeof s[1]!="function")throw new wt(_);return[n(s[0]),s[1]]}):[],pe(function(s){for(var l=-1;++l<t;){var d=e[l];if(ut(d[0],this,s))return ut(d[1],this,s)}})}function kb(e){return Q_(bt(e,b))}function Ls(e){return function(){return e}}function Rb(e,t){return e==null||e!==e?t:e}var $b=Gu(),Tb=Gu(!0);function lt(e){return e}function Os(e){return bu(typeof e=="function"?e:bt(e,b))}function xb(e){return Cu(bt(e,b))}function Lb(e,t){return Pu(e,bt(t,b))}var Ob=pe(function(e,t){return function(n){return En(n,e,t)}}),Db=pe(function(e,t){return function(n){return En(e,n,t)}});function Ds(e,t,n){var s=Me(t),l=Ir(t,s);n==null&&!($e(t)&&(l.length||!s.length))&&(n=t,t=e,e=this,l=Ir(t,Me(t)));var d=!($e(n)&&"chain"in n)||!!n.chain,y=Qt(e);return mt(l,function(C){var E=t[C];e[C]=E,y&&(e.prototype[C]=function(){var L=this.__chain__;if(d||L){var O=e(this.__wrapped__),D=O.__actions__=it(this.__actions__);return D.push({func:E,args:arguments,thisArg:e}),O.__chain__=L,O}return E.apply(e,fa([this.value()],arguments))})}),e}function Nb(){return He._===this&&(He._=l_),this}function Ns(){}function zb(e){return e=oe(e),pe(function(t){return Au(t,e)})}var qb=hs(ke),Fb=hs(Wc),Bb=hs(qi);function jp(e){return vs(e)?Fi(qt(e)):_y(e)}function Mb(e){return function(t){return e==null?r:$a(e,t)}}var Ub=Ku(),jb=Ku(!0);function zs(){return[]}function qs(){return!1}function Hb(){return{}}function Gb(){return""}function Wb(){return!0}function Kb(e,t){if(e=oe(e),e<1||e>nt)return[];var n=xe,s=Ve(e,xe);t=Z(t),e-=xe;for(var l=Ui(s,t);++n<e;)t(n);return l}function Vb(e){return re(e)?ke(e,qt):ht(e)?[e]:it(cp(ve(e)))}function Yb(e){var t=++s_;return ve(e)+t}var Xb=xr(function(e,t){return e+t},0),Zb=fs("ceil"),Jb=xr(function(e,t){return e/t},1),Qb=fs("floor");function eS(e){return e&&e.length?Ar(e,lt,Qi):r}function tS(e,t){return e&&e.length?Ar(e,Z(t,2),Qi):r}function aS(e){return Yc(e,lt)}function nS(e,t){return Yc(e,Z(t,2))}function rS(e){return e&&e.length?Ar(e,lt,ns):r}function iS(e,t){return e&&e.length?Ar(e,Z(t,2),ns):r}var sS=xr(function(e,t){return e*t},1),oS=fs("round"),lS=xr(function(e,t){return e-t},0);function cS(e){return e&&e.length?Mi(e,lt):0}function uS(e,t){return e&&e.length?Mi(e,Z(t,2)):0}return u.after=xw,u.ary=vp,u.assign=wv,u.assignIn=Op,u.assignInWith=Gr,u.assignWith=vv,u.at=bv,u.before=bp,u.bind=Is,u.bindAll=Ib,u.bindKey=Sp,u.castArray=Hw,u.chain=yp,u.chunk=Qy,u.compact=em,u.concat=tm,u.cond=Eb,u.conforms=kb,u.constant=Ls,u.countBy=cw,u.create=Sv,u.curry=Cp,u.curryRight=Pp,u.debounce=Ap,u.defaults=Cv,u.defaultsDeep=Pv,u.defer=Lw,u.delay=Ow,u.difference=am,u.differenceBy=nm,u.differenceWith=rm,u.drop=im,u.dropRight=sm,u.dropRightWhile=om,u.dropWhile=lm,u.fill=cm,u.filter=pw,u.flatMap=fw,u.flatMapDeep=gw,u.flatMapDepth=_w,u.flatten=hp,u.flattenDeep=um,u.flattenDepth=pm,u.flip=Dw,u.flow=$b,u.flowRight=Tb,u.fromPairs=dm,u.functions=Tv,u.functionsIn=xv,u.groupBy=yw,u.initial=fm,u.intersection=gm,u.intersectionBy=_m,u.intersectionWith=ym,u.invert=Ov,u.invertBy=Dv,u.invokeMap=ww,u.iteratee=Os,u.keyBy=vw,u.keys=Me,u.keysIn=ot,u.map=Fr,u.mapKeys=zv,u.mapValues=qv,u.matches=xb,u.matchesProperty=Lb,u.memoize=Mr,u.merge=Fv,u.mergeWith=Dp,u.method=Ob,u.methodOf=Db,u.mixin=Ds,u.negate=Ur,u.nthArg=zb,u.omit=Bv,u.omitBy=Mv,u.once=Nw,u.orderBy=bw,u.over=qb,u.overArgs=zw,u.overEvery=Fb,u.overSome=Bb,u.partial=Es,u.partialRight=Ip,u.partition=Sw,u.pick=Uv,u.pickBy=Np,u.property=jp,u.propertyOf=Mb,u.pull=bm,u.pullAll=gp,u.pullAllBy=Sm,u.pullAllWith=Cm,u.pullAt=Pm,u.range=Ub,u.rangeRight=jb,u.rearg=qw,u.reject=Aw,u.remove=Am,u.rest=Fw,u.reverse=Ps,u.sampleSize=Ew,u.set=Hv,u.setWith=Gv,u.shuffle=kw,u.slice=Im,u.sortBy=Tw,u.sortedUniq=Lm,u.sortedUniqBy=Om,u.split=fb,u.spread=Bw,u.tail=Dm,u.take=Nm,u.takeRight=zm,u.takeRightWhile=qm,u.takeWhile=Fm,u.tap=ew,u.throttle=Mw,u.thru=qr,u.toArray=Tp,u.toPairs=zp,u.toPairsIn=qp,u.toPath=Vb,u.toPlainObject=Lp,u.transform=Wv,u.unary=Uw,u.union=Bm,u.unionBy=Mm,u.unionWith=Um,u.uniq=jm,u.uniqBy=Hm,u.uniqWith=Gm,u.unset=Kv,u.unzip=As,u.unzipWith=_p,u.update=Vv,u.updateWith=Yv,u.values=rn,u.valuesIn=Xv,u.without=Wm,u.words=Mp,u.wrap=jw,u.xor=Km,u.xorBy=Vm,u.xorWith=Ym,u.zip=Xm,u.zipObject=Zm,u.zipObjectDeep=Jm,u.zipWith=Qm,u.entries=zp,u.entriesIn=qp,u.extend=Op,u.extendWith=Gr,Ds(u,u),u.add=Xb,u.attempt=Up,u.camelCase=eb,u.capitalize=Fp,u.ceil=Zb,u.clamp=Zv,u.clone=Gw,u.cloneDeep=Kw,u.cloneDeepWith=Vw,u.cloneWith=Ww,u.conformsTo=Yw,u.deburr=Bp,u.defaultTo=Rb,u.divide=Jb,u.endsWith=tb,u.eq=Tt,u.escape=ab,u.escapeRegExp=nb,u.every=uw,u.find=dw,u.findIndex=pp,u.findKey=Av,u.findLast=hw,u.findLastIndex=dp,u.findLastKey=Iv,u.floor=Qb,u.forEach=mp,u.forEachRight=wp,u.forIn=Ev,u.forInRight=kv,u.forOwn=Rv,u.forOwnRight=$v,u.get=$s,u.gt=Xw,u.gte=Zw,u.has=Lv,u.hasIn=Ts,u.head=fp,u.identity=lt,u.includes=mw,u.indexOf=hm,u.inRange=Jv,u.invoke=Nv,u.isArguments=La,u.isArray=re,u.isArrayBuffer=Jw,u.isArrayLike=st,u.isArrayLikeObject=Ne,u.isBoolean=Qw,u.isBuffer=ba,u.isDate=ev,u.isElement=tv,u.isEmpty=av,u.isEqual=nv,u.isEqualWith=rv,u.isError=ks,u.isFinite=iv,u.isFunction=Qt,u.isInteger=Ep,u.isLength=jr,u.isMap=kp,u.isMatch=sv,u.isMatchWith=ov,u.isNaN=lv,u.isNative=cv,u.isNil=pv,u.isNull=uv,u.isNumber=Rp,u.isObject=$e,u.isObjectLike=Oe,u.isPlainObject=Ln,u.isRegExp=Rs,u.isSafeInteger=dv,u.isSet=$p,u.isString=Hr,u.isSymbol=ht,u.isTypedArray=nn,u.isUndefined=hv,u.isWeakMap=fv,u.isWeakSet=gv,u.join=mm,u.kebabCase=rb,u.last=Ct,u.lastIndexOf=wm,u.lowerCase=ib,u.lowerFirst=sb,u.lt=_v,u.lte=yv,u.max=eS,u.maxBy=tS,u.mean=aS,u.meanBy=nS,u.min=rS,u.minBy=iS,u.stubArray=zs,u.stubFalse=qs,u.stubObject=Hb,u.stubString=Gb,u.stubTrue=Wb,u.multiply=sS,u.nth=vm,u.noConflict=Nb,u.noop=Ns,u.now=Br,u.pad=ob,u.padEnd=lb,u.padStart=cb,u.parseInt=ub,u.random=Qv,u.reduce=Cw,u.reduceRight=Pw,u.repeat=pb,u.replace=db,u.result=jv,u.round=oS,u.runInContext=I,u.sample=Iw,u.size=Rw,u.snakeCase=hb,u.some=$w,u.sortedIndex=Em,u.sortedIndexBy=km,u.sortedIndexOf=Rm,u.sortedLastIndex=$m,u.sortedLastIndexBy=Tm,u.sortedLastIndexOf=xm,u.startCase=gb,u.startsWith=_b,u.subtract=lS,u.sum=cS,u.sumBy=uS,u.template=yb,u.times=Kb,u.toFinite=ea,u.toInteger=oe,u.toLength=xp,u.toLower=mb,u.toNumber=Pt,u.toSafeInteger=mv,u.toString=ve,u.toUpper=wb,u.trim=vb,u.trimEnd=bb,u.trimStart=Sb,u.truncate=Cb,u.unescape=Pb,u.uniqueId=Yb,u.upperCase=Ab,u.upperFirst=xs,u.each=mp,u.eachRight=wp,u.first=fp,Ds(u,function(){var e={};return Nt(u,function(t,n){Se.call(u.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),u.VERSION=o,mt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){u[e].placeholder=u}),mt(["drop","take"],function(e,t){he.prototype[e]=function(n){n=n===r?1:Be(oe(n),0);var s=this.__filtered__&&!t?new he(this):this.clone();return s.__filtered__?s.__takeCount__=Ve(n,s.__takeCount__):s.__views__.push({size:Ve(n,xe),type:e+(s.__dir__<0?"Right":"")}),s},he.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}}),mt(["filter","map","takeWhile"],function(e,t){var n=t+1,s=n==It||n==Sa;he.prototype[e]=function(l){var d=this.clone();return d.__iteratees__.push({iteratee:Z(l,3),type:n}),d.__filtered__=d.__filtered__||s,d}}),mt(["head","last"],function(e,t){var n="take"+(t?"Right":"");he.prototype[e]=function(){return this[n](1).value()[0]}}),mt(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");he.prototype[e]=function(){return this.__filtered__?new he(this):this[n](1)}}),he.prototype.compact=function(){return this.filter(lt)},he.prototype.find=function(e){return this.filter(e).head()},he.prototype.findLast=function(e){return this.reverse().find(e)},he.prototype.invokeMap=pe(function(e,t){return typeof e=="function"?new he(this):this.map(function(n){return En(n,e,t)})}),he.prototype.reject=function(e){return this.filter(Ur(Z(e)))},he.prototype.slice=function(e,t){e=oe(e);var n=this;return n.__filtered__&&(e>0||t<0)?new he(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==r&&(t=oe(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},he.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},he.prototype.toArray=function(){return this.take(xe)},Nt(he.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),s=/^(?:head|last)$/.test(t),l=u[s?"take"+(t=="last"?"Right":""):t],d=s||/^find/.test(t);l&&(u.prototype[t]=function(){var y=this.__wrapped__,C=s?[1]:arguments,E=y instanceof he,L=C[0],O=E||re(y),D=function(de){var ge=l.apply(u,fa([de],C));return s&&j?ge[0]:ge};O&&n&&typeof L=="function"&&L.length!=1&&(E=O=!1);var j=this.__chain__,V=!!this.__actions__.length,J=d&&!j,ce=E&&!V;if(!d&&O){y=ce?y:new he(this);var Q=e.apply(y,C);return Q.__actions__.push({func:qr,args:[D],thisArg:r}),new vt(Q,j)}return J&&ce?e.apply(this,C):(Q=this.thru(D),J?s?Q.value()[0]:Q.value():Q)})}),mt(["pop","push","shift","sort","splice","unshift"],function(e){var t=ur[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",s=/^(?:pop|shift)$/.test(e);u.prototype[e]=function(){var l=arguments;if(s&&!this.__chain__){var d=this.value();return t.apply(re(d)?d:[],l)}return this[n](function(y){return t.apply(re(y)?y:[],l)})}}),Nt(he.prototype,function(e,t){var n=u[t];if(n){var s=n.name+"";Se.call(Ja,s)||(Ja[s]=[]),Ja[s].push({name:t,func:n})}}),Ja[Tr(r,ae).name]=[{name:"wrapper",func:r}],he.prototype.clone=P_,he.prototype.reverse=A_,he.prototype.value=I_,u.prototype.at=tw,u.prototype.chain=aw,u.prototype.commit=nw,u.prototype.next=rw,u.prototype.plant=sw,u.prototype.reverse=ow,u.prototype.toJSON=u.prototype.valueOf=u.prototype.value=lw,u.prototype.first=u.prototype.head,vn&&(u.prototype[vn]=iw),u},Ya=n_();Aa?((Aa.exports=Ya)._=Ya,Oi._=Ya):He._=Ya}).call(pP)}(Un,Un.exports)),Un.exports}var Wr=dP();const hP=()=>({name:"handle-error",serialize:()=>{},deserialize:({value:a})=>{if(Kn("__MissingPrivilegesError__",a))return new Fa(a.__messageType__,a.__data__)}}),fP=[rP,cP,lP,uC,uP,hP];function ig(a){const i=fP.map(g=>g(a));function r(){return i}function o(g){var w;return(w=i.find(S=>S.name===g))!==null&&w!==void 0?w:null}function c(g,w=new Map,S="root"){return Wr.cloneDeepWith(g,(m,b,R,U)=>{let Y=S+"."+b;if(lC(m))return m;if(w.has(m))return{__$CR__:w.get(m)};w.set(m,Y);for(const N of i){const G=N.serialize({value:m,key:b,object:R,stack:U,customizerMethod:c,seen:w,path:Y});if(G)return G}})}function h(g,w){const S=_(g,w);return Ec(S,(m,b,R,U)=>{if(b!=="__$CR__")return;const Y=ah(R),N=ah(U);Wr.set(S,N,Wr.get(S,Y))}),S}function _(g,w){return Wr.cloneDeepWith(g,(S,m,b,R)=>{for(const U of i){const Y=U.deserialize({value:S,key:m,object:b,stack:R,event:w,customizerMethod:_});if(Y)return Y}})}return{getSerializers:r,getSerializerByName:o,serialize:c,deserialize:h}}function gP(a,i){if(typeof i=="string")return new Mn(i);if(!(i instanceof Error))return new Mn("An unknown error occurred.");if(oC(i,"response.data.errors.0.code")&&i.response.data.errors.length){const r=i.response.data.errors.filter(c=>c.code==="FRAMEWORK__MISSING_PRIVILEGE_ERROR"),o=[];return r.forEach(c=>{const h=JSON.parse(c.detail);o.push(...h.missingPrivileges)}),o.length?new Fa(a,o):new Mn(i.response.data.errors[0].code,i.response.data.errors[0].status)}return new Mn(i.message)}function Sc({serializedData:a,origin:i,type:r,privilegesToCheck:o=[]}){if(i===void 0)return null;const c=Wf(i);if(!c)return console.warn(`No extension found for origin "${i}"`),null;const h=[];return Ec(a,(_,g,w)=>{if(g==="__type__"&&["__EntityCollection__","__Entity__"].includes(w)){const S=_.__entityName__;if(!S)return;[...o].sort().forEach(m=>{const b=c.permissions[m];(!b||!b.includes(S))&&!h.includes(`${m}:${S}`)&&!(b!=null&&b.includes("*"))&&h.push(`${m}:${S}`)})}}),h.length>0?new Fa(r,h):null}function _P(a,i,r="datasetSubscribe",o=""){if(!i)return a;const c={},h=Wf(o??""),_=[];return i.forEach(g=>{Cc(a,g,h,_,o,r,c)}),h?_.length?new Fa(r,_):c:(console.warn(`No extension found for origin "${o}"`),c)}function Cc(a,i,r,o,c,h,_={}){var g,w,S;const m=i.split(".");let b=_,R=a;for(let U=0;U<m.length;U++){const Y=/\[\d*\]/,N=m[U],G=m[U+1];if(G&&(G==="*"||G.match(Y))){if(!m[U+2]){Kr(R,r,o),Kr(R==null?void 0:R[N],r,o),b[N]=R==null?void 0:R[N];break}b[N]=(g=b[N])!==null&&g!==void 0?g:[],R=R==null?void 0:R[N],b=b[N];continue}if(Array.isArray(R)&&G){const ae=m.slice(U+1).join(".");if(N==="*"){for(let K=0;K<R.length;K++)Cc(R[K],ae,r,o,c,h,(w=b[K])!==null&&w!==void 0?w:b);break}if(N.match(Y)){const K=yP(N);Cc(R[K],ae,r,o,c,h,(S=b[K])!==null&&S!==void 0?S:b);break}}if(U===m.length-1){if(Kr(R,r,o),Kr(R==null?void 0:R[N],r,o),Array.isArray(b)){b.push({[N]:R==null?void 0:R[N]});break}b[N]=R==null?void 0:R[N];break}b[N]={},R=R==null?void 0:R[N],b=b[N]}return _}function Kr(a,i,r){if(!a)return;const o=["read"];let c="";a.__identifier__&&a.__identifier__()==="Entity"&&(c=a.getEntityName()),a.__identifier__&&a.__identifier__()==="EntityCollection"&&(c=a.entity),c&&o.forEach(h=>{var _;const g=(_=i==null?void 0:i.permissions)===null||_===void 0?void 0:_[h];(!g||!g.includes(c))&&!r.includes(`${h}:${c}`)&&!(g!=null&&g.includes("*"))&&r.push(`${h}:${c}`)})}function yP(a){return Number.parseInt(a.replace("[","").replace("]",""))}const mP="6.1.0",wP={version:mP},vP=wP.version;var sg=function(a,i,r,o){function c(h){return h instanceof r?h:new r(function(_){_(h)})}return new(r||(r=Promise))(function(h,_){function g(m){try{S(o.next(m))}catch(b){_(b)}}function w(m){try{S(o.throw(m))}catch(b){_(b)}}function S(m){m.done?h(m.value):c(m.value).then(g,w)}S((o=o.apply(a,i||[])).next())})};const bP=vP,{serialize:jn,deserialize:og}=ig({handle:Jr,send:Hn}),SP={},lg=new Set,cg=new Set;function Hn(a,i,r,o){const c=Gf();let g=jn({_type:a,_data:i??{},_callbackId:c});if(o){const b=Sc({serializedData:g,origin:o,privilegesToCheck:["read"],type:a});b&&(["datasetSubscribe","datasetUpdate","datasetRegistration","datasetGet"].includes(g._type)?g=jn({_type:g._type,_callbackId:g._callbackId,_data:{id:g._data.id,data:b}}):g=jn({_type:g._type,_callbackId:g._callbackId,_data:b}))}const w=JSON.stringify(g);let S=!1;const m=7e3;return new Promise((b,R)=>{const U=function(G){if(typeof G.data!="string"||G.data.indexOf(`"_callbackId":"${c}"`)===-1)return;let ae;try{ae=JSON.parse(G.data)}catch{return}if(!PP(ae)||!ae.hasOwnProperty("_response"))return;const K=og(ae,G);if(window.removeEventListener("message",U),!S){S=!0;const we=K._response;if(we instanceof Error){R(we);return}b(we)}};window.addEventListener("message",U);let Y=!0;try{Y=!window.parent.origin}catch{}let N=Y?document.referrer:window.parent.origin;o&&(N=o),r?r.postMessage(w,N):window.parent.postMessage(w,N),setTimeout(()=>{S||R("Send timeout expired. It could be possible that no handler for the postMessage request exists or that the handler freezed.")},m)})}function Jr(a,i){const r=function(o){var c;return sg(this,void 0,void 0,function*(){if(typeof o.data!="string"||o.data.indexOf(`"_type":"${a}"`)===-1)return;let h;try{h=JSON.parse(o.data)}catch{return}if(!CP(h))return;const _=og(h,o),g=yield Promise.resolve((()=>{if(!["datasetSubscribe","datasetGet","datasetUpdate","_collectionTest"].includes(a))return i(_._data,{_event_:o});const R=Sc({serializedData:h,origin:o.origin,type:a,privilegesToCheck:["create","delete","update","read"]});return R||i(_._data,{_event_:o})})()).catch(b=>gP(a,b)),w={_callbackId:_._callbackId,_type:_._type,_response:g??null},S=(()=>{let b=jn(w);if(!["datasetSubscribe","datasetGet","_collectionTest"].includes(a))return b;const U=Sc({serializedData:b,origin:o.origin,privilegesToCheck:["read"],type:a});return U&&(b._response=U,b=jn(b)),b})(),m=JSON.stringify(S);o.source?o.source.postMessage(m,{targetOrigin:(c=o.origin)!==null&&c!==void 0?c:"*"}):window.postMessage(m,window.origin)})};return window.addEventListener("message",r),()=>window.removeEventListener("message",r)}function ug(a,i){return r=>Hn(a,Object.assign(Object.assign({},i),r))}const pg=new Map;sg(void 0,void 0,void 0,function*(){Jr("__registerWindow__",({sdkVersion:a},i)=>{let r,o;i._event_.source?(r=i._event_.source,o=i._event_.origin):(r=window,o=window.origin),lg.add({source:r,origin:o,sdkVersion:a})}),Jr("datasetSubscribeRegistration",(a,{_event_:i})=>{let r,o;i.source?(r=i.source,o=i.origin):(r=window,o=window.origin),cg.add({id:a.id,source:r,origin:o,selectors:a.selectors});const c=pg.get(a.id);if(c){const h=_P(c,a.selectors,"datasetSubscribe",o);if(h instanceof Fa){console.error(h);return}Hn("datasetSubscribe",{id:a.id,data:h,selectors:a.selectors},r,o)}}),yield Hn("__registerWindow__",{sdkVersion:bP})}).catch(a=>console.error(a));window._swsdk={sourceRegistry:lg,subscriberRegistry:cg,datasets:pg,adminExtensions:SP};function CP(a){const i=a;return!!i._type&&!!i._data&&!!i._callbackId}function PP(a){const i=a;return!!i._type&&!!i.hasOwnProperty("_response")&&!!i._callbackId}var Xl,_f;function dg(){if(_f)return Xl;_f=1;var a={};return Xl=typeof process=="object"&&a&&a.NODE_DEBUG&&/\bsemver\b/i.test(a.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{},Xl}var Zl,yf;function hg(){if(yf)return Zl;yf=1;const a="2.0.0",i=256,r=Number.MAX_SAFE_INTEGER||9007199254740991,o=16,c=i-6;return Zl={MAX_LENGTH:i,MAX_SAFE_COMPONENT_LENGTH:o,MAX_SAFE_BUILD_LENGTH:c,MAX_SAFE_INTEGER:r,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:a,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},Zl}var Vr={exports:{}},mf;function AP(){return mf||(mf=1,function(a,i){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:o,MAX_LENGTH:c}=hg(),h=dg();i=a.exports={};const _=i.re=[],g=i.safeRe=[],w=i.src=[],S=i.safeSrc=[],m=i.t={};let b=0;const R="[a-zA-Z0-9-]",U=[["\\s",1],["\\d",c],[R,o]],Y=G=>{for(const[ae,K]of U)G=G.split(`${ae}*`).join(`${ae}{0,${K}}`).split(`${ae}+`).join(`${ae}{1,${K}}`);return G},N=(G,ae,K)=>{const we=Y(ae),be=b++;h(G,be,ae),m[G]=be,w[be]=ae,S[be]=we,_[be]=new RegExp(ae,K?"g":void 0),g[be]=new RegExp(we,K?"g":void 0)};N("NUMERICIDENTIFIER","0|[1-9]\\d*"),N("NUMERICIDENTIFIERLOOSE","\\d+"),N("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${R}*`),N("MAINVERSION",`(${w[m.NUMERICIDENTIFIER]})\\.(${w[m.NUMERICIDENTIFIER]})\\.(${w[m.NUMERICIDENTIFIER]})`),N("MAINVERSIONLOOSE",`(${w[m.NUMERICIDENTIFIERLOOSE]})\\.(${w[m.NUMERICIDENTIFIERLOOSE]})\\.(${w[m.NUMERICIDENTIFIERLOOSE]})`),N("PRERELEASEIDENTIFIER",`(?:${w[m.NONNUMERICIDENTIFIER]}|${w[m.NUMERICIDENTIFIER]})`),N("PRERELEASEIDENTIFIERLOOSE",`(?:${w[m.NONNUMERICIDENTIFIER]}|${w[m.NUMERICIDENTIFIERLOOSE]})`),N("PRERELEASE",`(?:-(${w[m.PRERELEASEIDENTIFIER]}(?:\\.${w[m.PRERELEASEIDENTIFIER]})*))`),N("PRERELEASELOOSE",`(?:-?(${w[m.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${w[m.PRERELEASEIDENTIFIERLOOSE]})*))`),N("BUILDIDENTIFIER",`${R}+`),N("BUILD",`(?:\\+(${w[m.BUILDIDENTIFIER]}(?:\\.${w[m.BUILDIDENTIFIER]})*))`),N("FULLPLAIN",`v?${w[m.MAINVERSION]}${w[m.PRERELEASE]}?${w[m.BUILD]}?`),N("FULL",`^${w[m.FULLPLAIN]}$`),N("LOOSEPLAIN",`[v=\\s]*${w[m.MAINVERSIONLOOSE]}${w[m.PRERELEASELOOSE]}?${w[m.BUILD]}?`),N("LOOSE",`^${w[m.LOOSEPLAIN]}$`),N("GTLT","((?:<|>)?=?)"),N("XRANGEIDENTIFIERLOOSE",`${w[m.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),N("XRANGEIDENTIFIER",`${w[m.NUMERICIDENTIFIER]}|x|X|\\*`),N("XRANGEPLAIN",`[v=\\s]*(${w[m.XRANGEIDENTIFIER]})(?:\\.(${w[m.XRANGEIDENTIFIER]})(?:\\.(${w[m.XRANGEIDENTIFIER]})(?:${w[m.PRERELEASE]})?${w[m.BUILD]}?)?)?`),N("XRANGEPLAINLOOSE",`[v=\\s]*(${w[m.XRANGEIDENTIFIERLOOSE]})(?:\\.(${w[m.XRANGEIDENTIFIERLOOSE]})(?:\\.(${w[m.XRANGEIDENTIFIERLOOSE]})(?:${w[m.PRERELEASELOOSE]})?${w[m.BUILD]}?)?)?`),N("XRANGE",`^${w[m.GTLT]}\\s*${w[m.XRANGEPLAIN]}$`),N("XRANGELOOSE",`^${w[m.GTLT]}\\s*${w[m.XRANGEPLAINLOOSE]}$`),N("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),N("COERCE",`${w[m.COERCEPLAIN]}(?:$|[^\\d])`),N("COERCEFULL",w[m.COERCEPLAIN]+`(?:${w[m.PRERELEASE]})?(?:${w[m.BUILD]})?(?:$|[^\\d])`),N("COERCERTL",w[m.COERCE],!0),N("COERCERTLFULL",w[m.COERCEFULL],!0),N("LONETILDE","(?:~>?)"),N("TILDETRIM",`(\\s*)${w[m.LONETILDE]}\\s+`,!0),i.tildeTrimReplace="$1~",N("TILDE",`^${w[m.LONETILDE]}${w[m.XRANGEPLAIN]}$`),N("TILDELOOSE",`^${w[m.LONETILDE]}${w[m.XRANGEPLAINLOOSE]}$`),N("LONECARET","(?:\\^)"),N("CARETTRIM",`(\\s*)${w[m.LONECARET]}\\s+`,!0),i.caretTrimReplace="$1^",N("CARET",`^${w[m.LONECARET]}${w[m.XRANGEPLAIN]}$`),N("CARETLOOSE",`^${w[m.LONECARET]}${w[m.XRANGEPLAINLOOSE]}$`),N("COMPARATORLOOSE",`^${w[m.GTLT]}\\s*(${w[m.LOOSEPLAIN]})$|^$`),N("COMPARATOR",`^${w[m.GTLT]}\\s*(${w[m.FULLPLAIN]})$|^$`),N("COMPARATORTRIM",`(\\s*)${w[m.GTLT]}\\s*(${w[m.LOOSEPLAIN]}|${w[m.XRANGEPLAIN]})`,!0),i.comparatorTrimReplace="$1$2$3",N("HYPHENRANGE",`^\\s*(${w[m.XRANGEPLAIN]})\\s+-\\s+(${w[m.XRANGEPLAIN]})\\s*$`),N("HYPHENRANGELOOSE",`^\\s*(${w[m.XRANGEPLAINLOOSE]})\\s+-\\s+(${w[m.XRANGEPLAINLOOSE]})\\s*$`),N("STAR","(<|>)?=?\\s*\\*"),N("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),N("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(Vr,Vr.exports)),Vr.exports}var Jl,wf;function IP(){if(wf)return Jl;wf=1;const a=Object.freeze({loose:!0}),i=Object.freeze({});return Jl=o=>o?typeof o!="object"?a:o:i,Jl}var Ql,vf;function EP(){if(vf)return Ql;vf=1;const a=/^[0-9]+$/,i=(o,c)=>{const h=a.test(o),_=a.test(c);return h&&_&&(o=+o,c=+c),o===c?0:h&&!_?-1:_&&!h?1:o<c?-1:1};return Ql={compareIdentifiers:i,rcompareIdentifiers:(o,c)=>i(c,o)},Ql}var ec,bf;function fg(){if(bf)return ec;bf=1;const a=dg(),{MAX_LENGTH:i,MAX_SAFE_INTEGER:r}=hg(),{safeRe:o,t:c}=AP(),h=IP(),{compareIdentifiers:_}=EP();class g{constructor(S,m){if(m=h(m),S instanceof g){if(S.loose===!!m.loose&&S.includePrerelease===!!m.includePrerelease)return S;S=S.version}else if(typeof S!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof S}".`);if(S.length>i)throw new TypeError(`version is longer than ${i} characters`);a("SemVer",S,m),this.options=m,this.loose=!!m.loose,this.includePrerelease=!!m.includePrerelease;const b=S.trim().match(m.loose?o[c.LOOSE]:o[c.FULL]);if(!b)throw new TypeError(`Invalid Version: ${S}`);if(this.raw=S,this.major=+b[1],this.minor=+b[2],this.patch=+b[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");b[4]?this.prerelease=b[4].split(".").map(R=>{if(/^[0-9]+$/.test(R)){const U=+R;if(U>=0&&U<r)return U}return R}):this.prerelease=[],this.build=b[5]?b[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(S){if(a("SemVer.compare",this.version,this.options,S),!(S instanceof g)){if(typeof S=="string"&&S===this.version)return 0;S=new g(S,this.options)}return S.version===this.version?0:this.compareMain(S)||this.comparePre(S)}compareMain(S){return S instanceof g||(S=new g(S,this.options)),_(this.major,S.major)||_(this.minor,S.minor)||_(this.patch,S.patch)}comparePre(S){if(S instanceof g||(S=new g(S,this.options)),this.prerelease.length&&!S.prerelease.length)return-1;if(!this.prerelease.length&&S.prerelease.length)return 1;if(!this.prerelease.length&&!S.prerelease.length)return 0;let m=0;do{const b=this.prerelease[m],R=S.prerelease[m];if(a("prerelease compare",m,b,R),b===void 0&&R===void 0)return 0;if(R===void 0)return 1;if(b===void 0)return-1;if(b===R)continue;return _(b,R)}while(++m)}compareBuild(S){S instanceof g||(S=new g(S,this.options));let m=0;do{const b=this.build[m],R=S.build[m];if(a("build compare",m,b,R),b===void 0&&R===void 0)return 0;if(R===void 0)return 1;if(b===void 0)return-1;if(b===R)continue;return _(b,R)}while(++m)}inc(S,m,b){if(S.startsWith("pre")){if(!m&&b===!1)throw new Error("invalid increment argument: identifier is empty");if(m){const R=`-${m}`.match(this.options.loose?o[c.PRERELEASELOOSE]:o[c.PRERELEASE]);if(!R||R[1]!==m)throw new Error(`invalid identifier: ${m}`)}}switch(S){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",m,b);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",m,b);break;case"prepatch":this.prerelease.length=0,this.inc("patch",m,b),this.inc("pre",m,b);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",m,b),this.inc("pre",m,b);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const R=Number(b)?1:0;if(this.prerelease.length===0)this.prerelease=[R];else{let U=this.prerelease.length;for(;--U>=0;)typeof this.prerelease[U]=="number"&&(this.prerelease[U]++,U=-2);if(U===-1){if(m===this.prerelease.join(".")&&b===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(R)}}if(m){let U=[m,R];b===!1&&(U=[m]),_(this.prerelease[0],m)===0?isNaN(this.prerelease[1])&&(this.prerelease=U):this.prerelease=U}break}default:throw new Error(`invalid increment argument: ${S}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return ec=g,ec}var tc,Sf;function on(){if(Sf)return tc;Sf=1;const a=fg();return tc=(r,o,c)=>new a(r,c).compare(new a(o,c)),tc}var ac,Cf;function kP(){if(Cf)return ac;Cf=1;const a=on();return ac=(r,o,c)=>a(r,o,c)===0,ac}var nc,Pf;function RP(){if(Pf)return nc;Pf=1;const a=on();return nc=(r,o,c)=>a(r,o,c)!==0,nc}var rc,Af;function $P(){if(Af)return rc;Af=1;const a=on();return rc=(r,o,c)=>a(r,o,c)>0,rc}var ic,If;function TP(){if(If)return ic;If=1;const a=on();return ic=(r,o,c)=>a(r,o,c)>=0,ic}var sc,Ef;function xP(){if(Ef)return sc;Ef=1;const a=on();return sc=(r,o,c)=>a(r,o,c)<0,sc}var oc,kf;function LP(){if(kf)return oc;kf=1;const a=on();return oc=(r,o,c)=>a(r,o,c)<=0,oc}var lc,Rf;function OP(){if(Rf)return lc;Rf=1;const a=kP(),i=RP(),r=$P(),o=TP(),c=xP(),h=LP();return lc=(g,w,S,m)=>{switch(w){case"===":return typeof g=="object"&&(g=g.version),typeof S=="object"&&(S=S.version),g===S;case"!==":return typeof g=="object"&&(g=g.version),typeof S=="object"&&(S=S.version),g!==S;case"":case"=":case"==":return a(g,S,m);case"!=":return i(g,S,m);case">":return r(g,S,m);case">=":return o(g,S,m);case"<":return c(g,S,m);case"<=":return h(g,S,m);default:throw new TypeError(`Invalid operator: ${w}`)}},lc}OP();var cc,$f;function DP(){if($f)return cc;$f=1;const a=fg();return cc=(r,o,c=!1)=>{if(r instanceof a)return r;try{return new a(r,o)}catch(h){if(!c)return null;throw h}},cc}var uc,Tf;function NP(){if(Tf)return uc;Tf=1;const a=DP();return uc=(r,o)=>{const c=a(r,o);return c?c.version:null},uc}NP();var pc;ug("uiComponentSectionRenderer",{src:(pc=sC())!==null&&pc!==void 0?pc:void 0});const zP=ug("uiModulePaymentOverviewCard"),qP=Object.freeze(Object.defineProperty({__proto__:null,add:zP},Symbol.toStringTag,{value:"Module"})),FP=Object.freeze(Object.defineProperty({__proto__:null,overviewCard:qP},Symbol.toStringTag,{value:"Module"})),BP=Object.freeze(Object.defineProperty({__proto__:null,payment:FP},Symbol.toStringTag,{value:"Module"}));function Yr(a){throw new Error('Could not dynamically require "'+a+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var dc={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/var xf;function MP(){return xf||(xf=1,function(a,i){(function(r){a.exports=r()})(function(){return function r(o,c,h){function _(S,m){if(!c[S]){if(!o[S]){var b=typeof Yr=="function"&&Yr;if(!m&&b)return b(S,!0);if(g)return g(S,!0);var R=new Error("Cannot find module '"+S+"'");throw R.code="MODULE_NOT_FOUND",R}var U=c[S]={exports:{}};o[S][0].call(U.exports,function(Y){var N=o[S][1][Y];return _(N||Y)},U,U.exports,r,o,c,h)}return c[S].exports}for(var g=typeof Yr=="function"&&Yr,w=0;w<h.length;w++)_(h[w]);return _}({1:[function(r,o,c){(function(h){var _=h.MutationObserver||h.WebKitMutationObserver,g;if(_){var w=0,S=new _(Y),m=h.document.createTextNode("");S.observe(m,{characterData:!0}),g=function(){m.data=w=++w%2}}else if(!h.setImmediate&&typeof h.MessageChannel<"u"){var b=new h.MessageChannel;b.port1.onmessage=Y,g=function(){b.port2.postMessage(0)}}else"document"in h&&"onreadystatechange"in h.document.createElement("script")?g=function(){var G=h.document.createElement("script");G.onreadystatechange=function(){Y(),G.onreadystatechange=null,G.parentNode.removeChild(G),G=null},h.document.documentElement.appendChild(G)}:g=function(){setTimeout(Y,0)};var R,U=[];function Y(){R=!0;for(var G,ae,K=U.length;K;){for(ae=U,U=[],G=-1;++G<K;)ae[G]();K=U.length}R=!1}o.exports=N;function N(G){U.push(G)===1&&!R&&g()}}).call(this,typeof At<"u"?At:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(r,o,c){var h=r(1);function _(){}var g={},w=["REJECTED"],S=["FULFILLED"],m=["PENDING"];o.exports=b;function b(B){if(typeof B!="function")throw new TypeError("resolver must be a function");this.state=m,this.queue=[],this.outcome=void 0,B!==_&&N(this,B)}b.prototype.catch=function(B){return this.then(null,B)},b.prototype.then=function(B,ee){if(typeof B!="function"&&this.state===S||typeof ee!="function"&&this.state===w)return this;var X=new this.constructor(_);if(this.state!==m){var ue=this.state===S?B:ee;U(X,ue,this.outcome)}else this.queue.push(new R(X,B,ee));return X};function R(B,ee,X){this.promise=B,typeof ee=="function"&&(this.onFulfilled=ee,this.callFulfilled=this.otherCallFulfilled),typeof X=="function"&&(this.onRejected=X,this.callRejected=this.otherCallRejected)}R.prototype.callFulfilled=function(B){g.resolve(this.promise,B)},R.prototype.otherCallFulfilled=function(B){U(this.promise,this.onFulfilled,B)},R.prototype.callRejected=function(B){g.reject(this.promise,B)},R.prototype.otherCallRejected=function(B){U(this.promise,this.onRejected,B)};function U(B,ee,X){h(function(){var ue;try{ue=ee(X)}catch(fe){return g.reject(B,fe)}ue===B?g.reject(B,new TypeError("Cannot resolve promise with itself")):g.resolve(B,ue)})}g.resolve=function(B,ee){var X=G(Y,ee);if(X.status==="error")return g.reject(B,X.value);var ue=X.value;if(ue)N(B,ue);else{B.state=S,B.outcome=ee;for(var fe=-1,De=B.queue.length;++fe<De;)B.queue[fe].callFulfilled(ee)}return B},g.reject=function(B,ee){B.state=w,B.outcome=ee;for(var X=-1,ue=B.queue.length;++X<ue;)B.queue[X].callRejected(ee);return B};function Y(B){var ee=B&&B.then;if(B&&(typeof B=="object"||typeof B=="function")&&typeof ee=="function")return function(){ee.apply(B,arguments)}}function N(B,ee){var X=!1;function ue(Re){X||(X=!0,g.reject(B,Re))}function fe(Re){X||(X=!0,g.resolve(B,Re))}function De(){ee(fe,ue)}var te=G(De);te.status==="error"&&ue(te.value)}function G(B,ee){var X={};try{X.value=B(ee),X.status="success"}catch(ue){X.status="error",X.value=ue}return X}b.resolve=ae;function ae(B){return B instanceof this?B:g.resolve(new this(_),B)}b.reject=K;function K(B){var ee=new this(_);return g.reject(ee,B)}b.all=we;function we(B){var ee=this;if(Object.prototype.toString.call(B)!=="[object Array]")return this.reject(new TypeError("must be an array"));var X=B.length,ue=!1;if(!X)return this.resolve([]);for(var fe=new Array(X),De=0,te=-1,Re=new this(_);++te<X;)Ue(B[te],te);return Re;function Ue(It,ra){ee.resolve(It).then(Sa,function(We){ue||(ue=!0,g.reject(Re,We))});function Sa(We){fe[ra]=We,++De===X&&!ue&&(ue=!0,g.resolve(Re,fe))}}}b.race=be;function be(B){var ee=this;if(Object.prototype.toString.call(B)!=="[object Array]")return this.reject(new TypeError("must be an array"));var X=B.length,ue=!1;if(!X)return this.resolve([]);for(var fe=-1,De=new this(_);++fe<X;)te(B[fe]);return De;function te(Re){ee.resolve(Re).then(function(Ue){ue||(ue=!0,g.resolve(De,Ue))},function(Ue){ue||(ue=!0,g.reject(De,Ue))})}}},{1:1}],3:[function(r,o,c){(function(h){typeof h.Promise!="function"&&(h.Promise=r(2))}).call(this,typeof At<"u"?At:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(r,o,c){var h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p};function _(p,v){if(!(p instanceof v))throw new TypeError("Cannot call a class as a function")}function g(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var w=g();function S(){try{if(!w||!w.open)return!1;var p=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),v=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!p||v)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function m(p,v){p=p||[],v=v||{};try{return new Blob(p,v)}catch(P){if(P.name!=="TypeError")throw P;for(var f=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,A=new f,k=0;k<p.length;k+=1)A.append(p[k]);return A.getBlob(v.type)}}typeof Promise>"u"&&r(3);var b=Promise;function R(p,v){v&&p.then(function(f){v(null,f)},function(f){v(f)})}function U(p,v,f){typeof v=="function"&&p.then(v),typeof f=="function"&&p.catch(f)}function Y(p){return typeof p!="string"&&(console.warn(p+" used as a key, but it is not a string."),p=String(p)),p}function N(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var G="local-forage-detect-blob-support",ae=void 0,K={},we=Object.prototype.toString,be="readonly",B="readwrite";function ee(p){for(var v=p.length,f=new ArrayBuffer(v),A=new Uint8Array(f),k=0;k<v;k++)A[k]=p.charCodeAt(k);return f}function X(p){return new b(function(v){var f=p.transaction(G,B),A=m([""]);f.objectStore(G).put(A,"key"),f.onabort=function(k){k.preventDefault(),k.stopPropagation(),v(!1)},f.oncomplete=function(){var k=navigator.userAgent.match(/Chrome\/(\d+)/),P=navigator.userAgent.match(/Edge\//);v(P||!k||parseInt(k[1],10)>=43)}}).catch(function(){return!1})}function ue(p){return typeof ae=="boolean"?b.resolve(ae):X(p).then(function(v){return ae=v,ae})}function fe(p){var v=K[p.name],f={};f.promise=new b(function(A,k){f.resolve=A,f.reject=k}),v.deferredOperations.push(f),v.dbReady?v.dbReady=v.dbReady.then(function(){return f.promise}):v.dbReady=f.promise}function De(p){var v=K[p.name],f=v.deferredOperations.pop();if(f)return f.resolve(),f.promise}function te(p,v){var f=K[p.name],A=f.deferredOperations.pop();if(A)return A.reject(v),A.promise}function Re(p,v){return new b(function(f,A){if(K[p.name]=K[p.name]||Ba(),p.db)if(v)fe(p),p.db.close();else return f(p.db);var k=[p.name];v&&k.push(p.version);var P=w.open.apply(w,k);v&&(P.onupgradeneeded=function(x){var z=P.result;try{z.createObjectStore(p.storeName),x.oldVersion<=1&&z.createObjectStore(G)}catch(q){if(q.name==="ConstraintError")console.warn('The database "'+p.name+'" has been upgraded from version '+x.oldVersion+" to version "+x.newVersion+', but the storage "'+p.storeName+'" already exists.');else throw q}}),P.onerror=function(x){x.preventDefault(),A(P.error)},P.onsuccess=function(){var x=P.result;x.onversionchange=function(z){z.target.close()},f(x),De(p)}})}function Ue(p){return Re(p,!1)}function It(p){return Re(p,!0)}function ra(p,v){if(!p.db)return!0;var f=!p.db.objectStoreNames.contains(p.storeName),A=p.version<p.db.version,k=p.version>p.db.version;if(A&&(p.version!==v&&console.warn('The database "'+p.name+`" can't be downgraded from version `+p.db.version+" to version "+p.version+"."),p.version=p.db.version),k||f){if(f){var P=p.db.version+1;P>p.version&&(p.version=P)}return!0}return!1}function Sa(p){return new b(function(v,f){var A=new FileReader;A.onerror=f,A.onloadend=function(k){var P=btoa(k.target.result||"");v({__local_forage_encoded_blob:!0,data:P,type:p.type})},A.readAsBinaryString(p)})}function We(p){var v=ee(atob(p.data));return m([v],{type:p.type})}function nt(p){return p&&p.__local_forage_encoded_blob}function ln(p){var v=this,f=v._initReady().then(function(){var A=K[v._dbInfo.name];if(A&&A.dbReady)return A.dbReady});return U(f,p,p),f}function ia(p){fe(p);for(var v=K[p.name],f=v.forages,A=0;A<f.length;A++){var k=f[A];k._dbInfo.db&&(k._dbInfo.db.close(),k._dbInfo.db=null)}return p.db=null,Ue(p).then(function(P){return p.db=P,ra(p)?It(p):P}).then(function(P){p.db=v.db=P;for(var x=0;x<f.length;x++)f[x]._dbInfo.db=P}).catch(function(P){throw te(p,P),P})}function xe(p,v,f,A){A===void 0&&(A=1);try{var k=p.db.transaction(p.storeName,v);f(null,k)}catch(P){if(A>0&&(!p.db||P.name==="InvalidStateError"||P.name==="NotFoundError"))return b.resolve().then(function(){if(!p.db||P.name==="NotFoundError"&&!p.db.objectStoreNames.contains(p.storeName)&&p.version<=p.db.version)return p.db&&(p.version=p.db.version+1),It(p)}).then(function(){return ia(p).then(function(){xe(p,v,f,A-1)})}).catch(f);f(P)}}function Ba(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function cn(p){var v=this,f={db:null};if(p)for(var A in p)f[A]=p[A];var k=K[f.name];k||(k=Ba(),K[f.name]=k),k.forages.push(v),v._initReady||(v._initReady=v.ready,v.ready=ln);var P=[];function x(){return b.resolve()}for(var z=0;z<k.forages.length;z++){var q=k.forages[z];q!==v&&P.push(q._initReady().catch(x))}var F=k.forages.slice(0);return b.all(P).then(function(){return f.db=k.db,Ue(f)}).then(function(M){return f.db=M,ra(f,v._defaultConfig.version)?It(f):M}).then(function(M){f.db=k.db=M,v._dbInfo=f;for(var W=0;W<F.length;W++){var le=F[W];le!==v&&(le._dbInfo.db=f.db,le._dbInfo.version=f.version)}})}function un(p,v){var f=this;p=Y(p);var A=new b(function(k,P){f.ready().then(function(){xe(f._dbInfo,be,function(x,z){if(x)return P(x);try{var q=z.objectStore(f._dbInfo.storeName),F=q.get(p);F.onsuccess=function(){var M=F.result;M===void 0&&(M=null),nt(M)&&(M=We(M)),k(M)},F.onerror=function(){P(F.error)}}catch(M){P(M)}})}).catch(P)});return R(A,v),A}function Lt(p,v){var f=this,A=new b(function(k,P){f.ready().then(function(){xe(f._dbInfo,be,function(x,z){if(x)return P(x);try{var q=z.objectStore(f._dbInfo.storeName),F=q.openCursor(),M=1;F.onsuccess=function(){var W=F.result;if(W){var le=W.value;nt(le)&&(le=We(le));var _e=p(le,W.key,M++);_e!==void 0?k(_e):W.continue()}else k()},F.onerror=function(){P(F.error)}}catch(W){P(W)}})}).catch(P)});return R(A,v),A}function sa(p,v,f){var A=this;p=Y(p);var k=new b(function(P,x){var z;A.ready().then(function(){return z=A._dbInfo,we.call(v)==="[object Blob]"?ue(z.db).then(function(q){return q?v:Sa(v)}):v}).then(function(q){xe(A._dbInfo,B,function(F,M){if(F)return x(F);try{var W=M.objectStore(A._dbInfo.storeName);q===null&&(q=void 0);var le=W.put(q,p);M.oncomplete=function(){q===void 0&&(q=null),P(q)},M.onabort=M.onerror=function(){var _e=le.error?le.error:le.transaction.error;x(_e)}}catch(_e){x(_e)}})}).catch(x)});return R(k,f),k}function pn(p,v){var f=this;p=Y(p);var A=new b(function(k,P){f.ready().then(function(){xe(f._dbInfo,B,function(x,z){if(x)return P(x);try{var q=z.objectStore(f._dbInfo.storeName),F=q.delete(p);z.oncomplete=function(){k()},z.onerror=function(){P(F.error)},z.onabort=function(){var M=F.error?F.error:F.transaction.error;P(M)}}catch(M){P(M)}})}).catch(P)});return R(A,v),A}function Mt(p){var v=this,f=new b(function(A,k){v.ready().then(function(){xe(v._dbInfo,B,function(P,x){if(P)return k(P);try{var z=x.objectStore(v._dbInfo.storeName),q=z.clear();x.oncomplete=function(){A()},x.onabort=x.onerror=function(){var F=q.error?q.error:q.transaction.error;k(F)}}catch(F){k(F)}})}).catch(k)});return R(f,p),f}function Ut(p){var v=this,f=new b(function(A,k){v.ready().then(function(){xe(v._dbInfo,be,function(P,x){if(P)return k(P);try{var z=x.objectStore(v._dbInfo.storeName),q=z.count();q.onsuccess=function(){A(q.result)},q.onerror=function(){k(q.error)}}catch(F){k(F)}})}).catch(k)});return R(f,p),f}function dn(p,v){var f=this,A=new b(function(k,P){if(p<0){k(null);return}f.ready().then(function(){xe(f._dbInfo,be,function(x,z){if(x)return P(x);try{var q=z.objectStore(f._dbInfo.storeName),F=!1,M=q.openKeyCursor();M.onsuccess=function(){var W=M.result;if(!W){k(null);return}p===0||F?k(W.key):(F=!0,W.advance(p))},M.onerror=function(){P(M.error)}}catch(W){P(W)}})}).catch(P)});return R(A,v),A}function oa(p){var v=this,f=new b(function(A,k){v.ready().then(function(){xe(v._dbInfo,be,function(P,x){if(P)return k(P);try{var z=x.objectStore(v._dbInfo.storeName),q=z.openKeyCursor(),F=[];q.onsuccess=function(){var M=q.result;if(!M){A(F);return}F.push(M.key),M.continue()},q.onerror=function(){k(q.error)}}catch(M){k(M)}})}).catch(k)});return R(f,p),f}function la(p,v){v=N.apply(this,arguments);var f=this.config();p=typeof p!="function"&&p||{},p.name||(p.name=p.name||f.name,p.storeName=p.storeName||f.storeName);var A=this,k;if(!p.name)k=b.reject("Invalid arguments");else{var P=p.name===f.name&&A._dbInfo.db,x=P?b.resolve(A._dbInfo.db):Ue(p).then(function(z){var q=K[p.name],F=q.forages;q.db=z;for(var M=0;M<F.length;M++)F[M]._dbInfo.db=z;return z});p.storeName?k=x.then(function(z){if(z.objectStoreNames.contains(p.storeName)){var q=z.version+1;fe(p);var F=K[p.name],M=F.forages;z.close();for(var W=0;W<M.length;W++){var le=M[W];le._dbInfo.db=null,le._dbInfo.version=q}var _e=new b(function(ye,Ee){var Ce=w.open(p.name,q);Ce.onerror=function(Qe){var da=Ce.result;da.close(),Ee(Qe)},Ce.onupgradeneeded=function(){var Qe=Ce.result;Qe.deleteObjectStore(p.storeName)},Ce.onsuccess=function(){var Qe=Ce.result;Qe.close(),ye(Qe)}});return _e.then(function(ye){F.db=ye;for(var Ee=0;Ee<M.length;Ee++){var Ce=M[Ee];Ce._dbInfo.db=ye,De(Ce._dbInfo)}}).catch(function(ye){throw(te(p,ye)||b.resolve()).catch(function(){}),ye})}}):k=x.then(function(z){fe(p);var q=K[p.name],F=q.forages;z.close();for(var M=0;M<F.length;M++){var W=F[M];W._dbInfo.db=null}var le=new b(function(_e,ye){var Ee=w.deleteDatabase(p.name);Ee.onerror=function(){var Ce=Ee.result;Ce&&Ce.close(),ye(Ee.error)},Ee.onblocked=function(){console.warn('dropInstance blocked for database "'+p.name+'" until all open connections are closed')},Ee.onsuccess=function(){var Ce=Ee.result;Ce&&Ce.close(),_e(Ce)}});return le.then(function(_e){q.db=_e;for(var ye=0;ye<F.length;ye++){var Ee=F[ye];De(Ee._dbInfo)}}).catch(function(_e){throw(te(p,_e)||b.resolve()).catch(function(){}),_e})})}return R(k,v),k}var Ma={_driver:"asyncStorage",_initStorage:cn,_support:S(),iterate:Lt,getItem:un,setItem:sa,removeItem:pn,clear:Mt,length:Ut,key:dn,keys:oa,dropInstance:la};function Xe(){return typeof openDatabase=="function"}var se="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ca="~~local_forage_type~",ie=/^~~local_forage_type~([^~]+)~/,rt="__lfsc__:",_t=rt.length,Et="arbf",qe="blob",je="si08",Le="ui08",jt="uic8",ct="si16",Ua="si32",kt="ur16",Ke="ui32",Ht="fl32",Gt="fl64",ua=_t+Et.length,Wt=Object.prototype.toString;function Ze(p){var v=p.length*.75,f=p.length,A,k=0,P,x,z,q;p[p.length-1]==="="&&(v--,p[p.length-2]==="="&&v--);var F=new ArrayBuffer(v),M=new Uint8Array(F);for(A=0;A<f;A+=4)P=se.indexOf(p[A]),x=se.indexOf(p[A+1]),z=se.indexOf(p[A+2]),q=se.indexOf(p[A+3]),M[k++]=P<<2|x>>4,M[k++]=(x&15)<<4|z>>2,M[k++]=(z&3)<<6|q&63;return F}function Je(p){var v=new Uint8Array(p),f="",A;for(A=0;A<v.length;A+=3)f+=se[v[A]>>2],f+=se[(v[A]&3)<<4|v[A+1]>>4],f+=se[(v[A+1]&15)<<2|v[A+2]>>6],f+=se[v[A+2]&63];return v.length%3===2?f=f.substring(0,f.length-1)+"=":v.length%3===1&&(f=f.substring(0,f.length-2)+"=="),f}function hn(p,v){var f="";if(p&&(f=Wt.call(p)),p&&(f==="[object ArrayBuffer]"||p.buffer&&Wt.call(p.buffer)==="[object ArrayBuffer]")){var A,k=rt;p instanceof ArrayBuffer?(A=p,k+=Et):(A=p.buffer,f==="[object Int8Array]"?k+=je:f==="[object Uint8Array]"?k+=Le:f==="[object Uint8ClampedArray]"?k+=jt:f==="[object Int16Array]"?k+=ct:f==="[object Uint16Array]"?k+=kt:f==="[object Int32Array]"?k+=Ua:f==="[object Uint32Array]"?k+=Ke:f==="[object Float32Array]"?k+=Ht:f==="[object Float64Array]"?k+=Gt:v(new Error("Failed to get type for BinaryArray"))),v(k+Je(A))}else if(f==="[object Blob]"){var P=new FileReader;P.onload=function(){var x=ca+p.type+"~"+Je(this.result);v(rt+qe+x)},P.readAsArrayBuffer(p)}else try{v(JSON.stringify(p))}catch(x){console.error("Couldn't convert value into a JSON string: ",p),v(null,x)}}function fn(p){if(p.substring(0,_t)!==rt)return JSON.parse(p);var v=p.substring(ua),f=p.substring(_t,ua),A;if(f===qe&&ie.test(v)){var k=v.match(ie);A=k[1],v=v.substring(k[0].length)}var P=Ze(v);switch(f){case Et:return P;case qe:return m([P],{type:A});case je:return new Int8Array(P);case Le:return new Uint8Array(P);case jt:return new Uint8ClampedArray(P);case ct:return new Int16Array(P);case kt:return new Uint16Array(P);case Ua:return new Int32Array(P);case Ke:return new Uint32Array(P);case Ht:return new Float32Array(P);case Gt:return new Float64Array(P);default:throw new Error("Unkown type: "+f)}}var Ca={serialize:hn,deserialize:fn,stringToBuffer:Ze,bufferToString:Je};function Vn(p,v,f,A){p.executeSql("CREATE TABLE IF NOT EXISTS "+v.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],f,A)}function si(p){var v=this,f={db:null};if(p)for(var A in p)f[A]=typeof p[A]!="string"?p[A].toString():p[A];var k=new b(function(P,x){try{f.db=openDatabase(f.name,String(f.version),f.description,f.size)}catch(z){return x(z)}f.db.transaction(function(z){Vn(z,f,function(){v._dbInfo=f,P()},function(q,F){x(F)})},x)});return f.serializer=Ca,k}function Ot(p,v,f,A,k,P){p.executeSql(f,A,k,function(x,z){z.code===z.SYNTAX_ERR?x.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[v.storeName],function(q,F){F.rows.length?P(q,z):Vn(q,v,function(){q.executeSql(f,A,k,P)},P)},P):P(x,z)},P)}function Yn(p,v){var f=this;p=Y(p);var A=new b(function(k,P){f.ready().then(function(){var x=f._dbInfo;x.db.transaction(function(z){Ot(z,x,"SELECT * FROM "+x.storeName+" WHERE key = ? LIMIT 1",[p],function(q,F){var M=F.rows.length?F.rows.item(0).value:null;M&&(M=x.serializer.deserialize(M)),k(M)},function(q,F){P(F)})})}).catch(P)});return R(A,v),A}function Xn(p,v){var f=this,A=new b(function(k,P){f.ready().then(function(){var x=f._dbInfo;x.db.transaction(function(z){Ot(z,x,"SELECT * FROM "+x.storeName,[],function(q,F){for(var M=F.rows,W=M.length,le=0;le<W;le++){var _e=M.item(le),ye=_e.value;if(ye&&(ye=x.serializer.deserialize(ye)),ye=p(ye,_e.key,le+1),ye!==void 0){k(ye);return}}k()},function(q,F){P(F)})})}).catch(P)});return R(A,v),A}function Zn(p,v,f,A){var k=this;p=Y(p);var P=new b(function(x,z){k.ready().then(function(){v===void 0&&(v=null);var q=v,F=k._dbInfo;F.serializer.serialize(v,function(M,W){W?z(W):F.db.transaction(function(le){Ot(le,F,"INSERT OR REPLACE INTO "+F.storeName+" (key, value) VALUES (?, ?)",[p,M],function(){x(q)},function(_e,ye){z(ye)})},function(le){if(le.code===le.QUOTA_ERR){if(A>0){x(Zn.apply(k,[p,q,f,A-1]));return}z(le)}})})}).catch(z)});return R(P,f),P}function oi(p,v,f){return Zn.apply(this,[p,v,f,1])}function li(p,v){var f=this;p=Y(p);var A=new b(function(k,P){f.ready().then(function(){var x=f._dbInfo;x.db.transaction(function(z){Ot(z,x,"DELETE FROM "+x.storeName+" WHERE key = ?",[p],function(){k()},function(q,F){P(F)})})}).catch(P)});return R(A,v),A}function ci(p){var v=this,f=new b(function(A,k){v.ready().then(function(){var P=v._dbInfo;P.db.transaction(function(x){Ot(x,P,"DELETE FROM "+P.storeName,[],function(){A()},function(z,q){k(q)})})}).catch(k)});return R(f,p),f}function Jn(p){var v=this,f=new b(function(A,k){v.ready().then(function(){var P=v._dbInfo;P.db.transaction(function(x){Ot(x,P,"SELECT COUNT(key) as c FROM "+P.storeName,[],function(z,q){var F=q.rows.item(0).c;A(F)},function(z,q){k(q)})})}).catch(k)});return R(f,p),f}function ui(p,v){var f=this,A=new b(function(k,P){f.ready().then(function(){var x=f._dbInfo;x.db.transaction(function(z){Ot(z,x,"SELECT key FROM "+x.storeName+" WHERE id = ? LIMIT 1",[p+1],function(q,F){var M=F.rows.length?F.rows.item(0).key:null;k(M)},function(q,F){P(F)})})}).catch(P)});return R(A,v),A}function pi(p){var v=this,f=new b(function(A,k){v.ready().then(function(){var P=v._dbInfo;P.db.transaction(function(x){Ot(x,P,"SELECT key FROM "+P.storeName,[],function(z,q){for(var F=[],M=0;M<q.rows.length;M++)F.push(q.rows.item(M).key);A(F)},function(z,q){k(q)})})}).catch(k)});return R(f,p),f}function di(p){return new b(function(v,f){p.transaction(function(A){A.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(k,P){for(var x=[],z=0;z<P.rows.length;z++)x.push(P.rows.item(z).name);v({db:p,storeNames:x})},function(k,P){f(P)})},function(A){f(A)})})}function gn(p,v){v=N.apply(this,arguments);var f=this.config();p=typeof p!="function"&&p||{},p.name||(p.name=p.name||f.name,p.storeName=p.storeName||f.storeName);var A=this,k;return p.name?k=new b(function(P){var x;p.name===f.name?x=A._dbInfo.db:x=openDatabase(p.name,"","",0),p.storeName?P({db:x,storeNames:[p.storeName]}):P(di(x))}).then(function(P){return new b(function(x,z){P.db.transaction(function(q){function F(_e){return new b(function(ye,Ee){q.executeSql("DROP TABLE IF EXISTS "+_e,[],function(){ye()},function(Ce,Qe){Ee(Qe)})})}for(var M=[],W=0,le=P.storeNames.length;W<le;W++)M.push(F(P.storeNames[W]));b.all(M).then(function(){x()}).catch(function(_e){z(_e)})},function(q){z(q)})})}):k=b.reject("Invalid arguments"),R(k,v),k}var hi={_driver:"webSQLStorage",_initStorage:si,_support:Xe(),iterate:Xn,getItem:Yn,setItem:oi,removeItem:li,clear:ci,length:Jn,key:ui,keys:pi,dropInstance:gn};function _n(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Qn(p,v){var f=p.name+"/";return p.storeName!==v.storeName&&(f+=p.storeName+"/"),f}function fi(){var p="_localforage_support_test";try{return localStorage.setItem(p,!0),localStorage.removeItem(p),!1}catch{return!0}}function gi(){return!fi()||localStorage.length>0}function _i(p){var v=this,f={};if(p)for(var A in p)f[A]=p[A];return f.keyPrefix=Qn(p,v._defaultConfig),gi()?(v._dbInfo=f,f.serializer=Ca,b.resolve()):b.reject()}function yi(p){var v=this,f=v.ready().then(function(){for(var A=v._dbInfo.keyPrefix,k=localStorage.length-1;k>=0;k--){var P=localStorage.key(k);P.indexOf(A)===0&&localStorage.removeItem(P)}});return R(f,p),f}function mi(p,v){var f=this;p=Y(p);var A=f.ready().then(function(){var k=f._dbInfo,P=localStorage.getItem(k.keyPrefix+p);return P&&(P=k.serializer.deserialize(P)),P});return R(A,v),A}function wi(p,v){var f=this,A=f.ready().then(function(){for(var k=f._dbInfo,P=k.keyPrefix,x=P.length,z=localStorage.length,q=1,F=0;F<z;F++){var M=localStorage.key(F);if(M.indexOf(P)===0){var W=localStorage.getItem(M);if(W&&(W=k.serializer.deserialize(W)),W=p(W,M.substring(x),q++),W!==void 0)return W}}});return R(A,v),A}function vi(p,v){var f=this,A=f.ready().then(function(){var k=f._dbInfo,P;try{P=localStorage.key(p)}catch{P=null}return P&&(P=P.substring(k.keyPrefix.length)),P});return R(A,v),A}function er(p){var v=this,f=v.ready().then(function(){for(var A=v._dbInfo,k=localStorage.length,P=[],x=0;x<k;x++){var z=localStorage.key(x);z.indexOf(A.keyPrefix)===0&&P.push(z.substring(A.keyPrefix.length))}return P});return R(f,p),f}function bi(p){var v=this,f=v.keys().then(function(A){return A.length});return R(f,p),f}function Si(p,v){var f=this;p=Y(p);var A=f.ready().then(function(){var k=f._dbInfo;localStorage.removeItem(k.keyPrefix+p)});return R(A,v),A}function Ci(p,v,f){var A=this;p=Y(p);var k=A.ready().then(function(){v===void 0&&(v=null);var P=v;return new b(function(x,z){var q=A._dbInfo;q.serializer.serialize(v,function(F,M){if(M)z(M);else try{localStorage.setItem(q.keyPrefix+p,F),x(P)}catch(W){(W.name==="QuotaExceededError"||W.name==="NS_ERROR_DOM_QUOTA_REACHED")&&z(W),z(W)}})})});return R(k,f),k}function Pi(p,v){if(v=N.apply(this,arguments),p=typeof p!="function"&&p||{},!p.name){var f=this.config();p.name=p.name||f.name,p.storeName=p.storeName||f.storeName}var A=this,k;return p.name?k=new b(function(P){p.storeName?P(Qn(p,A._defaultConfig)):P(p.name+"/")}).then(function(P){for(var x=localStorage.length-1;x>=0;x--){var z=localStorage.key(x);z.indexOf(P)===0&&localStorage.removeItem(z)}}):k=b.reject("Invalid arguments"),R(k,v),k}var Ai={_driver:"localStorageWrapper",_initStorage:_i,_support:_n(),iterate:wi,getItem:mi,setItem:Ci,removeItem:Si,clear:yi,length:bi,key:vi,keys:er,dropInstance:Pi},Ii=function(v,f){return v===f||typeof v=="number"&&typeof f=="number"&&isNaN(v)&&isNaN(f)},ja=function(v,f){for(var A=v.length,k=0;k<A;){if(Ii(v[k],f))return!0;k++}return!1},tr=Array.isArray||function(p){return Object.prototype.toString.call(p)==="[object Array]"},Dt={},ar={},pa={INDEXEDDB:Ma,WEBSQL:hi,LOCALSTORAGE:Ai},Ei=[pa.INDEXEDDB._driver,pa.WEBSQL._driver,pa.LOCALSTORAGE._driver],Pa=["dropInstance"],Ha=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Pa),nr={description:"",driver:Ei.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ki(p,v){p[v]=function(){var f=arguments;return p.ready().then(function(){return p[v].apply(p,f)})}}function yn(){for(var p=1;p<arguments.length;p++){var v=arguments[p];if(v)for(var f in v)v.hasOwnProperty(f)&&(tr(v[f])?arguments[0][f]=v[f].slice():arguments[0][f]=v[f])}return arguments[0]}var Ri=function(){function p(v){_(this,p);for(var f in pa)if(pa.hasOwnProperty(f)){var A=pa[f],k=A._driver;this[f]=k,Dt[k]||this.defineDriver(A)}this._defaultConfig=yn({},nr),this._config=yn({},this._defaultConfig,v),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return p.prototype.config=function(f){if((typeof f>"u"?"undefined":h(f))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var A in f){if(A==="storeName"&&(f[A]=f[A].replace(/\W/g,"_")),A==="version"&&typeof f[A]!="number")return new Error("Database version must be a number.");this._config[A]=f[A]}return"driver"in f&&f.driver?this.setDriver(this._config.driver):!0}else return typeof f=="string"?this._config[f]:this._config},p.prototype.defineDriver=function(f,A,k){var P=new b(function(x,z){try{var q=f._driver,F=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!f._driver){z(F);return}for(var M=Ha.concat("_initStorage"),W=0,le=M.length;W<le;W++){var _e=M[W],ye=!ja(Pa,_e);if((ye||f[_e])&&typeof f[_e]!="function"){z(F);return}}var Ee=function(){for(var da=function(ir){return function(){var xi=new Error("Method "+ir+" is not implemented by the current driver"),sr=b.reject(xi);return R(sr,arguments[arguments.length-1]),sr}},mn=0,rr=Pa.length;mn<rr;mn++){var Ga=Pa[mn];f[Ga]||(f[Ga]=da(Ga))}};Ee();var Ce=function(da){Dt[q]&&console.info("Redefining LocalForage driver: "+q),Dt[q]=f,ar[q]=da,x()};"_support"in f?f._support&&typeof f._support=="function"?f._support().then(Ce,z):Ce(!!f._support):Ce(!0)}catch(Qe){z(Qe)}});return U(P,A,k),P},p.prototype.driver=function(){return this._driver||null},p.prototype.getDriver=function(f,A,k){var P=Dt[f]?b.resolve(Dt[f]):b.reject(new Error("Driver not found."));return U(P,A,k),P},p.prototype.getSerializer=function(f){var A=b.resolve(Ca);return U(A,f),A},p.prototype.ready=function(f){var A=this,k=A._driverSet.then(function(){return A._ready===null&&(A._ready=A._initDriver()),A._ready});return U(k,f,f),k},p.prototype.setDriver=function(f,A,k){var P=this;tr(f)||(f=[f]);var x=this._getSupportedDrivers(f);function z(){P._config.driver=P.driver()}function q(W){return P._extend(W),z(),P._ready=P._initStorage(P._config),P._ready}function F(W){return function(){var le=0;function _e(){for(;le<W.length;){var ye=W[le];return le++,P._dbInfo=null,P._ready=null,P.getDriver(ye).then(q).catch(_e)}z();var Ee=new Error("No available storage method found.");return P._driverSet=b.reject(Ee),P._driverSet}return _e()}}var M=this._driverSet!==null?this._driverSet.catch(function(){return b.resolve()}):b.resolve();return this._driverSet=M.then(function(){var W=x[0];return P._dbInfo=null,P._ready=null,P.getDriver(W).then(function(le){P._driver=le._driver,z(),P._wrapLibraryMethodsWithReady(),P._initDriver=F(x)})}).catch(function(){z();var W=new Error("No available storage method found.");return P._driverSet=b.reject(W),P._driverSet}),U(this._driverSet,A,k),this._driverSet},p.prototype.supports=function(f){return!!ar[f]},p.prototype._extend=function(f){yn(this,f)},p.prototype._getSupportedDrivers=function(f){for(var A=[],k=0,P=f.length;k<P;k++){var x=f[k];this.supports(x)&&A.push(x)}return A},p.prototype._wrapLibraryMethodsWithReady=function(){for(var f=0,A=Ha.length;f<A;f++)ki(this,Ha[f])},p.prototype.createInstance=function(f){return new p(f)},p}(),$i=new Ri;o.exports=$i},{3:3}]},{},[4])(4)})}(dc)),dc.exports}MP();var hc,Lf;function UP(){var a;return Lf||(Lf=1,hc=(a=window.Shopware)==null?void 0:a.Vue),hc}UP();ig({handle:Jr,send:Hn});const jP={module:BP};Shopware.Component.register("swag-paypal-method-domain-association",()=>Te(()=>import("./index-DnLidD0f.js"),__vite__mapDeps([14,15])));Shopware.Component.register("swag-paypal-method-merchant-information",()=>Te(()=>import("./index-FZMr6DU-.js"),__vite__mapDeps([16,17])));Shopware.Component.register("swag-paypal-payment-method",()=>Te(()=>import("./index-D8Q_Oavj.js"),__vite__mapDeps([18,19])));Shopware.Component.register("swag-paypal-method-card",()=>Te(()=>import("./index-BBIxhann.js"),__vite__mapDeps([20,21])));Shopware.Component.override("sw-plugin-box",()=>Te(()=>import("./index-QD0Oy9I0.js"),[]));Shopware.Component.override("sw-settings-payment-detail",()=>Te(()=>import("./index-COETuq5G.js"),__vite__mapDeps([22,23])));jP.module.payment.overviewCard.add({positionId:"swag-paypal-method-card-before",component:"swag-paypal-method-card",paymentMethodHandlers:["handler_swag_trustlyapmhandler","handler_swag_sofortapmhandler","handler_swag_p24apmhandler","handler_swag_oxxoapmhandler","handler_swag_mybankapmhandler","handler_swag_multibancoapmhandler","handler_swag_idealapmhandler","handler_swag_giropayapmhandler","handler_swag_epsapmhandler","handler_swag_blikapmhandler","handler_swag_bancontactapmhandler","handler_swag_sepahandler","handler_swag_acdchandler","handler_swag_puihandler","handler_swag_paypalpaymenthandler","handler_swag_pospayment","handler_swag_venmohandler","handler_swag_paylaterhandler","handler_swag_applepayhandler","handler_swag_googlepayhandler"]});const HP=`{% block swag_paypal_payment_actions_v2 %} <div> <div class="swag-paypal-payment-actions-v2__button-container"> <div> {% block swag_paypal_payment_actions_v2_void %} <mt-button v-if="showVoidButton" size="small" :disabled="!acl.can('order.editor')" variant="secondary" @click="spawnModal('void')" > {{ $t('swag-paypal-payment.buttons.label.void') }} </mt-button> {% endblock %} {% block swag_paypal_payment_actions_v2_capture %} <mt-button v-if="captureableAmount > 0" size="small" :disabled="!acl.can('order.editor')" variant="secondary" @click="spawnModal('capture')" > {{ $t('swag-paypal-payment.buttons.label.capture') }} </mt-button> {% endblock %} </div> {% block swag_paypal_payment_actions_v2_refund %} <mt-button variant="primary" size="small" :disabled="refundableAmount <= 0 || !acl.can('order.editor')" @click="spawnModal('refund')" > {{ $t('swag-paypal-payment.buttons.label.refund') }} </mt-button> {% endblock %} </div> {% block swag_paypal_payment_actions_v2_modal %} {% block swag_paypal_payment_actions_v2_modal_refund %} <swag-paypal-payment-action-v2-refund v-if="modalType === 'refund'" :orderTransactionId="orderTransactionId" :paypalOrder="paypalOrder" :paypalPartnerAttributionId="paypalPartnerAttributionId" :refundableAmount="refundableAmount" @modal-close="closeModal" /> {% endblock %} {% block swag_paypal_payment_actions_v2_modal_capture %} <swag-paypal-payment-action-v2-capture v-if="modalType === 'capture'" :orderTransactionId="orderTransactionId" :paypalOrder="paypalOrder" :paypalPartnerAttributionId="paypalPartnerAttributionId" :captureableAmount="captureableAmount" @modal-close="closeModal" /> {% endblock %} {% block swag_paypal_payment_actions_v2_modal_void %} <swag-paypal-payment-action-v2-void v-if="modalType === 'void'" :orderTransactionId="orderTransactionId" :paypalOrder="paypalOrder" :paypalPartnerAttributionId="paypalPartnerAttributionId" @modal-close="closeModal" /> {% endblock %} {% endblock %} </div> {% endblock %}`,GP=`{% block swag_paypal_payment_action_capture_v2 %} <sw-modal variant="small" :title="$t(\`swag-paypal-payment.modal.title.capture\`)" @modal-close="$emit('modal-close')" > {% block swag_paypal_payment_action_capture_v2_max_amount %} <mt-text-field v-model="captureableAmount" :label="$t('swag-paypal-payment.captureAction.maxAmount')" :disabled="true" > <template v-if="currencyCode" #suffix> {{ currencyCode }} </template> </mt-text-field> {% endblock %} {% block swag_paypal_payment_action_capture_v2_amount %} <mt-number-field v-model="captureAmount" :max="captureableAmount" :min="0" :label="$t('swag-paypal-payment.captureAction.currentAmount')" > <template v-if="currencyCode" #suffix> {{ currencyCode }} </template> </mt-number-field> {% endblock %} {% block swag_paypal_payment_action_capture_v2_invoice_number %} <mt-text-field v-model="captureInvoiceNumber" :max-length="127" :label="$t('swag-paypal-payment.captureAction.captureInvoiceNumber.label')" :placeholder="$t('swag-paypal-payment.captureAction.captureInvoiceNumber.placeholder')" /> {% endblock %} {% block swag_paypal_payment_action_capture_v2_note_to_payer %} <mt-textarea v-model="captureNoteToPayer" :max-length="255" :placeholder="$t('swag-paypal-payment.captureAction.captureNoteToPayer.placeholder')" :label="$t('swag-paypal-payment.captureAction.captureNoteToPayer.label')" /> {% endblock %} {% block swag_paypal_payment_action_capture_v2_is_final_capture %} <mt-checkbox v-model:checked="isFinalCapture" :label="$t('swag-paypal-payment.captureAction.isFinal')" /> {% endblock %} {% block swag_paypal_payment_action_capture_v2_hint %} <mt-banner v-if="showHint"> {{ $t('swag-paypal-payment.captureAction.isFinalHint') }} </mt-banner> {% endblock %} {% block swag_paypal_payment_action_capture_v2_confirm_button %} <template #modal-footer> <mt-button variant="primary" @click="capture"> {{ $t('swag-paypal-payment.captureAction.button.text') }} </mt-button> </template> {% endblock %} <sw-loader v-if="isLoading" /> </sw-modal> {% endblock %}`,{Component:WP}=Shopware;WP.register("swag-paypal-payment-action-v2-capture",{template:GP,inject:["SwagPayPalOrderService"],emits:["modal-close"],mixins:[Shopware.Mixin.getByName("notification")],props:{paypalOrder:{type:Object,required:!0},orderTransactionId:{type:String,required:!0},paypalPartnerAttributionId:{type:String,required:!0},captureableAmount:{type:Number,required:!0}},data(){return{authorization:{},isFinalCapture:!0,captureAmount:this.captureableAmount,captureInvoiceNumber:"",captureNoteToPayer:"",currencyCode:"",isLoading:!0}},computed:{showHint(){return this.isFinalCapture&&this.captureAmount!==this.captureableAmount}},created(){this.createdComponent()},methods:{createdComponent(){this.authorization=this.paypalOrder.purchase_units[0].payments.authorizations[0],this.currencyCode=this.authorization.amount.currency_code,this.isLoading=!1},capture(){this.isLoading=!0;let a=this.captureAmount;a===0&&(a=this.captureableAmount),this.SwagPayPalOrderService.captureAuthorization(this.orderTransactionId,this.authorization.id,this.currencyCode,a,this.captureInvoiceNumber,this.captureNoteToPayer,this.paypalPartnerAttributionId,this.isFinalCapture).then(()=>{this.createNotificationSuccess({message:this.$t("swag-paypal-payment.captureAction.successMessage")}),this.isLoading=!1,this.$emit("modal-close")}).catch(i=>{try{this.createNotificationError({message:`${i.response.data.errors[0].title}: ${i.response.data.errors[0].detail}`,autoClose:!1})}catch{this.createNotificationError({message:`${i.title}: ${i.message}`,autoClose:!1})}finally{this.isLoading=!1}})}}});const KP=`{% block swag_paypal_payment_action_refund_v2 %} <sw-modal variant="small" :title="$t(\`swag-paypal-payment.modal.title.refund\`)" @modal-close="$emit('modal-close')" > {% block swag_paypal_payment_action_refund_v2_capture_select %} <mt-select v-model="selectedCaptureId" :label="$t('swag-paypal-payment.refundAction.invoiceSelect.label')" :options="captureOptions" @update:modelValue="setCapture" /> {% endblock %} {% block swag_paypal_payment_action_refund_v2_invoice_number %} <mt-text-field v-model="refundInvoiceNumber" :max-length="127" :label="$t('swag-paypal-payment.refundAction.refundInvoiceNumber.label')" :placeholder="$t('swag-paypal-payment.refundAction.refundInvoiceNumber.placeholder')" /> {% endblock %} {% block swag_paypal_payment_action_refund_v2_amount %} <mt-number-field v-model="refundAmount" :max="refundableAmountForSelectedCapture" :min="0" :label="$t('swag-paypal-payment.refundAction.refundAmount.label')" :helpText="$t('swag-paypal-payment.refundAction.refundAmount.helpText')" > <template #suffix> {{ selectedCapture.amount.currency_code }} </template> </mt-number-field> {% endblock %} {% block swag_paypal_payment_action_refund_v2_note_to_payer %} <mt-textarea v-model="refundNoteToPayer" :max-length="255" :placeholder="$t('swag-paypal-payment.refundAction.refundNoteToPayer.placeholder')" :label="$t('swag-paypal-payment.refundAction.refundNoteToPayer.label')" /> {% endblock %} {% block swag_paypal_payment_action_refund_v2_confirm_button %} <template #modal-footer> <mt-button variant="primary" @click="refund"> {{ $t('swag-paypal-payment.refundAction.confirmButton.text') }} </mt-button> </template> {% endblock %} <sw-loader v-if="isLoading" /> </sw-modal> {% endblock %}`,VP="REFUNDED",YP="CREATED",XP="PARTIALLY_CAPTURED",ZP="PENDING",{Component:JP,Filter:QP}=Shopware;JP.register("swag-paypal-payment-action-v2-refund",{template:KP,inject:["SwagPayPalOrderService"],emits:["modal-close"],mixins:[Shopware.Mixin.getByName("notification")],props:{paypalOrder:{type:Object,required:!0},orderTransactionId:{type:String,required:!0},paypalPartnerAttributionId:{type:String,required:!0},refundableAmount:{type:Number,required:!1,default:0}},data(){return{captures:[],selectedCapture:{},refundAmount:0,refundInvoiceNumber:"",refundNoteToPayer:"",selectedCaptureId:"",isLoading:!0}},computed:{dateFilter(){return QP.getByName("date")},refundableAmountForSelectedCapture(){return this.selectedCapture.amount.value>this.refundableAmount?Number(this.refundableAmount):Number(this.selectedCapture.amount.value)},captureOptions(){return this.captures.map(a=>({id:a.id,value:a.id,label:`${this.dateFilter(a.create_time)} (${a.amount.value} ${a.amount.currency_code}) - ${a.id} [${a.status}]`}))}},created(){this.createdComponent()},methods:{createdComponent(){this.getRefundableCaptures();const a=this.captures[0];this.selectedCaptureId=a.id,this.selectedCapture=a,this.refundAmount=this.refundableAmountForSelectedCapture,this.isLoading=!1},getRefundableCaptures(){const a=this.paypalOrder.purchase_units[0].payments.captures,i=[];a.forEach(r=>{r.status!==VP&&i.push(r)}),this.captures=i},setCapture(){this.selectedCapture=this.captures.find(a=>a.id===this.selectedCaptureId),this.refundAmount=this.refundableAmountForSelectedCapture},refund(){this.isLoading=!0;let a=this.refundAmount;a===0&&(a=this.selectedCapture.amount.value),this.SwagPayPalOrderService.refundCapture(this.orderTransactionId,this.selectedCapture.id,this.paypalOrder.id,this.selectedCapture.amount.currency_code,a,this.refundInvoiceNumber,this.refundNoteToPayer,this.paypalPartnerAttributionId).then(()=>{this.createNotificationSuccess({message:this.$t("swag-paypal-payment.refundAction.successMessage")}),this.isLoading=!1,this.$emit("modal-close")}).catch(i=>{try{this.createNotificationError({message:`${i.response.data.errors[0].title}: ${i.response.data.errors[0].detail}`,autoClose:!1})}catch{this.createNotificationError({message:`${i.title}: ${i.message}`,autoClose:!1})}finally{this.isLoading=!1}})}}});const e0=`{% block swag_paypal_paymemnt_action_v2_void %} <sw-modal variant="small" :title="$t(\`swag-paypal-payment.modal.title.void\`)" @modal-close="closeModal" > {% block swag_paypal_paymemnt_action_v2_void_headline %} <p>{{ $t('swag-paypal-payment.voidAction.confirm.message') }}</p> {% endblock %} <template #modal-footer> {% block swag_paypal_paymemnt_action_v2_void_cancel_button %} <mt-button variant="secondary" @click="closeModal"> {{ $t('global.default.no') }} </mt-button> {% endblock %} {% block swag_paypal_paymemnt_action_v2_void_confirm_button %} <mt-button variant="primary" @click="voidPayment"> {{ $t('swag-paypal-payment.voidAction.confirm.button.confirm') }} </mt-button> {% endblock %} </template> <sw-loader v-if="isLoading" size="43px" /> </sw-modal> {% endblock %}`,{Component:t0}=Shopware;t0.register("swag-paypal-payment-action-v2-void",{template:e0,inject:["SwagPayPalOrderService"],emits:["modal-close"],mixins:[Shopware.Mixin.getByName("notification")],props:{paypalOrder:{type:Object,required:!0},orderTransactionId:{type:String,required:!0},paypalPartnerAttributionId:{type:String,required:!0}},data(){return{isLoading:!1}},methods:{voidPayment(){this.isLoading=!0;const a=this.paypalOrder.purchase_units[0].payments.authorizations[0];this.SwagPayPalOrderService.voidAuthorization(this.orderTransactionId,a.id,this.paypalPartnerAttributionId).then(()=>{this.createNotificationSuccess({message:this.$t("swag-paypal-payment.voidAction.successMessage")}),this.isLoading=!1,this.closeModal()}).catch(i=>{try{this.createNotificationError({message:`${i.response.data.errors[0].title}: ${i.response.data.errors[0].detail}`,autoClose:!1})}catch{this.createNotificationError({message:`${i.title}: ${i.message}`,autoClose:!1})}finally{this.isLoading=!1}})},closeModal(){this.$emit("modal-close")}}});const{Component:a0}=Shopware;a0.register("swag-paypal-payment-actions-v2",{template:HP,inject:["acl"],emits:["reload-paypal-order"],props:{paypalOrder:{type:Object,required:!0},orderTransactionId:{type:String,required:!0},paypalPartnerAttributionId:{type:String,required:!0},refundableAmount:{type:Number,required:!0},captureableAmount:{type:Number,required:!0},showVoidButton:{type:Boolean,required:!0}},data(){return{modalType:""}},methods:{spawnModal(a){this.modalType=a},closeModal(){this.modalType="",this.$emit("reload-paypal-order")}}});const n0=`{% block swag_paypal_payment_details_v1 %} <div class="swag-paypal-payment-details_v1"> <mt-card position-identifier="swag-paypal-payment-details-v1" :title="$t('swag-paypal-payment.paymentDetails.cardTitle')" > <template #grid> <sw-card-section divider="top"> <sw-container columns="1fr" gap="0px 30px"> {% block swag_paypal_payment_detail_invoice %} {% block swag_paypal_payment_detail_invoice_heading %} <h3> {{ $t('swag-paypal-payment.paymentDetails.invoice.heading') }} </h3> {% endblock %} {% block swag_paypal_payment_detail_invoice_list %} <sw-description-list class="swag-paypal-payment-detail__data" grid="1fr 1fr"> <dt>{{ $t('swag-paypal-payment.paymentDetails.invoice.totalAmount') }}</dt> <dd>{{ amount.total }} {{ currency }}</dd> <dt>{{ $t('swag-paypal-payment.paymentDetails.invoice.subTotal') }}</dt> <dd> {{ amount.details.subtotal }} {{ currency }}</dd> <dt>{{ $t('swag-paypal-payment.paymentDetails.invoice.shipping') }}</dt> <dd> {{ amount.details.shipping }} {{ currency }}</dd> </sw-description-list> {% endblock %} {% block swag_paypal_payment_detail_payment %} {% block swag_paypal_payment_detail_payment_heading %} <h3 class="swag-paypal-payment-detail__heading"> {{ $t('swag-paypal-payment.paymentDetails.payment.heading') }} </h3> {% endblock %} {% block swag_paypal_payment_detail_payment_list %} <sw-description-list class="swag-paypal-payment-detail__data" grid="1fr 1fr"> <dt>{{ $t('swag-paypal-payment.paymentDetails.payment.intent') }}</dt> <dd>{{ $t(\`swag-paypal-settings.options.intent.\${paymentResource.intent}\`) }}</dd> <dt>{{ $t('swag-paypal-payment.paymentDetails.payment.paymentId') }}</dt> <dd>{{ paymentResource.id }}</dd> <dt>{{ $t('swag-paypal-payment.paymentDetails.payment.cartId') }}</dt> <dd>{{ paymentResource.cart }}</dd> <dt>{{ $t('swag-paypal-payment.paymentDetails.payment.state') }}</dt> <dd>{{ paymentResource.state }}</dd> <dt>{{ $t('swag-paypal-payment.paymentDetails.payment.createTime') }}</dt> <dd>{{ createDateTime }}</dd> <dt>{{ $t('swag-paypal-payment.paymentDetails.payment.updateTime') }}</dt> <dd>{{ updateDateTime }}</dd> </sw-description-list> {% endblock %} {% endblock %} {% block swag_paypal_payment_detail_customer %} {% block swag_paypal_payment_detail_customer_heading %} <h3 class="swag-paypal-payment-detail__heading"> {{ $t('swag-paypal-payment.paymentDetails.customer.heading') }} </h3> {% endblock %} {% block swag_paypal_payment_detail_customer_list %} <sw-description-list class="swag-paypal-payment-detail__data" grid="1fr 1fr"> <dt>{{ $t('swag-paypal-payment.paymentDetails.customer.payerId') }}</dt> <dd>{{ payerId }}</dd> </sw-description-list> {% endblock %} {% endblock %} {% endblock %} </sw-container> </sw-card-section> </template> </mt-card> {% block swag_paypal_payment_transaction_history_card %} <mt-card position-identifier="swag-paypal-payment-transaction-history-v1" :title="$t('swag-paypal-payment.transactionHistory.cardTitle')" > <template #grid> {% block swag_paypal_payment_transaction_history_grid %} <sw-data-grid :dataSource="relatedResources" :columns="relatedResourceColumns" :showActions="false" :showSelection="false" /> {% endblock %} </template> </mt-card> {% endblock %} </div> {% endblock %}`,{Component:r0,Filter:i0}=Shopware;r0.register("swag-paypal-payment-details-v1",{template:n0,props:{paymentResource:{type:Object,required:!0},orderId:{type:String,required:!0}},data(){return{relatedResources:[],createDateTime:"",updateDateTime:"",currency:"",amount:{},payerId:""}},computed:{dateFilter(){return i0.getByName("date")},relatedResourceColumns(){return[{property:"type",label:this.$t("swag-paypal-payment.transactionHistory.types.type"),rawData:!0},{property:"total",label:this.$t("swag-paypal-payment.transactionHistory.types.amount"),rawData:!0},{property:"id",label:this.$t("swag-paypal-payment.transactionHistory.types.trackingId"),rawData:!0},{property:"status",label:this.$t("swag-paypal-payment.transactionHistory.types.state"),rawData:!0},{property:"transactionFee",label:this.$t("swag-paypal-payment.transactionHistory.types.transactionFee"),rawData:!0},{property:"paymentMode",label:this.$t("swag-paypal-payment.transactionHistory.types.paymentMode"),rawData:!0},{property:"create",label:this.$t("swag-paypal-payment.transactionHistory.types.createTime"),rawData:!0},{property:"update",label:this.$t("swag-paypal-payment.transactionHistory.types.updateTime"),rawData:!0}]}},created(){this.createdComponent()},methods:{createdComponent(){this.createDateTime=this.formatDate(this.paymentResource.create_time),this.updateDateTime=this.formatDate(this.paymentResource.update_time),this.amount=this.paymentResource.transactions[0].amount,this.currency=this.paymentResource.transactions[0].amount.currency,this.paymentResource.payer&&this.paymentResource.payer.payer_info&&(this.payerId=this.paymentResource.payer.payer_info.payer_id),this.setRelatedResources()},setRelatedResources(){const a=this.paymentResource.transactions[0].related_resources;a&&a.forEach(i=>{i.sale&&this.pushRelatedResource("sale",i.sale),i.authorization&&this.pushRelatedResource("authorization",i.authorization),i.order&&this.pushRelatedResource("order",i.order),i.refund&&this.pushRelatedResource("refund",i.refund),i.capture&&this.pushRelatedResource("capture",i.capture)})},pushRelatedResource(a,i){let r=null;const o=i.amount.currency;i.transaction_fee&&(r=`${i.transaction_fee.value} ${o}`),this.relatedResources.push({id:i.id,type:this.$t(`swag-paypal-payment.transactionHistory.states.${a}`),total:`${i.amount.total} ${o}`,create:this.formatDate(i.create_time),createRaw:i.create_time,update:this.formatDate(i.update_time),transactionFee:r,status:i.state,paymentMode:i.payment_mode}),this.relatedResources.sort((c,h)=>{const _=new Date(c.createRaw),g=new Date(h.createRaw);return _-g})},formatDate(a){return this.dateFilter(a,{hour:"2-digit",minute:"2-digit",second:"2-digit"})}}});const s0=`{% block swag_paypal_payment_details_v2 %} <div class="swag-paypal-payment-details_v2"> <mt-card position-identifier="swag-paypal-payment-details-v2" :title="$t('swag-paypal-payment.paymentDetails.cardTitle')" > <template #grid> {% block swag_paypal_payment_actions_section %} <sw-card-section secondary slim> <swag-paypal-payment-actions-v2 :orderTransactionId="orderTransaction.id" :paypalOrder="paypalOrder" :paypalPartnerAttributionId="orderTransaction.customFields.swag_paypal_partner_attribution_id" :refundableAmount="refundableAmount" :captureableAmount="captureableAmount" :showVoidButton="showVoidButton" @reloadPaypalOrder="$emit('reload-paypal-order')" /> </sw-card-section> {% endblock %} <sw-card-section divider="top"> {% block swag_paypal_payment_detail_invoice %} {% block swag_paypal_payment_detail_invoice_heading %} <h3> {{ $t('swag-paypal-payment.paymentDetails.invoice.heading') }} </h3> {% endblock %} {% block swag_paypal_payment_detail_invoice_list %} <sw-description-list class="swag-paypal-payment-detail__data" grid="1fr 1fr"> {% block swag_paypal_payment_detail_invoice_list_total %} <dt>{{ $t('swag-paypal-payment.paymentDetails.invoice.totalAmount') }}</dt> <dd>{{ amount.value }} {{ currency }}</dd> {% endblock %} <template v-if="amount.breakdown"> {% block swag_paypal_payment_detail_invoice_list_sub_total %} <dt>{{ $t('swag-paypal-payment.paymentDetails.invoice.subTotal') }}</dt> <dd> {{ amount.breakdown.item_total.value }} {{ currency }}</dd> {% endblock %} {% block swag_paypal_payment_detail_invoice_list_discount %} <template v-if="amount.breakdown.discount"> <dt>{{ $t('swag-paypal-payment.paymentDetails.invoice.discount') }}</dt> <dd> {{ amount.breakdown.discount.value }} {{ currency }}</dd> </template> {% endblock %} {% block swag_paypal_payment_detail_invoice_list_handling %} <template v-if="amount.breakdown.handling"> <dt>{{ $t('swag-paypal-payment.paymentDetails.invoice.handling') }}</dt> <dd> {{ amount.breakdown.handling.value }} {{ currency }}</dd> </template> {% endblock %} {% block swag_paypal_payment_detail_invoice_list_insurance %} <template v-if="amount.breakdown.insurance"> <dt>{{ $t('swag-paypal-payment.paymentDetails.invoice.insurance') }}</dt> <dd> {{ amount.breakdown.insurance.value }} {{ currency }}</dd> </template> {% endblock %} {% block swag_paypal_payment_detail_invoice_list_shipping %} <dt>{{ $t('swag-paypal-payment.paymentDetails.invoice.shipping') }}</dt> <dd> {{ amount.breakdown.shipping.value }} {{ currency }}</dd> {% endblock %} {% block swag_paypal_payment_detail_invoice_list_shipping_discount %} <template v-if="amount.breakdown.insurance"> <dt>{{ $t('swag-paypal-payment.paymentDetails.invoice.shipping_discount') }}</dt> <dd> {{ amount.breakdown.shipping_discount.value }} {{ currency }}</dd> </template> {% endblock %} </template> </sw-description-list> {% endblock %} {% block swag_paypal_payment_detail_payment %} {% block swag_paypal_payment_detail_payment_heading %} <h3 class="swag-paypal-payment-detail__heading"> {{ $t('swag-paypal-payment.paymentDetails.payment.heading') }} </h3> {% endblock %} {% block swag_paypal_payment_detail_payment_list %} <sw-description-list class="swag-paypal-payment-detail__data" grid="1fr 1fr"> {% block swag_paypal_payment_detail_payment_list_intent %} <dt>{{ $t('swag-paypal-payment.paymentDetails.payment.intent') }}</dt> <dd>{{ $t(\`swag-paypal-settings.options.intent.\${paypalOrder.intent}\`) }}</dd> {% endblock %} {% block swag_paypal_payment_detail_payment_list_id %} <dt>{{ $t('swag-paypal-payment.paymentDetails.payment.paymentId') }}</dt> <dd>{{ paypalOrder.id }}</dd> {% endblock %} {% block swag_paypal_payment_detail_payment_list_status %} <dt>{{ $t('swag-paypal-payment.paymentDetails.payment.state') }}</dt> <dd>{{ paypalOrder.status }}</dd> {% endblock %} {% block swag_paypal_payment_detail_payment_list_create_time %} <template v-if="createDateTime"> <dt>{{ $t('swag-paypal-payment.paymentDetails.payment.createTime') }}</dt> <dd>{{ createDateTime }}</dd> </template> {% endblock %} {% block swag_paypal_payment_detail_payment_list_update_time %} <template v-if="updateDateTime"> <dt>{{ $t('swag-paypal-payment.paymentDetails.payment.updateTime') }}</dt> <dd>{{ updateDateTime }}</dd> </template> {% endblock %} </sw-description-list> {% endblock %} {% endblock %} {% block swag_paypal_payment_detail_customer %} <template v-if="payerId"> {% block swag_paypal_payment_detail_customer_heading %} <h3 class="swag-paypal-payment-detail__heading"> {{ $t('swag-paypal-payment.paymentDetails.customer.heading') }} </h3> {% endblock %} {% block swag_paypal_payment_detail_customer_list %} <sw-description-list class="swag-paypal-payment-detail__data" grid="1fr 1fr"> <dt>{{ $t('swag-paypal-payment.paymentDetails.customer.payerId') }}</dt> <dd>{{ payerId }}</dd> </sw-description-list> {% endblock %} </template> {% endblock %} {% endblock %} </sw-card-section> </template> </mt-card> {% block swag_paypal_payment_pui_details %} <swag-paypal-pui-details v-if="puiDetails" :details="puiDetails" :purchase-unit-amount="amount" /> {% endblock %} {% block swag_paypal_payment_transaction_history_card %} <mt-card position-identifier="swag-paypal-payment-transaction-history-v2" :title="$t('swag-paypal-payment.transactionHistory.cardTitle')" > <template #grid> {% block swag_paypal_payment_transaction_history_grid %} <sw-data-grid :dataSource="payments" :columns="paymentColumns" :showActions="false" :showSelection="false" /> {% endblock %} </template> </mt-card> {% endblock %} </div> {% endblock %}`,{Component:o0,Filter:l0}=Shopware;o0.register("swag-paypal-payment-details-v2",{template:s0,emits:["reload-paypal-order"],props:{paypalOrder:{type:Object,required:!0},orderTransaction:{type:Object,required:!0}},data(){return{payments:[],createDateTime:"",updateDateTime:"",currency:"",amount:{},payerId:"",refundableAmount:0,captureableAmount:0,showVoidButton:!1}},computed:{dateFilter(){return l0.getByName("date")},paymentColumns(){return[{property:"type",label:this.$t("swag-paypal-payment.transactionHistory.types.type"),rawData:!0},{property:"id",label:this.$t("swag-paypal-payment.transactionHistory.types.trackingId"),rawData:!0},{property:"total",label:this.$t("swag-paypal-payment.transactionHistory.types.amount"),rawData:!0},{property:"status",label:this.$t("swag-paypal-payment.transactionHistory.types.state"),rawData:!0},{property:"transactionFee",label:this.$t("swag-paypal-payment.transactionHistory.types.transactionFee"),rawData:!0},{property:"create",label:this.$t("swag-paypal-payment.transactionHistory.types.createTime"),rawData:!0},{property:"update",label:this.$t("swag-paypal-payment.transactionHistory.types.updateTime"),rawData:!0}]},puiDetails(){return this.orderTransaction.customFields.swag_paypal_pui_payment_instruction}},created(){this.createdComponent()},methods:{createdComponent(){var a;this.createDateTime=this.formatDate(this.paypalOrder.create_time),this.updateDateTime=this.formatDate(this.paypalOrder.update_time),this.amount=this.paypalOrder.purchase_units[0].amount,this.currency=this.amount.currency_code,this.payerId=((a=this.paypalOrder.payer)==null?void 0:a.payer_id)??"",this.setPayments()},setPayments(){const a=this.paypalOrder.purchase_units[0].payments;if(!a)return;const i=a.authorizations,r=a.captures,o=a.refunds;i&&i.forEach(c=>{this.pushPayment("authorization",c);const h=c.status;(h===YP||h===XP)&&(this.captureableAmount+=Number(c.amount.value),this.showVoidButton=!0),h===ZP&&(this.showVoidButton=!0)}),r&&r.forEach(c=>{this.pushPayment("capture",c);const h=Number(c.amount.value);this.refundableAmount+=h,this.captureableAmount-=h}),o&&o.forEach(c=>{this.pushPayment("refund",c),this.refundableAmount-=Number(c.amount.value)}),this.refundableAmount=this.formatAmount(this.refundableAmount),this.captureableAmount=this.formatAmount(this.captureableAmount)},pushPayment(a,i){this.payments.push({id:i.id,type:this.$t(`swag-paypal-payment.transactionHistory.states.${a}`),total:`${i.amount.value} ${i.amount.currency_code}`,create:this.formatDate(i.create_time),createRaw:i.create_time,update:this.formatDate(i.update_time),transactionFee:this.getTransactionFee(a,i),status:i.status}),this.payments.sort((r,o)=>{const c=new Date(r.createRaw),h=new Date(o.createRaw);return c-h})},getTransactionFee(a,i){var r,o;if(a==="capture"){const c=(r=i.seller_receivable_breakdown)==null?void 0:r.paypal_fee;if(c)return`${c.value} ${c.currency_code}`}if(a==="refund"){const c=(o=i.seller_payable_breakdown)==null?void 0:o.paypal_fee;if(c)return`${c.value} ${c.currency_code}`}return null},formatDate(a){return this.dateFilter(a,{hour:"2-digit",minute:"2-digit",second:"2-digit"})},formatAmount(a){return+`${Math.round(`${a}e2`)}e-2`}}});const c0=`{% block swag_paypal_pui_details %} <mt-card position-identifier="swag-paypal-pui-details" :title="$t('swag-paypal-payment.puiDetails.cardTitle')" > {% block swag_paypal_pui_details_textarea %} <div class="swag-paypal-pui-details__textarea"> <b>{{ $t('swag-paypal-payment.puiDetails.bank') }}</b> {{ bankName }}<br> <b>{{ $t('swag-paypal-payment.puiDetails.iban') }}</b> {{ iban }}<br> <b>{{ $t('swag-paypal-payment.puiDetails.bic') }}</b> {{ bic }}<br> <b>{{ $t('swag-paypal-payment.puiDetails.accountHolder') }}</b> {{ accountHolderName }}<br> <b>{{ $t('swag-paypal-payment.puiDetails.amount') }}</b> {{ amount }}<br> <b>{{ $t('swag-paypal-payment.puiDetails.reference') }}</b> {{ reference }}<br> </div> {% endblock %} {% block swag_paypal_pui_details_copy_button %} <mt-button class="swag-paypal-pui-details__copy-button" ghost size="small" variant="secondary" @click="onCopy" > {{ $t('swag-paypal-payment.puiDetails.buttonCopy') }} </mt-button> {% endblock %} </mt-card> {% endblock %}`,{Component:u0}=Shopware,p0=Shopware.Utils.dom;u0.register("swag-paypal-pui-details",{template:c0,props:{details:{type:Object,required:!0},purchaseUnitAmount:{type:Object,required:!0}},computed:{copyText(){return`${this.$t("swag-paypal-payment.puiDetails.bank")} ${this.bankName}
${this.$t("swag-paypal-payment.puiDetails.iban")} ${this.iban}
${this.$t("swag-paypal-payment.puiDetails.bic")} ${this.bic}
${this.$t("swag-paypal-payment.puiDetails.accountHolder")} ${this.accountHolderName}
${this.$t("swag-paypal-payment.puiDetails.amount")} ${this.amount}
${this.$t("swag-paypal-payment.puiDetails.reference")} ${this.reference}`},bankName(){return this.details.deposit_bank_details.bank_name},iban(){return this.details.deposit_bank_details.iban},bic(){return this.details.deposit_bank_details.bic},accountHolderName(){return this.details.deposit_bank_details.account_holder_name},reference(){return this.details.payment_reference},amount(){return`${this.purchaseUnitAmount.value} ${this.purchaseUnitAmount.currency_code}`}},methods:{async onCopy(){if(!(navigator!=null&&navigator.clipboard)){p0.copyToClipboard(this.copyText);return}await navigator.clipboard.writeText(this.copyText)}}});const d0=`{% block sw_order_detail_content_tabs_general %} {% parent %} <sw-tabs-item v-if="isPayPalPayment" :route="{ name: 'swag.paypal.payment.detail', params: { id: $route.params.id } }" :title="$t('swag-paypal-payment.tabs.order')" > {{ $t('swag-paypal-payment.tabs.order') }} </sw-tabs-item> {% endblock %} {% block sw_order_detail_actions_slot_smart_bar_actions %} <template v-if="isEditable"> {% parent %} </template> {% endblock %}`,{Component:h0}=Shopware,{isEmpty:f0}=Shopware.Utils.types;h0.override("sw-order-detail",{template:d0,computed:{isPayPalPayment(){var i,r,o,c;const a=(r=(i=this.order)==null?void 0:i.transactions)==null?void 0:r.last();return this.order&&!f0(a)&&(((o=a==null?void 0:a.customFields)==null?void 0:o.swag_paypal_order_id)||((c=a==null?void 0:a.customFields)==null?void 0:c.swag_paypal_transaction_id))},isEditable(){return!this.isPayPalPayment||this.$route.name!=="swag.paypal.payment.detail"}}});const g0=`{% block sw_order_detail_details_shipping_tracking_codes %} {% parent %} {% block sw_order_detail_details_shipping_paypal_carrier %} <div v-if="payPalResourceId" class="swag-paypal-order-carrier"> <mt-text-field v-model="payPalCarrier" disabled :label="$t('sw-order-detail.payPalCarrierLabel')" :helpText="$t('sw-order-detail.payPalCarrierHelpText')" :placeholder="$t('sw-order-detail.payPalCarrierPlaceholder')" /> <div class="swag-paypal-order-carrier__description" v-html="payPalCarrierDescription" /> </div> {% endblock %} {% endblock %}`,{Component:_0}=Shopware;_0.override("sw-order-detail-details",{template:g0,inject:["systemConfigApiService"],data(){return{isPayPalSandbox:!1}},computed:{transaction(){var a;return(a=this.order)==null?void 0:a.transactions.last()},payPalResourceId(){var a,i;return(i=(a=this.transaction)==null?void 0:a.customFields)==null?void 0:i.swag_paypal_resource_id},payPalCarrier(){var a,i,r,o;return((o=(r=(i=(a=this.order)==null?void 0:a.deliveries)==null?void 0:i.first().shippingMethod)==null?void 0:r.customFields)==null?void 0:o.swag_paypal_carrier)??""},payPalOrderLink(){return`https://${this.isPayPalSandbox?"sandbox":"www"}.paypal.com/activity/payment/${this.payPalResourceId}`},payPalCarrierDescription(){return this.$t("sw-order-detail.payPalCarrierDescription",{orderLink:this.payPalOrderLink},1)}},watch:{payPalResourceId:{async handler(a){if(!a)return;const i=await this.systemConfigApiService.getValues("SwagPayPal.settings",this.order.salesChannelId);Object.hasOwn(i,"SwagPayPal.settings.sandbox")&&(this.isPayPalSandbox=i["SwagPayPal.settings.sandbox"]);const r=await this.systemConfigApiService.getValues("SwagPayPal.settings");this.isPayPalSandbox=r["SwagPayPal.settings.sandbox"]},immediate:!0}}});const y0=`{% block sw_order_detail_base_secondary_info_order_overview_right_column_slot %} {% parent %} {% block sw_detail_base_secondary_info_order_overview_paypal_carrier %} <template v-if="payPalResourceId"> <dt> {{ $t('sw-order-detail.payPalCarrierLabel') }} <sw-help-text :text="$t('sw-order-detail.payPalCarrierHelpText')" /> </dt> <dd> <div> {{ payPalCarrier ? payPalCarrier : $t('sw-order-detail.payPalCarrierPlaceholder') }} </div> <div class="sw-user-card__paypal-carrier-description" v-html="payPalCarrierDescription" /> </dd> </template> {% endblock %} {% endblock %}`,{Component:m0}=Shopware;m0.override("sw-order-user-card",{template:y0,inject:["systemConfigApiService"],data(){return{isPayPalSandbox:!1}},computed:{transaction(){var a;return(a=this.currentOrder.transactions)==null?void 0:a.last()},payPalResourceId(){var a,i;return(i=(a=this.transaction)==null?void 0:a.customFields)==null?void 0:i.swag_paypal_resource_id},payPalCarrier(){var a,i,r;return((r=(i=(a=this.delivery)==null?void 0:a.shippingMethod)==null?void 0:i.customFields)==null?void 0:r.swag_paypal_carrier)??""},payPalOrderLink(){return`https://${this.isPayPalSandbox?"sandbox":"www"}.paypal.com/activity/payment/${this.payPalResourceId}`},payPalCarrierDescription(){return this.$t("sw-order-detail.payPalCarrierDescription",{orderLink:this.payPalOrderLink},1)}},watch:{payPalResourceId:{async handler(a){if(!a)return;const i=await this.systemConfigApiService.getValues("SwagPayPal.settings",this.currentOrder.salesChannelId);Object.hasOwn(i,"SwagPayPal.settings.sandbox")&&(this.isPayPalSandbox=i["SwagPayPal.settings.sandbox"]);const r=await this.systemConfigApiService.getValues("SwagPayPal.settings");this.isPayPalSandbox=r["SwagPayPal.settings.sandbox"]},immediate:!0}}});const w0=`{% block swag_paypal_payment_detail %} <div v-if="isLoading || loading" class="swag-paypal-payment-detail"> {% block swag_paypal_payment_detail_loading_state %} <sw-skeleton /> <sw-skeleton /> {% endblock %} </div> <div v-else-if="!hasPayPalDetails" class="swag-paypal-payment-detail"> {% block swag_paypal_payment_detail_error_page %} {% block swag_paypal_payment_detail_error_page_cancelled %} <sw-empty-state v-if="stateFailedCancelled" :title="$t('swag-paypal-payment.errorPage.title')" :subline="$t('swag-paypal-payment.errorPage.canceledPaymentContent')" :absolute="false" icon="regular-shopping-bag" color="#A092F0" /> {% endblock %} {% block swag_paypal_payment_detail_error_page_other %} <sw-empty-state v-else :title="$t('swag-paypal-payment.errorPage.title')" :subline="$t('swag-paypal-payment.errorPage.other')" :absolute="false" icon="regular-shopping-bag" color="#A092F0" /> {% endblock %} {% endblock %} </div> <div v-else class="swag-paypal-payment-detail"> {% block swag_paypal_payment_detail_components %} {% block swag_paypal_payment_detail_details_v1 %} <swag-paypal-payment-details-v1 v-if="!!paymentResource" :paymentResource="paymentResource" :orderId="order.id" /> {% endblock %} {% block swag_paypal_payment_detail_details_v2 %} <swag-paypal-payment-details-v2 v-if="!!paypalOrder" :paypalOrder="paypalOrder" :orderTransaction="orderTransaction" :orderTransactionId="orderTransaction.id" :paypalPartnerAttributionId="orderTransaction.customFields.swag_paypal_partner_attribution_id" @reloadPaypalOrder="fetchPayPalDetails" /> {% endblock %} {% endblock %} </div> {% endblock %}`,{Component:v0,Filter:b0}=Shopware,{isEmpty:S0}=Shopware.Utils.types;v0.register("swag-paypal-payment-detail",{template:w0,inject:["SwagPayPalPaymentService","SwagPayPalOrderService","repositoryFactory"],mixins:[Shopware.Mixin.getByName("notification")],props:{isLoading:{type:Boolean,required:!0}},data(){return{loading:!1,paypalOrder:null,paymentResource:null}},computed:{order(){return Shopware.Store.get("swOrderDetail").order},orderTransaction(){return this.order.transactions.last()},dateFilter(){return b0.getByName("date")},stateFailedCancelled(){return["cancelled","failed"].includes(this.orderTransaction.stateMachineState.technicalName)},hasPayPalDetails(){return!!this.paypalOrder||!!this.paymentResource}},watch:{order:{immediate:!0,handler(){this.paypalOrder=null,this.paymentResource=null,this.fetchPayPalDetails()}}},methods:{async fetchPayPalDetails(){if(!this.order||S0(this.orderTransaction.customFields))return;this.loading=!0;const a=this.orderTransaction.customFields.swag_paypal_transaction_id;a&&await this.handlePayPalPayment(a);const i=this.orderTransaction.customFields.swag_paypal_order_id;i&&await this.handlePayPalOrder(i)},handlePayPalOrder(a){return this.SwagPayPalOrderService.getOrderDetails(this.orderTransaction.id,a).then(i=>{this.paypalOrder=i,this.loading=!1}).catch(this.handleError)},handlePayPalPayment(a){return this.SwagPayPalPaymentService.getPaymentDetails(this.order.id,a).then(i=>{this.paymentResource=i,this.loading=!1}).catch(this.handleError)},handleError(a){try{this.createNotificationError({message:`${this.$t("swag-paypal-payment.paymentDetails.error.title")}: ${a.response.data.errors[0].detail}`,autoClose:!1})}catch{this.createNotificationError({message:`${this.$t("swag-paypal-payment.paymentDetails.error.title")}: ${a.message}`,autoClose:!1})}finally{this.loading=!1}}}});const{Module:C0}=Shopware;C0.register("swag-paypal-payment",{type:"plugin",name:"SwagPayPal",title:"swag-paypal-payment.general.title",description:"swag-paypal-payment.general.descriptionTextModule",version:"1.0.0",targetVersion:"1.0.0",color:"#2b52ff",routeMiddleware(a,i){i.name==="sw.order.detail"&&i.children.push({component:"swag-paypal-payment-detail",name:"swag.paypal.payment.detail",isChildren:!0,path:"/sw/order/detail/:id/paypal",meta:{parentPath:"sw.order.index",privilege:"order.viewer"}}),a(i)}});const P0='{% block swag_paypal_pos_status %} <mt-card position-identifier="swag-paypal-pos-status" :class="statusClasses" :isLoading="isLoading" :title="title"> {% block swag_paypal_pos_status_icon %} <div class="swag-paypal-pos-status__icon-base"> <mt-icon :class="iconClasses" :name="icon" /> </div> {% endblock %} {% block swag_paypal_pos_status_status %} <div class="swag-paypal-pos-status__status"> <slot name="status"> {{ status }} </slot> </div> {% endblock %} {% block swag_paypal_pos_status_detail %} <div class="swag-paypal-pos-status__detail"> <slot name="detail" /> </div> {% endblock %} {% block swag_paypal_pos_status_substatus %} <div v-if="showSubStatus" class="swag-paypal-pos-status__substatus"> {% block swag_paypal_pos_status_substatus_icon %} <mt-icon v-if="showSubIcon" :class="subIconClasses" :name="subIcon" /> {% endblock %} {% block swag_paypal_pos_status_substatus_content %} <span> <slot name="substatus" /> </span> {% endblock %} </div> {% endblock %} {% block swag_paypal_pos_status_actions %} <div class="swag-paypal-pos-status__actions"> <slot name="actions" /> </div> {% endblock %} {% block swag_paypal_pos_status_disabled %} <div v-if="disabled" class="swag-paypal-pos-status__disabled"> <slot name="disabledText"> {{ disabledText }} </slot> </div> {% endblock %} </mt-card> {% endblock %}',{Component:A0}=Shopware;A0.register("swag-paypal-pos-status",{template:P0,props:{title:{type:String,required:!1,default:""},status:{type:String,required:!0},disabled:{type:Boolean,required:!1,default:!1},disabledText:{type:String,required:!1,default:""},icon:{type:String,required:!0},iconAnimated:{type:Boolean,required:!1,default:!1},subIcon:{type:String,required:!1,default:""},showSubStatus:{type:Boolean,required:!1,default:!1},isLoading:{type:Boolean,required:!0},variant:{type:String,default:"info",validValues:["info","warning","error","success"],validator(a){return["info","warning","error","success"].includes(a)}},subVariant:{type:String,default:"info",validValues:["info","warning","error","success"],validator(a){return["info","warning","error","success"].includes(a)}}},computed:{statusClasses(){return{"swag-paypal-pos-status":!0,[`swag-paypal-pos-status--${this.variant}`]:!0,"swag-paypal-pos-status--disabled":this.disabled}},iconClasses(){return{"swag-paypal-pos-status__icon":!0,"swag-paypal-pos-status__icon-animated":this.iconAnimated}},subIconClasses(){return["swag-paypal-pos-status__subicon",`swag-paypal-pos-status--${this.subVariant}`]},showSubIcon(){return this.subIcon!==null&&this.subIcon!==void 0&&this.subIcon!==this.icon}}});const I0=`{% block swag_paypal_pos_account %} <mt-card class="swag-paypal-pos-account" position-identifier="swag-paypal-pos-account" :title="$t('sw-sales-channel.detail.titleAccount')" :isLoading="isLoading"> {% block swag_paypal_pos_account_grid %} <sw-container columns="min-content 1fr" align="center"> {% block swag_paypal_pos_account_grid_logo %} <img class="swag-paypal-pos-account__logo" alt="Zettle Logo" :src="assetFilter('/swagpaypal/administration/static/img/paypal-pos-logo.svg')"> {% endblock %} {% block swag_paypal_pos_account_grid_container %} <div class="swag-paypal-pos-account__container"> {% block swag_paypal_pos_account_grid_container_info %} <div class="swag-paypal-pos-account__account-info"> {% block swag_paypal_pos_account_grid_container_info_name %} <div class="swag-paypal-pos-account__name"> {{ accountName }} </div> {% endblock %} {% block swag_paypal_pos_account_grid_container_info_email %} <div class="swag-paypal-pos-account__email"> {{ accountEmail }} </div> {% endblock %} {% block swag_paypal_pos_account_grid_container_info_link %} <sw-external-link href="https://my.zettle.com" class="swag-paypal-pos-account__manage-link"> {% block swag_paypal_pos_account_grid_container_info_link_text %} {{ $t('swag-paypal-pos.account.manageAccount') }} {% endblock %} </sw-external-link> {% endblock %} {% block swag_paypal_pos_account_grid_container_info_edit_button %} {# ToDo PPI-109 - Implement edit connection functionality #} <mt-button v-if="false" class="swag-paypal-pos-account__edit-connection-button" size="small" block variant="secondary"> {{ $t('swag-paypal-pos.account.editConnection') }} </mt-button> {% endblock %} </div> {% endblock %} {% block swag_paypal_pos_account_grid_container_status %} <div class="swag-paypal-pos-account__status-container"> {% block swag_paypal_pos_account_grid_container_status_label %} <sw-label class="swag-paypal-pos-account__status-label" size="medium" appearance="pill" :variant="connectionStatusVariant" :ghost="false" :caps="false"> {% block swag_paypal_pos_account_grid_container_status_label_badge %} <sw-color-badge class="swag-paypal-pos-account__status-color-badge" rounded :variant="connectionStatusVariant" /> {% endblock %} {% block swag_paypal_pos_account_grid_container_status_label_text %} <span class="swag-paypal-pos-account__status-text"> {{ connectionStatusText }} </span> {% endblock %} </sw-label> {% endblock %} {% block swag_paypal_pos_account_grid_container_status_updated %} <div v-if="lastRun" class="swag-paypal-pos-account__status-updated"> {{ $t('swag-paypal-pos.account.lastUpdated') }} {{ dateFilter(lastRun.updatedAt, { hour: '2-digit', minute: '2-digit', second: '2-digit', day: '2-digit', month: 'short', year: 'numeric' }) }} </div> {% endblock %} </div> {% endblock %} </div> {% endblock %} </sw-container> {% endblock %} </mt-card> {% endblock %}`,{Component:E0}=Shopware;E0.register("swag-paypal-pos-account",{template:I0,inject:["SwagPayPalPosSettingApiService","repositoryFactory"],props:{salesChannel:{type:Object,require:!1,default:null},lastRun:{type:Object,require:!1,default:null}},data(){return{isLoading:!1,isError:!1,merchantInfo:null}},computed:{assetFilter(){return Shopware.Filter.getByName("asset")},accountName(){return this.isError?this.$t("swag-paypal-pos.account.errorName"):this.merchantInfo?this.merchantInfo.name:this.$t("swag-paypal-pos.account.loadingName")},accountEmail(){return this.isError?this.$t("swag-paypal-pos.account.errorEmail"):this.merchantInfo?this.merchantInfo.contactEmail:this.$t("swag-paypal-pos.account.loadingEmail")},connectionStatusText(){return this.isError?this.$t("swag-paypal-pos.account.noConnectionStatus"):this.$t("swag-paypal-pos.account.connectedStatus")},connectionStatusVariant(){return this.isError?"danger":"success"},runRepository(){return this.repositoryFactory.create("swag_paypal_pos_sales_channel_run")},dateFilter(){return Shopware.Filter.getByName("date")}},watch:{salesChannel(){this.loadMerchantData()}},created(){this.createdComponent()},methods:{createdComponent(){this.loadMerchantData()},loadMerchantData(){return this.isError=!1,this.isLoading=!0,this.salesChannel===null?Promise.resolve():this.SwagPayPalPosSettingApiService.fetchInformation(this.salesChannel).then(({merchantInformation:a})=>{this.merchantInfo=a,this.isError=!1}).catch(()=>{this.merchantInfo=null,this.isError=!0}).finally(()=>{this.isLoading=!1})}}});const k0=`{% block swag_paypal_pos_status_view %} <swag-paypal-pos-status :disabled="disabled" :disabledText="$t('swag-paypal-pos.detail.overview.status.disabled')" :icon="statusIcon" :subIcon="statusIconComplete" :iconAnimated="isSyncing" :isLoading="isLoading || status === null" :status="statusTitle" :showSubStatus="incompleteLastRun" :title="$t('swag-paypal-pos.detail.overview.titleSync')" :variant="statusVariant" :subVariant="statusCompleteErrorLevel"> {% block swag_paypal_pos_status_view_actions %} <template #actions> <slot name="actions" /> </template> {% endblock %} {% block swag_paypal_pos_status_view_detail %} <template v-if="isSyncing" #detail> {% block swag_paypal_pos_status_view_detail_syncing %} {{ $t('swag-paypal-pos.detail.overview.status.syncingDetail') }} {% endblock %} </template> <template v-if="!isSyncing && lastFinishedRun" #detail> <div> {% block swag_paypal_pos_status_view_detail_static %} {{ $t('swag-paypal-pos.detail.overview.status.lastSynced') }}: {{ dateFilter(lastFinishedRun.updatedAt, { hour: '2-digit', minute: '2-digit', second: '2-digit', day: '2-digit', month: 'short', year: 'numeric' }) }} {% endblock %} </div> {% block swag_paypal_pos_status_view_detail_errors %} <mt-banner v-if="syncErrors" variant="critical" :closable="true" :title="$t('swag-paypal-pos.detail.overview.syncErrorTitle')"> <ul> <li v-for="error in syncErrors"> {{ error.detail }} ({{ error.code }}) </li> </ul> </mt-banner> {% endblock %} </template> {% endblock %} {% block swag_paypal_pos_status_view_substatus %} <template v-if="incompleteLastRun" #substatus> {{ $t('swag-paypal-pos.detail.overview.status.lastSyncedComplete') }}: {{ dateFilter(lastCompleteRun.updatedAt, { hour: '2-digit', minute: '2-digit', second: '2-digit', day: '2-digit', month: 'short', year: 'numeric' }) }} </template> {% endblock %} </swag-paypal-pos-status> {% endblock %}`,{Component:R0}=Shopware;R0.register("swag-paypal-pos-status-view",{template:k0,props:{lastFinishedRun:{type:Object,required:!1,default:null},lastCompleteRun:{type:Object,required:!1,default:null},isLoading:{type:Boolean,default:!1},isSyncing:{type:Boolean,default:!1},salesChannel:{type:Object,required:!1,default:null},syncErrors:{type:Array,required:!1,default:null}},data(){return{statusErrorLevel:null,statusCompleteErrorLevel:null,iconConfig:{syncing:"regular-sync",warning:"regular-exclamation-triangle",error:"regular-times-xs",success:"regular-checkmark",noRunYet:"regular-blocked-circle"}}},computed:{status(){return this.isSyncing?"syncing":this.noRunYet?"noRunYet":this.statusErrorLevel},statusVariant(){return this.isSyncing||this.noRunYet?"info":this.statusErrorLevel},statusIcon(){return this.iconConfig[this.status]||"regular-info-circle"},statusIconComplete(){return this.iconConfig[this.statusCompleteErrorLevel]},noRunYet(){return this.salesChannel===null||this.salesChannel.id===null||this.lastFinishedRun===null},incompleteLastRun(){return this.salesChannel!==null&&this.salesChannel.id!==null&&this.lastFinishedRun!==null&&this.lastCompleteRun!==null&&this.lastFinishedRun.id!==this.lastCompleteRun.id},statusTitle(){let a=this.$t(`swag-paypal-pos.detail.overview.status.message.${this.status}`);if(this.incompleteLastRun){const i=this.$t(`swag-paypal-pos.detail.overview.status.task.${this.lastFinishedRun.task}`);this.isSyncing||(a+=` (${i})`)}return this.lastFinishedRun&&this.lastFinishedRun.status==="cancelled"&&!this.isSyncing&&(a=this.$t("swag-paypal-pos.detail.overview.status.message.aborted")),a},disabled(){return this.salesChannel!==null&&this.salesChannel.id!==null&&this.salesChannel.active===!1},dateFilter(){return Shopware.Filter.getByName("date")}},watch:{lastFinishedRun:{handler(){this.statusErrorLevel=this.getHighestLevel(this.lastFinishedRun)},immediate:!0},lastCompleteRun:{handler(){this.statusCompleteErrorLevel=this.getHighestLevel(this.lastCompleteRun)},immediate:!0}},methods:{getHighestLevel(a){if(a===null)return null;if(a.status==="cancelled")return"info";const i=Math.max(...a.logs.map(r=>r.level));return i>=400?"error":i>=300?"warning":"success"}}});const $0='{% block swag_paypal_pos_boolean_radio %} <sw-radio-field v-model:value="castedValue" v-bind="$attrs" class="swag-paypal-pos-boolean-radio" :name="name" :options="options" /> {% endblock %}',{Component:T0}=Shopware,x0=Shopware.Utils;T0.register("swag-paypal-pos-boolean-radio",{template:$0,inject:["feature"],emits:["update:value"],props:{value:{type:Boolean,required:!1,default:!1},optionTrue:{type:Object,required:!0,validator(a){return Object.hasOwn(a,"name")}},optionFalse:{type:Object,required:!0,validator(a){return Object.hasOwn(a,"name")}}},data(){return{inputId:x0.createId()}},computed:{options(){return[{value:!0,...this.optionTrue},{value:!1,...this.optionFalse}]},castedValue:{get(){return this.value},set(a){this.$emit("update:value",a)}},name(){return`swag-paypal-pos-boolean-radio-${this.inputId}`}}});const L0=`{% block swag_paypal_pos_detail_logs %} {% block swag_paypal_pos_detail_logs_grid %} <sw-data-grid identifier="swag-paypal-pos-detail-logs" :columns="columns" :dataSource="logs" :isLoading="isLoading || loadingLogs" :showActions="true" :showSelection="false" :showSettings="true" :allowColumnEdit="true" :sortBy="sortBy" :sortDirection="sortDirection" :skeletonItemAmount="limit" @column-sort="onSortColumn"> {% block swag_paypal_pos_detail_logs_grid_pagination %} <template #pagination> <sw-pagination :limit="limit" :page="page" :total="total" :total-visible="7" @page-change="onPageChange" /> </template> {% endblock %} {% block swag_paypal_pos_detail_logs_grid_column_date %} <template #column-date="{ item }"> {% block swag_paypal_pos_detail_logs_grid_column_date_formatted %} <template v-if="item.createdAt"> {{ dateFilter(item.createdAt, { hour: '2-digit', minute: '2-digit', day: '2-digit', month: '2-digit', year: '2-digit' }) }} </template> {% endblock %} {% block swag_paypal_pos_detail_logs_grid_column_date_empty %} <template v-else> {{ $t('swag-paypal-pos.detail.logs.noEntry') }} </template> {% endblock %} </template> {% endblock %} {% block swag_paypal_pos_detail_logs_grid_column_state %} <template #column-state="{ item }"> {% block swag_paypal_pos_detail_logs_grid_column_state_label %} <sw-label v-if="item.level" appearance="pill" :variant="getLabelVariantForItem(item)"> {{ $t(getLabelForItem(item)) }} </sw-label> {% endblock %} </template> {% endblock %} </sw-data-grid> {% endblock %} {% endblock %}`,{Component:O0,Context:D0}=Shopware,{Criteria:On}=Shopware.Data;O0.register("swag-paypal-pos-detail-logs",{template:L0,inject:["SwagPayPalPosApiService","repositoryFactory"],mixins:[Shopware.Mixin.getByName("notification"),Shopware.Mixin.getByName("swag-paypal-pos-log-label"),Shopware.Mixin.getByName("listing")],props:{runId:{type:String,required:!0}},data(){return{logs:[],limit:10,sortBy:"createdAt",sortDirection:"DESC",loadingLogs:!1,isLoading:!1,disableRouteParams:!0}},computed:{logRepository(){return this.repositoryFactory.create("swag_paypal_pos_sales_channel_run_log")},columns(){return[{property:"date",dataIndex:"createdAt",label:"swag-paypal-pos.detail.syncedProducts.columns.date",width:"140px",sortable:!0},{property:"state",dataIndex:"level",label:"swag-paypal-pos.detail.syncedProducts.columns.state",width:"120px",sortable:!0},{property:"message",dataIndex:"message",label:"swag-paypal-pos.detail.logs.columnLastSync",sortable:!0}]},dateFilter(){return Shopware.Filter.getByName("date")}},methods:{getListCriteria(){const a=this.getMainListingParams(),i=new On(this.page,this.limit);return i.addFilter(On.equals("runId",this.runId)),i.addAssociation("posSalesChannelRun"),i.addSorting(On.sort(a.sortBy,a.sortDirection,a.naturalSorting)),i.addSorting(On.sort("level","DESC")),i.addSorting(On.sort("createdAt","DESC")),i},getList(){return this.loadingLogs=!0,this.logRepository.search(this.getListCriteria(),D0.api).then(a=>{this.logs=a,this.total=a.total,this.page=a.criteria.page,this.limit=a.criteria.limit,this.loadingLogs=!1})},getLabelVariantForItem(a){return a.posSalesChannelRun&&a.posSalesChannelRun.status==="cancelled"?"info":this.getLabelVariant(a.level)},getLabelForItem(a){return a.posSalesChannelRun&&a.posSalesChannelRun.status==="cancelled"?"swag-paypal-pos.detail.logs.states.aborted":this.getLabel(a.level)}}});const N0=`{% block swag_paypal_pos_getting_started %} <mt-card position-identifier="swag-paypal-pos-getting-started" :title="$t('swag-paypal-pos.gettingStarted.cardTitle')"> {% block swag_paypal_pos_getting_started_reader %} <sw-container class="swag-paypal-pos-getting-started__container-reader" columns="1fr 3fr" justify="left" align="center"> {% block swag_paypal_pos_getting_started_reader_image %} <img class="swag-paypal-pos-getting-started__image" :src="assetFilter('swagpaypal/administration/static/img/paypal-pos-reader.png')" :alt="$t('swag-paypal-pos.gettingStarted.readerImageAlt')"> {% endblock %} {% block swag_paypal_pos_getting_started_reader_description %} <div class="swag-paypal-pos-getting-started__description"> {% block swag_paypal_pos_getting_started_reader_description_headline %} <div class="swag-paypal-pos-getting-started__description-headline"> {{ $t('swag-paypal-pos.gettingStarted.readerHeadline') }} </div> {% endblock %} {% block swag_paypal_pos_getting_started_reader_description_text %} <div class="swag-paypal-pos-getting-started__description-text"> {{ $t('swag-paypal-pos.gettingStarted.readerText') }} {% block swag_paypal_pos_getting_started_reader_description_link %} <sw-external-link :href="$t('swag-paypal-pos.gettingStarted.readerLinkTarget')" class="swag-paypal-pos-getting-started__description-text-link"> {{ $t('swag-paypal-pos.gettingStarted.readerLinkText') }} </sw-external-link> {% endblock %} </div> {% endblock %} </div> {% endblock %} </sw-container> {% endblock %} {% block swag_paypal_pos_getting_started_app %} <sw-container class="swag-paypal-pos-getting-started__container-app" columns="1fr 3fr" justify="left" align="center"> {% block swag_paypal_pos_getting_started_app_image %} <img class="swag-paypal-pos-getting-started__image" :src="assetFilter('swagpaypal/administration/static/img/paypal-pos-app.png')" :alt="$t('swag-paypal-pos.gettingStarted.appImageAlt')"> {% endblock %} {% block swag_paypal_pos_getting_started_app_description %} <div class="swag-paypal-pos-getting-started__description "> {% block swag_paypal_pos_getting_started_app_description_headline %} <div class="swag-paypal-pos-getting-started__description-headline"> {{ $t('swag-paypal-pos.gettingStarted.appHeadline') }} </div> {% endblock %} {% block swag_paypal_pos_getting_started_app_description_text %} <div class="swag-paypal-pos-getting-started__description-text" v-html="$t('swag-paypal-pos.gettingStarted.appText')" /> {% endblock %} </div> {% endblock %} </sw-container> {% endblock %} </mt-card> {% endblock %}`,{Component:z0}=Shopware;z0.register("swag-paypal-pos-getting-started",{template:N0,computed:{assetFilter(){return Shopware.Filter.getByName("asset")}}});const q0=`{% block swag_paypal_pos_continue_setup %} <mt-card position-identifier="swag-paypal-pos-continue-setup" :title="$t('swag-paypal-pos.detail.overview.continueSetup.cardTitle')"> {% block swag_paypal_pos_continue_setup_container %} <div class="swag-paypal-pos__continue-setup"> {% block swag_paypal_pos_continue_setup_container_headline %} <h6>{{ $t('swag-paypal-pos.detail.overview.continueSetup.content.headline') }}</h6> {% endblock %} {% block swag_paypal_pos_continue_setup_container_firstLine %} <p>{{ $t('swag-paypal-pos.detail.overview.continueSetup.content.firstLine') }}</p> {% endblock %} {% block swag_paypal_pos_continue_setup_container_secondLine %} <p>{{ $t('swag-paypal-pos.detail.overview.continueSetup.content.secondLine') }}</p> {% endblock %} </div> {% endblock %} {% block swag_paypal_pos_continue_setup_button %} <mt-button ghost variant="secondary" @click="onContinueSetup" > {{ $t('swag-paypal-pos.detail.overview.continueSetup.content.headline') }} </mt-button> {% endblock %} </mt-card> {% endblock %}`,{Component:F0}=Shopware;F0.register("swag-paypal-pos-continue-setup",{template:q0,methods:{onContinueSetup(){this.$router.push({name:"swag.paypal.pos.wizard.customization",params:{id:this.$route.params.id}})}}});const B0=`<mt-text-field v-bind="$attrs" :model-value="value" @update:model-value="updateValue" > <template #prefix> <mt-icon name="solid-lock" color="var(--color-icon-positive-default)" size="var(--scale-size-12)" aria-hidden="true" /> https:// </template> <template #hint> <p v-if="url === null" style="color: var(--color-text-critical-default)"> {{ $t('swag-paypal-pos.detail.settings.domainError') }} </p> </template> </mt-text-field>`,M0={};Shopware.Component.register("swag-paypal-pos-url-field",{template:B0,emits:["update:model-value"],props:{modelValue:{type:String,required:!1,default:null}},data(){return{value:""}},computed:{url(){if(!this.value)return"";try{const a=new URL(this.value.startsWith("http")?this.value:`https://${this.value}`);return a.protocol="https:",a.toString().replace(a.hash||a.search?"":/\/$/,"")}catch{return null}}},watch:{modelValue:{handler(a){this.updateValue(a??"")},immediate:!0},url(a){a!==null&&this.$emit("update:model-value",a)}},methods:{updateValue(a){this.value=decodeURI(M0.toUnicode(a.replace(/^https?:\/\//,"")))}}});const Nc="1ce0868f406d47d98cfe4b281e62f099",gg="paypalPosSalesChannel",{Component:U0}=Shopware;U0.override("sw-sales-channel-menu",{computed:{buildMenuTree(){const a=this.$super("buildMenuTree"),i=[];return this.salesChannels.forEach(r=>{r.type.id===Nc&&i.push(r.id)}),a.forEach(r=>{i.includes(r.id)&&(r.path="swag.paypal.pos.detail")}),a}}});const{Component:j0}=Shopware;j0.override("sw-sales-channel-modal",{methods:{onAddChannel(a){if(this.isPayPalPosSalesChannel(a)){this.onCloseModal(),this.$router.push({name:"swag.paypal.pos.wizard"});return}this.$super("onAddChannel",a)},isPayPalPosSalesChannel(a){return a===Nc}}});const H0=`{% block swag_paypal_pos %} <sw-page class="swag-paypal-pos"> {% block swag_paypal_pos_header %} <template #smart-bar-header> <h2> {{ $t('swag-paypal-pos.header') }} </h2> </template> {% endblock %} {% block swag_paypal_pos_actions %} <template #smart-bar-actions> <mt-button v-for="button in buttonConfig" size="small" :disabled="button.disabled" :isLoading="button.isLoading || isLoading" :variant="button.variant" @click="onButtonClick(button.action)"> {{ button.label }} </mt-button> </template> {% endblock %} {% block swag_paypal_pos_content %} <template #content> <sw-card-view> {% block swag_paypal_pos_content_tabs %} <sw-tabs v-if="!isLoading" position-identifier="swag_paypal_pos_content_tabs" class="swag-paypal-pos__tabs"> {% block swag_paypal_pos_content_tab_base %} <sw-tabs-item :route="{ name: 'swag.paypal.pos.detail.overview', params: { id: $route.params.id } }" :title="$t('swag-paypal-pos.tabTitle.overview')"> {{ $t('swag-paypal-pos.tabTitle.overview') }} </sw-tabs-item> {% endblock %} {% block swag_paypal_pos_content_tab_synced_products %} <sw-tabs-item :route="{ name: 'swag.paypal.pos.detail.syncedProducts', params: { id: $route.params.id } }" :title="$t('swag-paypal-pos.tabTitle.syncedProducts')"> {{ $t('swag-paypal-pos.tabTitle.syncedProducts') }} </sw-tabs-item> {% endblock %} {% block swag_paypal_pos_content_tab_settings %} <sw-tabs-item :route="{ name: 'swag.paypal.pos.detail.settings', params: { id: $route.params.id } }" :title="$t('swag-paypal-pos.tabTitle.settings')"> {{ $t('swag-paypal-pos.tabTitle.settings') }} </sw-tabs-item> {% endblock %} {% block swag_paypal_pos_content_tab_runs %} <sw-tabs-item :route="{ name: 'swag.paypal.pos.detail.runs', params: { id: $route.params.id } }" :title="$t('swag-paypal-pos.tabTitle.runs')"> {{ $t('swag-paypal-pos.tabTitle.runs') }} </sw-tabs-item> {% endblock %} {% block swag_paypal_pos_content_tab_help %} <sw-tabs-item href="https://www.izettle.com/help/articles/1083274-what-is-pos" target="_blank" class="swag-paypal-pos__tab-help" :title="$t('swag-paypal-pos.tabTitle.help')"> {{ $t('swag-paypal-pos.tabTitle.help') }} </sw-tabs-item> {% endblock %} </sw-tabs> {% endblock %} {% block swag_paypal_pos_content_account %} <swag-paypal-pos-account :lastRun="lastRun" :salesChannel="salesChannel" /> {% endblock %} {% block swag_paypal_pos_content_card %} <router-view v-if="!isLoading" :key="$route.params.id" v-slot="{ Component }"> <component :is="Component" :salesChannel="salesChannel" :cloneSalesChannelId="cloneSalesChannelId" :lastRun="lastRun" :lastCompleteRun="lastCompleteRun" @buttons-update="updateButtons" @load-sales-channel="loadSalesChannel" @run-update="loadLastRun" @update-clone-sales-channel="updateCloneSalesChannel" /> </router-view> <sw-loader v-if="isLoading" /> {% endblock %} {% block swag_paypal_pos_disclaimer %} <div v-show="!isLoading" class="swag-paypal-pos__disclaimer"> {% block swag_paypal_pos_disclaimer_title %} <div class="swag-paypal-pos__disclaimer-title disclaimer-content"> {{ $t('swag-paypal-pos.detail.disclaimer.headline') }} </div> {% endblock %} {% block swag_paypal_pos_disclaimer_subtitle %} <div class="swag-paypal-pos__disclaimer-subtitle disclaimer-content"> {{ $t('swag-paypal-pos.detail.disclaimer.subheadline') }} </div> {% endblock %} {% block swag_paypal_pos_disclaimer_link %} <a :href="$t('swag-paypal-pos.detail.disclaimer.linkTarget')" class="link swag-paypal-pos__disclaimer-link disclaimer-content" target="_blank"> {{ $t('swag-paypal-pos.detail.disclaimer.linkText') }} </a> {% endblock %} </div> {% endblock %} </sw-card-view> </template> {% endblock %} </sw-page> {% endblock %}`,{Component:G0}=Shopware,{Criteria:Oa}=Shopware.Data;G0.register("swag-paypal-pos",{template:H0,inject:["salesChannelService","repositoryFactory"],mixins:[Shopware.Mixin.getByName("placeholder")],data(){return{isLoading:!1,previousApiKey:null,salesChannel:{},lastRun:null,lastCompleteRun:null,cloneSalesChannelId:null,buttonConfig:[]}},metaInfo(){return{title:this.title}},computed:{title(){return[this.$t("global.sw-admin-menu.textShopwareAdmin"),this.$t("sw-sales-channel.general.titleMenuItems"),this.$t("swag-paypal-pos.general.moduleTitle")].reverse().join(" | ")},paypalPosSalesChannelRepository(){return this.repositoryFactory.create("swag_paypal_pos_sales_channel")},salesChannelRepository(){return this.repositoryFactory.create("sales_channel")},runRepository(){return this.repositoryFactory.create("swag_paypal_pos_sales_channel_run")},salesChannelCriteria(){const a=new Oa(1,500);return a.addAssociation(gg),a.addAssociation("countries"),a.addAssociation("currencies"),a.addAssociation("domains"),a.addAssociation("languages"),a}},watch:{"$route.params.id"(){this.loadSalesChannel()}},created(){this.createdComponent()},methods:{createdComponent(){this.loadSalesChannel()},loadSalesChannel(){return this.$route.params.id?(this.salesChannel&&(this.salesChannel=null),this.isLoading=!0,this.salesChannelRepository.get(this.$route.params.id,Shopware.Context.api,this.salesChannelCriteria).then(a=>{this.salesChannel=a,this.previousApiKey=a.extensions.paypalPosSalesChannel.apiKey,this.updateRun(),this.isLoading=!1})):Promise.resolve()},updateCloneSalesChannel(a){this.cloneSalesChannelId=a},updateButtons(a){this.buttonConfig=a},onButtonClick(a){if(typeof a=="string"){this.redirect(a);return}typeof a=="function"&&a.call()},updateRun(){return setTimeout(this.updateRun,2e4),this.loadLastRun()},loadLastRun(a=!1){const i=new Oa(1,1);return i.addFilter(Oa.equals("salesChannelId",this.salesChannel.id)),i.addFilter(Oa.not("AND",[Oa.equals("status","in_progress")])),i.addSorting(Oa.sort("createdAt","DESC")),a?i.addFilter(Oa.equals("task","complete")):i.addAssociation("logs"),this.runRepository.search(i,Shopware.Context.api).then(r=>{if(a){this.lastCompleteRun=r.first(),this.$forceUpdate();return}this.lastRun=r.first(),this.lastRun!==null&&this.lastRun.task!=="complete"?this.loadLastRun(!0):this.lastCompleteRun=this.lastRun,this.$forceUpdate()})}}});const W0=`{% block swag_paypal_pos_synced_products %} <div class="swag-paypal-pos-detail-synced-products"> {% block swag_paypal_pos_synced_products_grid %} <mt-card position-identifier="swag-paypal-pos-synced-products-grid" :title="$t('swag-paypal-pos.detail.syncedProducts.title')" :isLoading="isLoading"> {% block swag_paypal_pos_synced_products_grid %} <template #grid> <sw-data-grid v-if="total > 0" identifier="swag-paypal-pos-detail-synced-products" :dataSource="products" :columns="columns" :isLoading="isLoading" :showActions="actions.length > 0" :showSelection="false" :showSettings="true" :allowColumnEdit="true" :sortBy="sortBy" :sortDirection="sortDirection" :skeletonItemAmount="limit" @column-sort="onSortColumn"> {% block swag_paypal_pos_synced_products_grid_pagination %} <template #pagination> <sw-pagination :limit="limit" :page="page" :total="total" :total-visible="7" @page-change="onPageChange" /> </template> {% endblock %} {% block swag_paypal_pos_synced_products_grid_column_date %} <template #column-date="{ item }"> {% block swag_paypal_pos_synced_products_grid_column_date_formatted %} <template v-if="hasSync(item)"> {{ dateFilter(getSyncDate(item), { hour: '2-digit', minute: '2-digit', day: '2-digit', month: '2-digit', year: '2-digit' }) }} </template> {% endblock %} {% block swag_paypal_pos_synced_products_grid_column_date_empty %} <template v-else> {{ $t('swag-paypal-pos.detail.syncedProducts.notSyncedYet') }} </template> {% endblock %} </template> {% endblock %} {% block swag_paypal_pos_synced_products_grid_column_state %} <template #column-state="{ item }"> {% block swag_paypal_pos_synced_products_grid_column_state_label_log %} <template v-if="hasSync(item)"> <sw-label appearance="pill" :variant="getLabelVariant(getLevel(item))"> {{ $t(getLabel(getLevel(item))) }} </sw-label> </template> {% endblock %} </template> {% endblock %} {% block swag_paypal_pos_synced_products_grid_actions %} <template v-if="actions" #actions="{ item }"> <sw-context-menu-item v-for="action in actions" @click="action.callback(item)"> {{ $t(action.label) }} </sw-context-menu-item> </template> {% endblock %} </sw-data-grid> </template> {% endblock %} {% block swag_paypal_pos_synced_products_empty_state %} <sw-empty-state v-if="total < 1" class="swag-paypal-pos-detail-synced-products__empty-state" :title="$t('swag-paypal-pos.detail.syncedProducts.emptyState.title')" :subline="$t('swag-paypal-pos.detail.syncedProducts.emptyState.message')" /> {% endblock %} </mt-card> {% endblock %} </div> {% endblock %}`,{Component:K0}=Shopware;K0.register("swag-paypal-pos-detail-synced-products",{template:W0,inject:["SwagPayPalPosApiService"],emits:["buttons-update"],mixins:[Shopware.Mixin.getByName("swag-paypal-pos-log-label"),Shopware.Mixin.getByName("listing")],props:{salesChannel:{type:Object,required:!0}},data(){return{products:[],limit:10,isLoading:!1,actions:[{label:"swag-paypal-pos.detail.syncedProducts.actions.productDetails",callback:this.onProductDetails}],columns:[{property:"name",label:"swag-paypal-pos.detail.syncedProducts.columns.name",sortable:!1},{property:"state",label:"swag-paypal-pos.detail.syncedProducts.columns.state",sortable:!1},{property:"date",label:"swag-paypal-pos.detail.syncedProducts.columns.date",sortable:!1}]}},created(){this.createdComponent()},computed:{dateFilter(){return Shopware.Filter.getByName("date")}},methods:{createdComponent(){this.$emit("buttons-update",[]),this.getList()},getList(){if(this.salesChannel===null||this.salesChannel.id===null)return Promise.resolve();this.isLoading=!0;const a=this.getMainListingParams();return this.SwagPayPalPosApiService.getProductLog(this.salesChannel.id,a.page,a.limit).then(i=>{this.products=Object.values(i.elements),this.total=i.total,this.isLoading=!1})},onProductDetails(a){this.$router.push({name:"sw.product.detail.base",params:{id:a.id}})},hasSync(a){return a.extensions.paypalPosLog.length||a.extensions.paypalPosSync.length},getSyncDate(a){return this.hasSync(a)?a.extensions.paypalPosLog[0]?a.extensions.paypalPosLog[0].posSalesChannelRun.updatedAt||a.extensions.paypalPosLog[0].createdAt:a.extensions.paypalPosSync[0].updatedAt||a.extensions.paypalPosSync[0].createdAt:null},getLevel(a){return a.extensions.paypalPosLog[0]?a.extensions.paypalPosLog[0].level:200}}});const V0=`{% block swag_paypal_pos_detail_overview %} <div class="sw-sales-channel-detail-overview"> {% block swag_paypal_pos_detail_overview_status %} <swag-paypal-pos-status-view v-if="salesChannel.active" :isLoading="isLoading" :isSyncing="isSyncing" :lastCompleteRun="lastCompleteRun" :lastFinishedRun="lastRun" :salesChannel="salesChannel" :syncErrors="syncErrors"> {% block swag_paypal_pos_detail_overview_status_actions %} <template #actions> <sw-button-group v-if="salesChannel && salesChannel.active && !isSyncing"> {% block swag_paypal_pos_detail_overview_status_actions_sync_button %} <mt-button class="swag-paypal-pos-detail-overview__sync-button" variant="primary" @click="onStartSync"> {{ $t('swag-paypal-pos.detail.overview.buttonSync') }} </mt-button> {% endblock %} {% block swag_paypal_pos_detail_overview_status_actions_sync_context_menu %} <sw-context-button> {% block swag_paypal_pos_detail_overview_status_actions_sync_context_menu_button %} <template #button> <mt-button class="swag-paypal-pos-detail-overview__sync-button-context" variant="primary" square :disabled="isSyncing"> <mt-icon name="regular-chevron-down-xs" size="16px" /> </mt-button> </template> {% endblock %} {% block swag_paypal_pos_detail_overview_status_actions_sync_context_menu_item_products %} <sw-context-menu-item @click="onStartProductSync"> {{ $t('swag-paypal-pos.detail.overview.buttonSyncProducts') }} </sw-context-menu-item> {% endblock %} {% block swag_paypal_pos_detail_overview_status_actions_sync_context_menu_item_image %} <sw-context-menu-item @click="onStartImageSync"> {{ $t('swag-paypal-pos.detail.overview.buttonSyncImages') }} </sw-context-menu-item> {% endblock %} {% block swag_paypal_pos_detail_overview_status_actions_sync_context_menu_item_inventory %} <sw-context-menu-item @click="onStartInventorySync"> {{ $t('swag-paypal-pos.detail.overview.buttonSyncInventory') }} </sw-context-menu-item> {% endblock %} </sw-context-button> {% endblock %} </sw-button-group> {% block swag_paypal_pos_detail_overview_status_actions_sync_abort_button %} <mt-button v-if="isSyncing" variant="secondary" @click="onSyncAbort"> {{ $t('swag-paypal-pos.detail.overview.buttonSyncAbort') }} </mt-button> {% endblock %} </template> {% endblock %} </swag-paypal-pos-status-view> {% endblock %} {% block swag_paypal_pos_detail_overview_setup %} <swag-paypal-pos-continue-setup v-else /> {% endblock %} {% block swag_paypal_pos_detail_overview_getting_started %} <swag-paypal-pos-getting-started /> {% endblock %} </div> {% endblock %}`,{Component:Y0}=Shopware,{Criteria:Xr}=Shopware.Data;Y0.register("swag-paypal-pos-detail-overview",{template:V0,inject:["SwagPayPalPosApiService","salesChannelService","repositoryFactory"],emits:["run-update","buttons-update"],mixins:[Shopware.Mixin.getByName("placeholder")],props:{salesChannel:{type:Object,required:!1,default:null},lastRun:{type:Object,required:!1,default:null},lastCompleteRun:{type:Object,required:!1,default:null}},data(){return{isSyncing:!1,syncErrors:null,syncingRunId:null,statusErrorLevel:null,isLoading:!1}},computed:{runRepository(){return this.repositoryFactory.create("swag_paypal_pos_sales_channel_run")}},watch:{"salesChannel.id"(){this.checkForSync()},lastRun(){this.$forceUpdate()}},created(){this.createdComponent()},mounted(){this.mountedComponent()},methods:{createdComponent(){this.checkForSync()},mountedComponent(){this.updateButtons()},forceUpdate(){this.$forceUpdate()},startSync(a){this.syncErrors=null,this.isSyncing=!0,this.updateButtons(!0),a(this.salesChannel.id).then(i=>{this.syncingRunId=i.runId,this.updateSync()}).catch(i=>{this.syncErrors=i.response.data.errors,this.$emit("run-update"),this.isSyncing=!1,this.updateButtons()})},updateSync(){this.syncingRunId!==null&&this.runRepository.get(this.syncingRunId,Shopware.Context.api).then(a=>{if(a!==null&&a.status==="in_progress"){setTimeout(this.updateSync,1500);return}this.syncingRunId=null,this.$emit("run-update"),this.isSyncing=!1,this.updateButtons()})},onStartSync(){this.startSync(this.SwagPayPalPosApiService.startCompleteSync.bind(this.SwagPayPalPosApiService))},onStartProductSync(){this.startSync(this.SwagPayPalPosApiService.startProductSync.bind(this.SwagPayPalPosApiService))},onStartImageSync(){this.startSync(this.SwagPayPalPosApiService.startImageSync.bind(this.SwagPayPalPosApiService))},onStartInventorySync(){this.startSync(this.SwagPayPalPosApiService.startInventorySync.bind(this.SwagPayPalPosApiService))},onSyncAbort(){this.syncingRunId!==null&&this.SwagPayPalPosApiService.abortSync(this.syncingRunId).then(()=>{this.updateSync()})},checkForSync(){if(this.salesChannel===null||this.salesChannel.id===null)return;const a=new Xr(1,1);a.addFilter(Xr.equals("salesChannelId",this.salesChannel.id)),a.addFilter(Xr.equals("status","in_progress")),a.addSorting(Xr.sort("createdAt","DESC")),this.runRepository.search(a,Shopware.Context.api).then(i=>{i.first()!==null&&(this.isSyncing=!0,this.syncingRunId=i.first().id,this.updateSync())})},updateButtons(a=!1){const i=[{key:"sync",label:this.$t("swag-paypal-pos.detail.overview.buttonSync"),variant:"primary",action:this.onStartSync,disabled:!(this.salesChannel&&this.salesChannel.active),isLoading:this.isSyncing}];a&&i.unshift({key:"abortSync",label:this.$t("swag-paypal-pos.detail.overview.buttonSyncAbort"),action:this.onSyncAbort,disabled:!(this.salesChannel&&this.salesChannel.active)}),this.$emit("buttons-update",i)}}});const X0=`{% block swag_paypal_pos_detail_settings %} <div class="swag-paypal-pos-detail-settings"> {% block swag_paypal_pos_detail_settings_alert %} <mt-banner class="swag-paypal-pos-detail-settings__save-alert"> {{ $t('swag-paypal-pos.detail.settings.saveAlert') }} </mt-banner> {% endblock %} {% block swag_paypal_pos_detail_settings_basic %} <mt-card position-identifier="swag-paypal-pos-detail-settings-basic" :isLoading="isLoading" :title="$t('swag-paypal-pos.detail.settings.titleGeneralSettings')"> <sw-container columns="1fr 200px" gap="0px 30px"> {% block swag_paypal_pos_detail_settings_input_name %} <mt-text-field v-model="salesChannel.name" required type="text" validation="required" :error="salesChannelNameError" :disabled="!acl.can('sales_channel.editor')" :label="$t('sw-sales-channel.detail.labelInputName')" :placeholder="placeholder(salesChannel, 'name', $t('sw-sales-channel.detail.placeholderName'))" /> {% endblock %} {% block swag_paypal_pos_detail_settings_input_active %} <mt-switch v-model="salesChannel.active" bordered :disabled="!acl.can('sales_channel.editor')" :label="$t('sw-sales-channel.detail.labelInputActive')" :helpText="$t('swag-paypal-pos.detail.settings.activeHelpText')" /> {% endblock %} </sw-container> {% block swag_paypal_pos_detail_settings_input_media_domain %} <swag-paypal-pos-url-field v-model="swagPaypalPosSalesChannel.mediaDomain" required :error="swagPaypalPosSalesChannelMediaDomainError" :disabled="!acl.can('sales_channel.editor')" :label="$t('swag-paypal-pos.detail.settings.domain')" :helpText="$t('swag-paypal-pos.detail.settings.domainHelpText')" @update:model-value="forceUpdate" /> {% endblock %} {% block swag_paypal_pos_detail_settings_input_language %} <sw-entity-single-select v-model:value="salesChannel.languageId" entity="language" required :disabled="!acl.can('sales_channel.editor')" :label="$t('global.entities.language')" @update:value="changeLanguage" /> {% endblock %} {% block swag_paypal_pos_detail_settings_input_product_stream %} {# ToDo PPI-56 - implement support for product streams #} <sw-entity-single-select v-if="false" v-model:value="swagPaypalPosSalesChannel.productStreamId" entity="product_stream" :disabled="!acl.can('sales_channel.editor')" :label="$t('swag-paypal-pos.detail.settings.productStream')" @update:value="forceUpdate" /> {% endblock %} </mt-card> {% endblock %} {% block swag_paypal_pos_detail_settings_sync %} <div class="sw-sales-channel-detail-sync"> <mt-card position-identifier="swag-paypal-pos-detail-settings-sync" :isLoading="isLoading" :title="$t('swag-paypal-pos.detail.settings.titleSync')"> {% block swag_paypal_pos_detail_settings_sync_input %} <sw-radio-field v-model:value="salesChannel.extensions.paypalPosSalesChannel.replace" :label="$t('swag-paypal-pos.wizard.syncLibrary.description')" class="swag-paypal-pos-boolean-radio" :options="optionsReplace" :disabled="!acl.can('sales_channel.editor')" @update:value="forceUpdate" /> {% endblock %} </mt-card> </div> {% endblock %} {% block swag_paypal_pos_detail_settings_prices %} <div class="sw-sales-channel-detail-prices"> <mt-card position-identifier="swag-paypal-pos-detail-settings-prices" :isLoading="isLoading" :title="$t('swag-paypal-pos.detail.settings.titlePrices')"> {% block swag_paypal_pos_detail_settings_prices_input %} <swag-paypal-pos-boolean-radio v-model:value="swagPaypalPosSalesChannel.syncPrices" class="swag-paypal-pos-detail-settings__sync-prices-input" :label="$t('swag-paypal-pos.wizard.syncPrices.description')" :optionTrue="optionSyncPrices" :optionFalse="optionNotSyncPrices" :disabled="!acl.can('sales_channel.editor')" @update:value="forceUpdate" /> {% endblock %} </mt-card> </div> {% endblock %} {% block swag_paypal_pos_detail_settings_credentials %} <div class="sw-sales-channel-detail-credentials"> <mt-card position-identifier="swag-paypal-pos-detail-settings-credentials" :isLoading="isLoading" :title="$t('swag-paypal-pos.detail.settings.titleCredentials')"> {% block swag_paypal_pos_detail_settings_credentials_apikey %} <mt-password-field v-model="swagPaypalPosSalesChannel.apiKey" class="swag-paypal-pos-detail-settings__apikey-field" required :label="$t('swag-paypal-pos.authentication.labelApiKey')" :disabled="!acl.can('sales_channel.editor')" :placeholder="$t('swag-paypal-pos.authentication.placeholderApiKey')" @update:modelValue="forceUpdate" /> {% endblock %} {% block swag_paypal_pos_detail_settings_credentials_apikey_description %} <div class="swag-paypal-pos-detail-settings__apikey-description"> {% block swag_paypal_pos_detail_settings_credentials_apikey_description_text %} <div class="swag-paypal-pos-detail-settings__apikey-description-text"> {{ $t('swag-paypal-pos.authentication.apiKeyDescription') }} </div> {% endblock %} {% block swag_paypal_pos_detail_settings_credentials_apikey_description_link %} <sw-external-link v-if="acl.can('sales_channel.editor')" :href="apiKeyUrl" class="swag-paypal-pos-detail-settings__apikey-description-link"> {% block swag_paypal_pos_detail_settings_credentials_apikey_description_link_text %} {{ $t('swag-paypal-pos.authentication.buttonGenerateKey') }} {% endblock %} </sw-external-link> {% endblock %} </div> {% endblock %} </mt-card> </div> {% endblock %} {% block swag_paypal_pos_detail_settings_options %} <mt-card position-identifier="swag-paypal-pos-detail-settings-options" :title="$t('swag-paypal-pos.detail.settings.optionsTitle')" :isLoading="isLoading"> <template #grid> <sw-container rows="auto auto"> {% block swag_paypal_pos_detail_settings_options_reset %} <sw-card-section> <sw-container columns="1fr 175px" gap="0px 30px" class="swag-paypal-pos-detail-settings__reset-sync"> {% block sw_sales_channel_detail_base_options_reset_text %} <div class="swag-paypal-pos-detail-settings__options-description-text"> {{ $t('swag-paypal-pos.detail.settings.reset.descriptionText') }} </div> {% endblock %} {% block sw_sales_channel_detail_base_options_reset_button %} <div class="swag-paypal-pos-detail-settings__options-button"> <mt-button size="small" :disabled="!acl.can('sales_channel.editor')" variant="secondary" @click="showResetModal = true"> {{ $t('swag-paypal-pos.detail.settings.reset.buttonTitle') }} </mt-button> </div> {% endblock %} </sw-container> </sw-card-section> {% endblock %} {% block swag_paypal_pos_detail_settings_options_delete %} <sw-card-section divider="top"> <sw-container columns="1fr 175px" gap="0px 30px" class="sw-sales-channel-detail-settings__delete-sales-channel"> {% block sw_sales_channel_detail_base_options_delete_text %} <div class="swag-paypal-pos-detail-settings__options-description-text"> <strong>{{ $t('global.default.warning') }}</strong> {{ $t('sw-sales-channel.detail.textDeleteSalesChannelWarning') }} </div> {% endblock %} {% block sw_sales_channel_detail_base_options_delete_button %} <div class="swag-paypal-pos-detail-settings__options-button"> <mt-button variant="critical" size="small" :disabled="!acl.can('sales_channel.deleter')" @click="showDeleteModal = true"> {{ $t('sw-sales-channel.detail.buttonDelete') }} </mt-button> </div> {% endblock %} </sw-container> </sw-card-section> {% endblock %} </sw-container> </template> {% block swag_paypal_pos_detail_settings_options_reset_modal %} <sw-modal v-if="showResetModal" ref="modal" class="swag-paypal-pos-detail-settings__reset-sync-modal" variant="small" :title="$t('swag-paypal-pos.detail.settings.reset.modalTitle')" @modal-close="showResetModal = false"> {% block swag_paypal_pos_detail_settings_options_reset_modal_confirmtext %} <p class="swag-paypal-pos-detail-settings__reset-modal-confirm-text"> {{ $t('swag-paypal-pos.detail.settings.reset.modalConfirmText') }} </p> <p class="swag-paypal-pos-detail-settings__reset-modal-name"> <strong>{{ placeholder(salesChannel, 'name') }}</strong> </p> <p>{{ $t('swag-paypal-pos.detail.settings.reset.modalTextInfo') }}</p> {% endblock %} {% block sw_sales_channel_detail_options_reset_modal_footer %} <template #modal-footer> {% block swag_paypal_pos_detail_settings_options_reset_modal_abort %} <mt-button size="small" variant="secondary" @click="showResetModal = false"> {{ $t('global.default.cancel') }} </mt-button> {% endblock %} {% block swag_paypal_pos_detail_settings_options_reset_modal_confirm %} <mt-button size="small" variant="critical" @click="onConfirmReset"> {{ $t('swag-paypal-pos.detail.settings.reset.modalButtonConfirm') }} </mt-button> {% endblock %} </template> {% endblock %} </sw-modal> {% endblock %} {% block swag_paypal_pos_detail_settings_options_delete_modal %} <sw-modal v-if="showDeleteModal" ref="modal" class="sw-sales-channel-detail-settings__delete-modal" variant="small" :title="$t('sw-sales-channel.detail.deleteModalTitle')" @modal-close="showDeleteModal = false"> {% block swag_paypal_pos_detail_settings_options_delete_modal_confirmtext %} <p class="sw-sales-channel-detail-settings__delete-modal-confirm-text"> {{ $t('sw-sales-channel.detail.textConfirmDelete') }} </p> <p class="sw-sales-channel-detail-settings__delete-modal-name"> <strong>{{ placeholder(salesChannel, 'name') }}</strong> </p> <p>{{ $t('sw-sales-channel.detail.textDeleteInfo') }}</p> {% endblock %} {% block sw_sales_channel_detail_options_delete_modal_footer %} <template #modal-footer> {% block swag_paypal_pos_detail_settings_options_delete_modal_abort %} <mt-button size="small" variant="secondary" @click="showDeleteModal = false"> {{ $t('global.default.cancel') }} </mt-button> {% endblock %} {% block swag_paypal_pos_detail_settings_options_delete_modal_confirm %} <mt-button size="small" variant="critical" @click="onConfirmDelete"> {{ $t('sw-sales-channel.detail.buttonConfirmDelete') }} </mt-button> {% endblock %} </template> {% endblock %} </sw-modal> {% endblock %} </mt-card> {% endblock %} </div> {% endblock %}`,{Component:_g,Context:Z0,State:J0}=Shopware,{mapPropertyErrors:Of}=_g.getComponentHelper(),{ShopwareError:Q0}=Shopware.Classes;_g.register("swag-paypal-pos-detail-settings",{template:X0,inject:["SwagPayPalPosApiService","SwagPayPalPosSettingApiService","SwagPayPalPosWebhookRegisterService","salesChannelService","repositoryFactory","acl"],emits:["load-sales-channel","buttons-update"],mixins:[Shopware.Mixin.getByName("swag-paypal-pos-catch-error"),Shopware.Mixin.getByName("placeholder"),Shopware.Mixin.getByName("notification")],props:{salesChannel:{type:Object,required:!0},cloneSalesChannelId:{type:String,required:!1,default:null}},data(){return{isLoading:!1,showDeleteModal:!1,showResetModal:!1,isSaveSuccessful:!1,isTestingCredentials:!1,isTestCredentialsSuccessful:!1,apiKeyUrl:this.SwagPayPalPosSettingApiService.generateApiUrl(),previousApiKey:this.salesChannel.extensions.paypalPosSalesChannel.apiKey}},computed:{...Of("salesChannel",["name"]),...Of("swagPaypalPosSalesChannel",["mediaDomain"]),salesChannelRepository(){return this.repositoryFactory.create("sales_channel")},optionSyncPrices(){return{name:this.$t("swag-paypal-pos.wizard.syncPrices.optionTrueLabel"),description:this.$t("swag-paypal-pos.wizard.syncPrices.optionTrueDescription")}},optionNotSyncPrices(){return{name:this.$t("swag-paypal-pos.wizard.syncPrices.optionFalseLabel"),description:this.$t("swag-paypal-pos.wizard.syncPrices.optionFalseDescription")}},optionsReplace(){return[{value:2,name:this.$t("swag-paypal-pos.wizard.syncLibrary.optionReplacePermanentlyLabel"),description:this.$t("swag-paypal-pos.wizard.syncLibrary.optionReplacePermanentlyDescription")},{value:1,name:this.$t("swag-paypal-pos.wizard.syncLibrary.optionReplaceOneTimeLabel"),description:this.$t("swag-paypal-pos.wizard.syncLibrary.optionReplaceOneTimeDescription")},{value:0,name:this.$t("swag-paypal-pos.wizard.syncLibrary.optionReplaceNotLabel"),description:this.$t("swag-paypal-pos.wizard.syncLibrary.optionReplaceNotDescription")}]},swagPaypalPosSalesChannel(){return this.salesChannel.extensions.paypalPosSalesChannel}},mounted(){this.mountedComponent()},methods:{mountedComponent(){this.updateButtons()},forceUpdate(){this.$forceUpdate()},onSave(){return this.isLoading=!0,this.isSaveSuccessful=!1,this.updateButtons(),this.swagPaypalPosSalesChannel.apiKey===this.previousApiKey?this.save():this.SwagPayPalPosSettingApiService.validateApiCredentials(this.swagPaypalPosSalesChannel.apiKey,this.salesChannel.id).then(()=>this.SwagPayPalPosSettingApiService.fetchInformation(this.salesChannel,!0)).then(this.save).catch(a=>{throw this.catchAuthenticationError(a),this.isLoading=!1,this.updateButtons(),a})},save(){return this.SwagPayPalPosWebhookRegisterService.registerWebhook(this.salesChannel.id).catch(this.catchError.bind(this,"swag-paypal-pos.messageWebhookRegisterError")),this.salesChannelRepository.save(this.salesChannel,Z0.api).then(()=>{this.isLoading=!1,this.isSaveSuccessful=!0,this.updateButtons(),this.$emit("load-sales-channel"),Shopware.Utils.EventBus.emit("sw-sales-channel-detail-sales-channel-change"),this.cloneSalesChannelId!==null&&this.SwagPayPalPosSettingApiService.cloneProductVisibility(this.cloneSalesChannelId,this.salesChannel.id).catch(this.catchError.bind(this,"swag-paypal-pos.messageCloneError"))}).catch(()=>{this.isLoading=!1,this.updateButtons(),this.createNotificationError({message:this.$t("sw-sales-channel.detail.messageSaveError",0,{name:this.salesChannel.name||this.placeholder(this.salesChannel,"name")})})}).finally(()=>{if(this.swagPaypalPosSalesChannel.mediaDomain===null){const a=`swag_paypal_pos_sales_channel.${this.swagPaypalPosSalesChannel.id}.mediaDomain`,i=new Q0({code:"INVALID_URL"});J0.commit("error/addApiError",{expression:a,error:i})}})},testCredentials(){const a=this.swagPaypalPosSalesChannel.apiKey;this.isTestingCredentials=!0,this.isTestCredentialsSuccessful=!1,this.SwagPayPalPosSettingApiService.validateApiCredentials(a).then(i=>{const r=i.credentialsValid;this.isTestingCredentials=!1,this.isTestCredentialsSuccessful=r}).catch(i=>{this.catchAuthenticationError(i),this.isTestingCredentials=!1})},catchAuthenticationError(a){this.catchError("swag-paypal-pos.authentication.messageTestError",a),this.isTestingCredentials=!1,this.isTestCredentialsSuccessful=!1},updateButtons(){const a=[{key:"save",label:this.$t("global.default.save"),variant:"primary",action:this.onSave,disabled:!1,isLoading:this.isLoading}];this.$emit("buttons-update",a)},onConfirmDelete(){this.showDeleteModal=!1,this.$nextTick(()=>{this.deleteSalesChannel(this.salesChannel.id),this.$router.push({name:"sw.dashboard.index"})})},deleteSalesChannel(a){return this.SwagPayPalPosWebhookRegisterService.unregisterWebhook(a).finally(()=>this.salesChannelRepository.delete(a,Shopware.Context.api).then(()=>{Shopware.Utils.EventBus.emit("sw-sales-channel-detail-sales-channel-change")}))},onConfirmReset(){this.showResetModal=!1,this.$nextTick(()=>{this.SwagPayPalPosApiService.resetSync(this.salesChannel.id).then(()=>{this.$router.push({name:"swag.paypal.pos.detail.overview",params:{id:this.salesChannel.id}})})})},changeLanguage(){this.$nextTick(()=>{this.salesChannel.languages.length=0,this.salesChannel.languages.push({id:this.salesChannel.languageId}),this.$forceUpdate()})}}});const eA=`{% block swag_paypal_pos_detail_runs %} <div class="swag-paypal-pos-detail-runs"> {% block swag_paypal_pos_detail_runs_card %} <mt-card position-identifier="swag-paypal-pos-detail-runs" :title="$t('swag-paypal-pos.detail.runs.title')" :isLoading="isLoading"> {% block swag_paypal_pos_detail_runs_card_grid %} <template #grid> <sw-data-grid v-if="total > 0" identifier="swag-paypal-pos-detail-runs" :columns="columns" :dataSource="runs" :isLoading="isLoading || total === 0" :showActions="true" :showSelection="false" :showSettings="true" :allowColumnEdit="true" :sortBy="sortBy" :sortDirection="sortDirection" :skeletonItemAmount="limit" @column-sort="onSortColumn"> {% block swag_paypal_pos_detail_runs_card_grid_pagination %} <template #pagination> <sw-pagination :limit="limit" :page="page" :total="total" :total-visible="7" @page-change="onPageChange" /> </template> {% endblock %} {% block swag_paypal_pos_detail_runs_other_grid_column_log %} <template #column-task="{ item }"> {{ $t(\`swag-paypal-pos.detail.runs.\${item.task}Task\`) }} </template> {% endblock %} {% block swag_paypal_pos_detail_runs_card_grid_column_state %} <template #column-state="{ item }"> {% block swag_paypal_pos_detail_runs_card_grid_column_state_label %} <sw-label appearance="pill" :variant="getLabelVariant(item)"> {{ $t(getLabel(item)) }} </sw-label> {% endblock %} </template> {% endblock %} {% block swag_paypal_pos_detail_runs_card_grid_column_date %} <template #column-date="{ item }"> {% block swag_paypal_pos_detail_runs_card_grid_column_date_formatted %} {{ dateFilter(item.finishedAt, { hour: '2-digit', minute: '2-digit', day: '2-digit', month: '2-digit', year: '2-digit' }) }} {% endblock %} </template> {% endblock %} {% block swag_paypal_pos_detail_runs_card_grid_actions %} <template #actions="{ item }"> {% block swag_paypal_pos_detail_runs_card_grid_actions_details %} <sw-context-menu-item :disabled="item.logs.length <= 0" @click="onShowModal(item.id)"> {{ $t('swag-paypal-pos.detail.runs.actions.showDetails') }} </sw-context-menu-item> {% endblock %} </template> {% endblock %} </sw-data-grid> </template> {% endblock %} {% block swag_paypal_pos_detail_runs_card_empty_state %} <template #default> <sw-empty-state v-if="total < 1" class="swag-paypal-pos-detail-runs__empty-state" :title="$t('swag-paypal-pos.detail.runs.emptyState.title')" :subline="$t('swag-paypal-pos.detail.runs.emptyState.message')" /> </template> {% endblock %} {% block swag_paypal_pos_detail_runs_card_toolbar %} <template v-if="total > 0" #toolbar> {% block swag_paypal_pos_detail_runs_card_toolbar_container %} <sw-container columns="1fr min-content" align="center"> {% block swag_paypal_pos_detail_runs_card_toolbar_container_text %} <p>{{ $t('swag-paypal-pos.detail.runs.toolbarText') }}</p> {% endblock %} {% block swag_paypal_pos_detail_runs_card_toolbar_container_button %} <mt-button :disabled="!acl.can('sales_channel.editor')" variant="secondary" @click="onClearLogs"> {{ $t('swag-paypal-pos.detail.cleanLog') }} </mt-button> {% endblock %} </sw-container> {% endblock %} </template> {% endblock %} </mt-card> {% endblock %} {% block swag_paypal_pos_detail_runs_log_modal %} <sw-modal v-if="showModal" class="swag-paypal-pos-detail-runs__modal" :title="$t('swag-paypal-pos.detail.runs.title')" :isLoading="isLoading" variant="large" @modal-close="onCloseModal"> {% block swag_paypal_pos_detail_runs_log_modal_logs %} <swag-paypal-pos-detail-logs :runId="currentRunId" /> {% endblock %} {% block swag_paypal_pos_detail_runs_log_modal_footer %} <template #modal-footer> {% block swag_paypal_pos_detail_runs_log_modal_footer_close_modal_button %} <mt-button variant="primary" @click="onCloseModal"> {{ $t('global.default.cancel') }} </mt-button> {% endblock %} </template> {% endblock %} </sw-modal> {% endblock %} </div> {% endblock %}`,{Component:tA,Context:aA}=Shopware,{Criteria:Da}=Shopware.Data;tA.register("swag-paypal-pos-detail-runs",{template:eA,inject:["SwagPayPalPosApiService","repositoryFactory","acl"],emits:["buttons-update","run-update"],mixins:[Shopware.Mixin.getByName("swag-paypal-pos-catch-error"),Shopware.Mixin.getByName("notification"),Shopware.Mixin.getByName("listing")],props:{salesChannel:{type:Object,required:!1,default:null}},data(){return{runs:[],limit:10,sortBy:"finishedAt",sortDirection:"DESC",isLoading:!1,isCleaningLog:!1,showModal:!1,currentRunId:""}},computed:{runRepository(){return this.repositoryFactory.create("swag_paypal_pos_sales_channel_run")},columns(){return[{property:"task",dataIndex:"task",label:"swag-paypal-pos.detail.runs.columns.task",sortable:!0},{property:"state",dataIndex:"logs.level",label:"swag-paypal-pos.detail.runs.columns.state",sortable:!0},{property:"date",dataIndex:"finishedAt",label:"swag-paypal-pos.detail.runs.columns.date",sortable:!0}]},dateFilter(){return Shopware.Filter.getByName("date")}},created(){this.createdComponent()},methods:{createdComponent(){this.$emit("buttons-update",[])},getListCriteria(){const a=new Da(this.page,this.limit);a.addFilter(Da.equals("salesChannelId",this.salesChannel.id)),a.addFilter(Da.not("AND",[Da.equals("status","in_progress")])),a.addAssociation("logs"),a.getAssociation("logs").limit=1,a.getAssociation("logs").addSorting(Da.sort("level","DESC"));const i=this.getMainListingParams();return a.addSorting(Da.sort(i.sortBy,i.sortDirection,i.naturalSorting)),a.addSorting(Da.sort("finishedAt","DESC")),a},getList(){return this.salesChannel===null||this.salesChannel.id===null?Promise.resolve():(this.isLoading=!0,this.runRepository.search(this.getListCriteria(),aA.api).then(a=>{this.runs=a,this.total=a.total,this.page=a.criteria.page,this.limit=a.criteria.limit,this.isLoading=!1}))},onShowModal(a){this.currentRunId=a,this.showModal=!0},onCloseModal(){this.showModal=!1,this.currentRunId=""},onClearLogs(){return this.isLoading=!0,this.SwagPayPalPosApiService.startLogCleanup(this.salesChannel.id).then(()=>(this.$emit("run-update"),this.getList())).catch(a=>{this.catchError(null,a),this.getList()})},getLabelVariant(a){return a.status==="cancelled"?"info":a.status==="failed"?"danger":a.logs.length<=0?"success":a.logs[0].level>=400?"danger":a.logs[0].level>=300?"warning":a.logs[0].level>200?"info":"success"},getLabel(a){return a.status==="cancelled"?"swag-paypal-pos.detail.runs.states.aborted":a.status==="failed"?"swag-paypal-pos.detail.runs.states.failed":a.logs.length<=0?"swag-paypal-pos.detail.runs.states.successful":a.logs[0].level>200?"swag-paypal-pos.detail.runs.states.withWarnings":"swag-paypal-pos.detail.runs.states.successful"}}});const nA='{% block sw_first_run_wizard_modal %} <div class="swag-paypal-pos-wizard"> <sw-modal v-if="showModal" class="swag-paypal-pos-wizard-modal" position-identifier="swag-paypal-pos-wizard-modal" :title="title" :variant="variant" @modal-close="onCloseModal"> {% block swag_paypal_pos_wizard_modal_content %} <div class="swag-paypal-pos-wizard__modal-content"> <sw-container class="swag-paypal-pos-wizard__columns" :class="{ \'swag-paypal-pos-wizard__columns--two\': showSteps }"> {% block swag_paypal_pos_wizard_modal_content_steps %} <div v-if="showSteps" class="swag-paypal-pos-wizard__steps"> <sw-step-display :initialItemVariants="stepInitialItemVariants" :itemIndex="stepIndex" :itemVariant="stepVariant"> <sw-step-item v-for="pageName in displayStepperPages" :key="pageName"> {{ $t(`swag-paypal-pos.wizard.stepItemTitle.${pageName}`) }} </sw-step-item> </sw-step-display> </div> {% endblock %} {% block swag_paypal_pos_wizard_modal_content_page %} <div class="swag-paypal-pos-wizard__page"> <router-view v-slot="{ Component }" > <component :is="Component" :salesChannel="salesChannel" :cloneSalesChannelId="cloneSalesChannelId" :saveSalesChannel="save" :isLoading="isLoading" @buttons-update="updateButtons" @frw-set-title="setTitle" @frw-finish="onFinishWizard" @toggle-loading="toggleLoading" @recreate-sales-channel="createNewSalesChannel" @update-clone-sales-channel="updateCloneSalesChannel" /> </router-view> </div> {% endblock %} </sw-container> </div> {% endblock %} {% block swag_paypal_pos_wizard_modal_footer %} <template #modal-footer> <div class="swag-paypal-pos-wizard__footer"> {% block swag_paypal_pos_wizard_modal_footer_left %} <div class="footer-left"> <mt-button v-for="button in buttons.left" :key="button.action" size="small" :disabled="button.disabled" :isLoading="isLoading" :variant="button.variant" @click="onButtonClick(button.action)"> {{ button.label }} </mt-button> </div> {% endblock %} {% block swag_paypal_pos_wizard_modal_footer_right %} <div class="footer-right"> <mt-button v-for="button in buttons.right" :key="button.action" size="small" :disabled="button.disabled" :isLoading="isLoading" :variant="button.variant" @click="onButtonClick(button.action)"> {{ button.label }} </mt-button> </div> {% endblock %} </div> </template> {% endblock %} </sw-modal> </div> {% endblock %}',{Component:rA,Context:Na}=Shopware,{Criteria:iA}=Shopware.Data;rA.extend("swag-paypal-pos-wizard","sw-first-run-wizard-modal",{template:nA,inject:["SwagPayPalPosApiService","SwagPayPalPosSettingApiService","SwagPayPalPosWebhookRegisterService","salesChannelService","repositoryFactory"],mixins:[Shopware.Mixin.getByName("swag-paypal-pos-catch-error"),Shopware.Mixin.getByName("notification")],data(){return{showModal:!0,isLoading:!1,salesChannel:{},cloneSalesChannelId:null,stepperPages:["connection","connectionSuccess","connectionDisconnect","customization","productSelection","syncLibrary","syncPrices","finish"],stepper:{},currentStep:{}}},metaInfo(){return{title:this.wizardTitle}},computed:{displayStepperPages(){return this.stepperPages.filter(a=>a!=="connectionDisconnect")},stepInitialItemVariants(){const a=this.stepperPages.length,{navigationIndex:i}=this.currentStep,r=[];for(let o=1;o<=a;o+=1)o<i?r.push("success"):o===i?r.push("info"):r.push("disabled");return r},paypalPosSalesChannelRepository(){return this.repositoryFactory.create("swag_paypal_pos_sales_channel")},salesChannelRepository(){return this.repositoryFactory.create("sales_channel")},salesChannelCriteria(){return new iA(1,500).addAssociation(gg).addAssociation("countries").addAssociation("currencies").addAssociation("domains").addAssociation("languages")},wizardTitle(){return[this.$t("global.sw-admin-menu.textShopwareAdmin"),this.$t("swag-paypal-pos.general.moduleTitle"),this.title].reverse().join(" | ")}},watch:{$route(a){this.handleRouteUpdate(a)}},mounted(){this.mountedComponent()},methods:{handleRouteUpdate(a){const i=a.name.replace("swag.paypal.pos.wizard.","");this.currentStep=this.stepper[i]},createdComponent(){if(this.generateStepper(),this.$route.params.id){this.loadSalesChannel();return}this.createNewSalesChannel()},mountedComponent(){const a=this.$route.name.replace("swag.paypal.pos.wizard.","");this.currentStep=this.stepper[a]},generateStepper(){let a=1;this.stepper=this.stepperPages.reduce((i,r)=>(r==="connectionDisconnect"&&(a-=1),i[r]={name:`swag.paypal.pos.wizard.${r}`,variant:"large",navigationIndex:a},a===1&&(this.currentStep=i[r]),a+=1,i),{})},onCloseModal(){if(!this.salesChannel._isNew&&(this.$route.params.id||this.salesChannel.id)){this.routeToDetailOverview();return}this.routeToDashboard()},onFinishWizard(){this.routeToDetailOverview(!0)},routeToDashboard(){this.showModal=!1,this.$nextTick(()=>{this.$router.push({name:"sw.dashboard.index"})})},routeToDetailOverview(a=!1){this.showModal=!1,this.save(a).then(()=>{a&&this.SwagPayPalPosApiService.startCompleteSync(this.salesChannel.id),this.$router.push({name:"swag.paypal.pos.detail.overview",params:{id:this.salesChannel.id}})})},save(a=!1,i=!1){return a&&(this.salesChannel.active=!0),this.salesChannelRepository.save(this.salesChannel,Na.api).then(async()=>{this.isLoading=!1,this.isSaveSuccessful=!0,this.isNewEntity=!1,Shopware.Utils.EventBus.emit("sw-sales-channel-detail-sales-channel-change"),await this.loadSalesChannel(),this.cloneProductVisibility(),this.registerWebhook(i)}).catch(()=>{this.isLoading=!1,this.createNotificationError({message:this.$t("sw-sales-channel.detail.messageSaveError",0,{name:this.salesChannel.name||this.placeholder(this.salesChannel,"name")})})})},registerWebhook(a=!1){const i=this.SwagPayPalPosWebhookRegisterService.registerWebhook(this.salesChannel.id);return a?i:i.catch(this.catchError.bind(this,"swag-paypal-pos.messageWebhookRegisterError"))},cloneProductVisibility(){this.cloneSalesChannelId!==null&&this.SwagPayPalPosSettingApiService.cloneProductVisibility(this.cloneSalesChannelId,this.salesChannel.id).catch(a=>{a.response.data&&a.response.data.errors&&this.createNotificationError({message:this.$t("swag-paypal-pos.messageCloneError")})})},createNewSalesChannel(){Na.api.languageId!==Na.api.systemLanguageId&&(Na.api.languageId=Na.api.systemLanguageId),this.previousApiKey=null,this.salesChannel=this.salesChannelRepository.create(Na.api),this.salesChannel.typeId=Nc,this.salesChannel.name=this.$t("swag-paypal-pos.wizard.salesChannelPrototypeName"),this.salesChannel.active=!1,this.salesChannel.extensions.paypalPosSalesChannel=this.paypalPosSalesChannelRepository.create(Na.api),Object.assign(this.salesChannel.extensions.paypalPosSalesChannel,{mediaDomain:"",apiKey:"",imageDomain:"",productStreamId:null,syncPrices:!0,replace:0}),this.salesChannelService.generateKey().then(a=>{this.salesChannel.accessKey=a.accessKey}).catch(()=>{this.createNotificationError({message:this.$t("sw-sales-channel.detail.messageAPIError")})})},loadSalesChannel(){const a=this.$route.params.id||this.salesChannel.id;return a?(this.isLoading=!0,this.salesChannelRepository.get(a,Shopware.Context.api,this.salesChannelCriteria).then(i=>{this.salesChannel=i,this.previousApiKey=i.extensions.paypalPosSalesChannel.apiKey,this.isLoading=!1})):new Promise(i=>{i()})},updateCloneSalesChannel(a){this.cloneSalesChannelId=a},toggleLoading(a){this.isLoading=a}}});const sA=`{% block swag_paypal_pos_wizard_connection %} <div class="swag-paypal-pos-wizard-connection"> {% block swag_paypal_pos_wizard_connection_headline %} <div class="swag-paypal-pos-wizard-connection__headline"> {{ $t('swag-paypal-pos.wizard.connection.headerConnect') }} </div> {% endblock %} {% block swag_paypal_pos_wizard_connection_apikey %} <mt-password-field v-model="salesChannel.extensions.paypalPosSalesChannel.apiKey" class="swag-paypal-pos-wizard-connection__apikey-field" required :label="$t('swag-paypal-pos.authentication.labelApiKey')" :placeholder="$t('swag-paypal-pos.authentication.placeholderApiKey')" @update:modelValue="forceUpdate" /> {% endblock %} {% block swag_paypal_pos_wizard_connection_apikey_description %} <div class="swag-paypal-pos-wizard-connection__apikey-description"> {% block swag_paypal_pos_wizard_connection_apikey_description_text %} <div class="swag-paypal-pos-wizard-connection__apikey-description-text"> {{ $t('swag-paypal-pos.authentication.apiKeyDescription') }} </div> {% endblock %} {% block swag_paypal_pos_wizard_connection_apikey_description_link %} <mt-link :to="apiKeyUrl" class="swag-paypal-pos-wizard-connection__apikey-description-link" type="external" > {% block swag_paypal_pos_wizard_connection_apikey_description_link_text %} {{ $t('swag-paypal-pos.authentication.buttonGenerateKey') }} {% endblock %} </mt-link> {% endblock %} </div> {% endblock %} {% block swag_paypal_pos_wizard_connection_header_new_customer %} <div class="swag-paypal-pos-wizard-connection__new-customer-headline"> {{ $t('swag-paypal-pos.wizard.connection.headerNewCustomer') }} </div> {% endblock %} {% block swag_paypal_pos_wizard_connection_new_customer %} <mt-card position-identifier="swag-paypal-pos-wizard-connection-new-customer" :isLoading="isConnecting"> <div class="swag-paypal-pos-wizard-connection__new-customer-container"> {% block swag_paypal_pos_wizard_connection_new_customer_image %} <img class="swag-paypal-pos-wizard-connection__pos-logo" :src="assetFilter('swagpaypal/administration/static/img/paypal-pos-logo-full.png')" alt="Zettle logo" > {% endblock %} {% block swag_paypal_pos_wizard_connection_new_customer_button %} <mt-button class="swag-paypal-pos-wizard-connection__pos-link" ghost size="small" :link="$t('swag-paypal-pos.wizard.connection.buttonCreateAccountLink')" variant="secondary" > {% block swag_paypal_pos_wizard_connection_new_customer_button_text %} <span class="swag-paypal-pos-wizard-connection__pos-link-text"> {{ $t('swag-paypal-pos.wizard.connection.buttonCreateAccount') }} </span> {% endblock %} {% block swag_paypal_pos_wizard_connection_new_customer_button_icon %} <template #iconBack> <mt-icon name="regular-external-link-s" class="swag-paypal-pos-wizard-connection__pos-link-icon" size="10px" /> </template> {% endblock %} </mt-button> {% endblock %} </div> </mt-card> {% endblock %} </div> {% endblock %}`,{Component:oA}=Shopware;oA.register("swag-paypal-pos-wizard-connection",{template:sA,inject:["SwagPayPalPosSettingApiService"],emits:["frw-set-title","buttons-update","toggle-loading"],mixins:[Shopware.Mixin.getByName("notification"),Shopware.Mixin.getByName("swag-paypal-pos-catch-error")],props:{salesChannel:{type:Object,required:!0},cloneSalesChannelId:{type:String,required:!1,default:null},isLoading:{type:Boolean,required:!1,default:!1}},data(){return{isConnecting:!1,apiKeyUrl:this.SwagPayPalPosSettingApiService.generateApiUrl()}},computed:{assetFilter(){return Shopware.Filter.getByName("asset")}},watch:{"salesChannel.extensions.paypalPosSalesChannel.apiKey"(a){a&&this.updateButtons()}},created(){this.createdComponent()},methods:{createdComponent(){this.updateButtons(),this.setTitle()},setTitle(){this.$emit("frw-set-title",this.$t("swag-paypal-pos.wizard.connection.modalTitle"))},updateButtons(){const a=[{key:"next",label:this.$t("sw-first-run-wizard.general.buttonNext"),position:"right",variant:"primary",action:this.routeToConnectionSuccess,disabled:this.isLoading||!this.salesChannel.extensions.paypalPosSalesChannel.apiKey}];this.$emit("buttons-update",a)},routeToConnectionSuccess(){this.toggleLoadingState(!0);const a=this.salesChannel.extensions.paypalPosSalesChannel.apiKey;this.SwagPayPalPosSettingApiService.validateApiCredentials(a).then(i=>{i.credentialsValid===!0&&(this.toggleLoadingState(!1),this.$router.push({name:"swag.paypal.pos.wizard.connectionSuccess"}))}).catch(this.catchError.bind(this,"swag-paypal-pos.authentication.messageTestError")).finally(()=>{this.toggleLoadingState(!1)})},forceUpdate(){this.$forceUpdate(),this.updateButtons()},toggleLoadingState(a){this.isConnecting=a,this.$emit("toggle-loading",a)}}});const lA=`{% block swag_paypal_pos_wizard_connection_success %} <div class="swag-paypal-pos-wizard-connection-success"> {% block swag_paypal_pos_wizard_connection_success_headline_content %} <div class="swag-paypal-pos-wizard-connection-success__content"> {% block swag_paypal_pos_wizard_connection_success_icon %} <div class="swag-paypal-pos-wizard-connection-success__icon-wrapper"> <mt-icon class="swag-paypal-pos-wizard-connection-success__icon" name="regular-thumbs-up" size="80px" color="#37D046" /> </div> {% endblock %} {% block swag_paypal_pos_wizard_connection_success_headline %} <div class="swag-paypal-pos-wizard-connection-success__headline"> {{ $t('swag-paypal-pos.wizard.connectionSuccess.headline') }} </div> {% endblock %} {% block swag_paypal_pos_wizard_connection_success_info %} <div class="swag-paypal-pos-wizard-connection-success__info"> {{ $t('swag-paypal-pos.wizard.connectionSuccess.info') }} </div> {% endblock %} {% block swag_paypal_pos_wizard_connection_success_user %} <mt-card class="swag-paypal-pos-wizard-connection-success__user" position-identifier="swag-paypal-pos-wizard-connection-success-user" :isLoading="isFetchingInformation"> <sw-container class="swag-paypal-pos-wizard-connection-success__user-container" columns="30px auto auto" align="center" gap="30px"> {% block swag_paypal_pos_wizard_connection_success_user_avatar %} <sw-avatar class="swag-paypal-pos-wizard-connection-success__user-avatar" size="40px" :firstName="posUser.firstName" :lastName="posUser.lastName" /> {% endblock %} {% block swag_paypal_pos_wizard_connection_success_user_information %} <div class="swag-paypal-pos-wizard-connection-success__user-info"> {% block swag_paypal_pos_wizard_connection_success_user_information_real %} <div class="swag-paypal-pos-wizard-connection-success__user-info-name"> {{ posUser.fullName }} </div> <div class="swag-paypal-pos-wizard-connection-success__user-info-mail"> {{ posUser.mail }} </div> {% endblock %} </div> {% endblock %} {% block swag_paypal_pos_wizard_connection_success_user_disconnect_button %} <mt-button class="swag-paypal-pos-wizard-connection-success__user-disconnect" ghost size="small" variant="secondary" @click="onDisconnect"> {{ $t('swag-paypal-pos.wizard.connectionSuccess.disconnectButton') }} </mt-button> {% endblock %} </sw-container> </mt-card> {% endblock %} </div> {% endblock %} {% block swag_paypal_pos_wizard_connection_success_disclaimer %} <div class="swag-paypal-pos-wizard-connection-success__disclaimer"> {{ $t('swag-paypal-pos.wizard.connectionSuccess.disclaimer') }} </div> {% endblock %} </div> {% endblock %}`,{Component:cA,Context:Df}=Shopware;cA.register("swag-paypal-pos-wizard-connection-success",{template:lA,inject:["repositoryFactory","SwagPayPalPosSettingApiService"],emits:["frw-set-title","buttons-update"],mixin:["placeholder"],props:{salesChannel:{type:Object,required:!0},cloneSalesChannelId:{type:String,required:!1,default:null},saveSalesChannel:{type:Function,required:!0}},data(){return{posData:null,isFetchingInformation:!0}},computed:{posUser(){if(this.isFetchingInformation){const i=this.$t("swag-paypal-pos.wizard.connectionSuccess.fakeFirstName"),r=this.$t("swag-paypal-pos.wizard.connectionSuccess.fakeLastName"),o=this.$t("swag-paypal-pos.wizard.connectionSuccess.fakeMail");return{firstName:i,lastName:r,fullName:`${i} ${r}`,mail:o}}const a=this.posData.merchantInformation.name.split(" ");return{firstName:a[0],lastName:a[a.length-1],fullName:this.posData.merchantInformation.name,mail:this.posData.merchantInformation.contactEmail}}},created(){this.createdComponent()},methods:{createdComponent(){return this.isFetchingInformation=!0,this.updateButtons(),this.setTitle(),this.SwagPayPalPosSettingApiService.fetchInformation(this.salesChannel,!0).then(a=>(this.posData=a,this.salesChannel.languageId===null&&(this.salesChannel.languageId=Df.api.systemLanguageId,this.salesChannel.languages.push({id:Df.api.systemLanguageId})),this.saveSalesChannel(!1,!0))).finally(()=>{this.isFetchingInformation=!1,this.updateButtons()})},setTitle(){this.$emit("frw-set-title",this.$t("swag-paypal-pos.wizard.connectionSuccess.modalTitle"))},updateButtons(){const a=[{key:"next",label:this.$t("sw-first-run-wizard.general.buttonNext"),position:"right",variant:"primary",action:this.routeToCustomization,disabled:this.isFetchingInformation}];this.$emit("buttons-update",a)},routeToCustomization(){this.$router.push({name:"swag.paypal.pos.wizard.customization",params:{id:this.salesChannel.id}})},onDisconnect(){this.$router.push({name:"swag.paypal.pos.wizard.connectionDisconnect",params:{id:this.salesChannel.id}})},forceUpdate(){this.$forceUpdate(),this.updateButtons()}}});const uA=`{% block swag_paypal_pos_wizard_connection_disconnect %} <div class="swag-paypal-pos-wizard-connection-disconnect"> {% block swag_paypal_pos_wizard_connection_disconnect_headline_content %} <div class="swag-paypal-pos-wizard-connection-disconnect__content"> {% block swag_paypal_pos_wizard_connection_disconnect_icon %} <div class="swag-paypal-pos-wizard-connection-disconnect__icon-wrapper"> <mt-icon class="swag-paypal-pos-wizard-connection-disconnect__icon" name="regular-exclamation-triangle" size="80px" color="#de294c" /> </div> {% endblock %} {% block swag_paypal_pos_wizard_connection_disconnect_headline %} <div class="swag-paypal-pos-wizard-connection-disconnect__headline"> {{ $t('swag-paypal-pos.wizard.connectionDisconnect.headline') }} </div> {% endblock %} {% block swag_paypal_pos_wizard_connection_disconnect_info %} <div class="swag-paypal-pos-wizard-connection-disconnect__info"> {{ $t('swag-paypal-pos.wizard.connectionDisconnect.info') }} </div> {% endblock %} {% block swag_paypal_pos_wizard_connection_disconnect_user %} <mt-card class="swag-paypal-pos-wizard-connection-disconnect__user" position-identifier="swag-paypal-pos-wizard-connection-disconnect-user" :isLoading="isFetchingInformation"> <sw-container class="swag-paypal-pos-wizard-connection-disconnect__user-container" columns="30px auto 150px" align="center" gap="30px"> {% block swag_paypal_pos_wizard_connection_disconnect_user_avatar %} <sw-avatar class="swag-paypal-pos-wizard-connection-disconnect__user-avatar" size="40px" :firstName="posUser.firstName" :lastName="posUser.lastName" /> {% endblock %} {% block swag_paypal_pos_wizard_connection_disconnect_user_information %} <div class="swag-paypal-pos-wizard-connection-disconnect__user-info"> {% block swag_paypal_pos_wizard_connection_disconnect_user_information_real %} <div class="swag-paypal-pos-wizard-connection-disconnect__user-info-name"> {{ posUser.fullName }} </div> <div class="swag-paypal-pos-wizard-connection-disconnect__user-info-mail"> {{ posUser.mail }} </div> {% endblock %} </div> {% endblock %} </sw-container> </mt-card> {% endblock %} </div> {% endblock %} </div> {% endblock %}`,{Component:pA,Context:dA}=Shopware;pA.register("swag-paypal-pos-wizard-connection-disconnect",{template:uA,inject:["repositoryFactory","SwagPayPalPosSettingApiService"],emits:["frw-set-title","buttons-update","recreate-sales-channel"],mixin:[Shopware.Mixin.getByName("placeholder"),Shopware.Mixin.getByName("notification")],props:{salesChannel:{type:Object,required:!0},cloneSalesChannelId:{type:String,required:!1,default:null},saveSalesChannel:{type:Function,required:!0}},data(){return{posData:null,isFetchingInformation:!0}},computed:{salesChannelRepository(){return this.repositoryFactory.create("sales_channel")},posUser(){if(this.isFetchingInformation){const i=this.$t("swag-paypal-pos.wizard.connectionSuccess.fakeFirstName"),r=this.$t("swag-paypal-pos.wizard.connectionSuccess.fakeLastName"),o=this.$t("swag-paypal-pos.wizard.connectionSuccess.fakeMail");return{firstName:i,lastName:r,fullName:`${i} ${r}`,mail:o}}const a=this.posData.merchantInformation.name.split(" ");return{firstName:a[0],lastName:a[a.length-1],fullName:this.posData.merchantInformation.name,mail:this.posData.merchantInformation.contactEmail}}},created(){this.createdComponent()},methods:{createdComponent(){this.isFetchingInformation=!0,this.updateButtons(),this.setTitle(),this.SwagPayPalPosSettingApiService.fetchInformation(this.salesChannel,!0).then(a=>{this.posData=a}).finally(()=>{this.isFetchingInformation=!1,this.updateButtons()})},setTitle(){this.$emit("frw-set-title",this.$t("swag-paypal-pos.wizard.connectionDisconnect.modalTitle"))},updateButtons(){const a=[{key:"cancel",label:this.$t("global.default.cancel"),position:"right",action:this.routeBackToConnectionSuccess,disabled:!1},{key:"next",label:this.$t("swag-paypal-pos.wizard.connectionDisconnect.disconnectButton"),position:"right",variant:"danger",action:this.onDisconnect,disabled:this.isFetchingInformation}];this.$emit("buttons-update",a)},routeBackToConnectionSuccess(){this.$router.push({name:"swag.paypal.pos.wizard.connectionSuccess",params:{id:this.salesChannel.id}})},onDisconnect(){this.salesChannelRepository.delete(this.salesChannel.id,dA.api).then(()=>{Shopware.Utils.EventBus.emit("sw-sales-channel-detail-sales-channel-change"),this.$emit("recreate-sales-channel"),this.forceUpdate(),this.$router.push({name:"swag.paypal.pos.wizard.connection"})}).catch(()=>{this.createNotificationError({message:this.$t("swag-paypal-pos.wizard.connectionDisconnect.disconnectErrorMessage")})})},forceUpdate(){this.$forceUpdate(),this.updateButtons()}}});const hA=`{% block swag_paypal_pos_wizard_customization %} <div v-if="!isLoading" class="swag-paypal-pos-wizard-customization"> {% block swag_paypal_pos_wizard_customization_name %} <mt-text-field v-model="salesChannel.name" class="swag-paypal-pos-wizard-customization__name-field" validation="required" required :label="$t('swag-paypal-pos.wizard.customization.salesChannelLabel')" :placeholder="$t('sw-sales-channel.detail.placeholderName')" @update:model-value="forceUpdate" /> {% endblock %} {% block swag_paypal_pos_wizard_customization_language %} <sw-entity-single-select v-model:value="salesChannel.languageId" entity="language" required :label="$t('global.entities.language')" @update:value="changeLanguage" /> {% endblock %} {% block swag_paypal_pos_wizard_customization_media_domain %} <mt-url-field v-model="salesChannel.extensions.paypalPosSalesChannel.mediaDomain" class="swag-paypal-pos-wizard-customization__domain-field" required :label="$t('swag-paypal-pos.wizard.customization.labelDomain')" :placeholder="$t('swag-paypal-pos.wizard.customization.placeholderDomain')" :model-value="salesChannel.extensions.paypalPosSalesChannel.mediaDomain" @update:model-value="forceUpdate" /> {% endblock %} {% block swag_paypal_pos_wizard_connection_success_disclaimer %} <div class="swag-paypal-pos-wizard-customization__subtitle"> {{ $t('swag-paypal-pos.wizard.customization.subtitle') }} </div> {% endblock %} </div> {% endblock %}`,{Component:fA}=Shopware,{EntityCollection:gA}=Shopware.Data;fA.register("swag-paypal-pos-wizard-customization",{template:hA,inject:["repositoryFactory"],emits:["frw-set-title","buttons-update","toggle-loading"],props:{salesChannel:{type:Object,required:!0},cloneSalesChannelId:{type:String,required:!1,default:null},saveSalesChannel:{type:Function,required:!0},isLoading:{type:Boolean,required:!1,default:!1}},computed:{languageRepository(){return this.repositoryFactory.create("language")}},watch:{isLoading(a){a||this.updateButtons()}},created(){this.createdComponent()},methods:{createdComponent(){this.updateButtons(),this.setTitle(),this.changeLanguage()},setTitle(){this.$emit("frw-set-title",this.$t("swag-paypal-pos.wizard.customization.modalTitle"))},updateButtons(){const a=[{key:"back",label:this.$t("sw-first-run-wizard.general.buttonBack"),position:"left",action:this.routeBackToConnectionSuccess,disabled:!1},{key:"next",label:this.$t("sw-first-run-wizard.general.buttonNext"),position:"right",variant:"primary",action:this.routeToProductSelection,disabled:this.nextButtonDisabled()}];this.$emit("buttons-update",a)},nextButtonDisabled(){return this.isLoading||!this.salesChannel.name||!this.salesChannel.languageId||!this.salesChannel.extensions.paypalPosSalesChannel.mediaDomain},routeBackToConnectionSuccess(){this.$router.push({name:"swag.paypal.pos.wizard.connectionSuccess",params:{id:this.salesChannel.id}})},routeToProductSelection(){this.$router.push({name:"swag.paypal.pos.wizard.productSelection",params:{id:this.salesChannel.id}})},forceUpdate(){this.$forceUpdate(),this.$nextTick().then(()=>{this.updateButtons()})},changeLanguage(){this.salesChannel.languages=new gA("language","language",Shopware.Context.api),this.salesChannel.languages.push({id:this.salesChannel.languageId}),this.$forceUpdate()},toggleLoadingState(a){this.isConnecting=a,this.$emit("toggle-loading",a)}}});const _A=`{% block swag_paypal_pos_wizard_product_selection %} <div class="swag-paypal-pos-wizard-product-selection"> {% block swag_paypal_pos_wizard_product_selection_info %} <p class="swag-paypal-pos-wizard-product-selection__info"> {{ $t('swag-paypal-pos.wizard.productSelection.info') }} </p> {% endblock %} {% block swag_paypal_pos_wizard_product_selection_sales_channel_toggle %} <mt-switch v-model="hasClone" class="swag-paypal-pos-wizard-product-selection__clone-switch" bordered :label="$t('swag-paypal-pos.wizard.productSelection.labelToggle')" @update:modelValue="updateClone" /> {% endblock %} {% block swag_paypal_pos_wizard_product_selection_sales_channel_select %} <sw-entity-single-select v-model:value="localCloneSalesChannelId" class="swag-paypal-pos-wizard-product-selection__saleschannel-select" entity="sales_channel" :criteria="salesChannelCriteria" :disabled="!hasClone" :label="$t('swag-paypal-pos.wizard.productSelection.labelSelect')" @update:value="forceUpdate" /> {% endblock %} </div> {% endblock %}`,{Component:yA}=Shopware,{Criteria:fc}=Shopware.Data;yA.register("swag-paypal-pos-wizard-product-selection",{template:_A,emits:["update-clone-sales-channel","frw-set-title","buttons-update","toggle-loading"],props:{salesChannel:{type:Object,required:!0},cloneSalesChannelId:{type:String,required:!1,default:null},saveSalesChannel:{type:Function,required:!0}},data(){return{manualSalesChannel:!1,hasClone:!1}},computed:{localCloneSalesChannelId:{get(){return this.updateButtons(),this.cloneSalesChannelId},set(a){this.$emit("update-clone-sales-channel",a)}},salesChannelCriteria(){const a=new fc(1,500);return a.addFilter(fc.not("and",[fc.equals("id",this.salesChannel.id)])),a}},created(){this.createdComponent()},methods:{createdComponent(){this.updateButtons(),this.setTitle()},setTitle(){this.$emit("frw-set-title",this.$t("swag-paypal-pos.wizard.productSelection.modalTitle"))},updateButtons(){const a=[{key:"back",label:this.$t("sw-first-run-wizard.general.buttonBack"),position:"left",action:this.routeBackToCustomization,disabled:!1},{key:"next",label:this.$t("sw-first-run-wizard.general.buttonNext"),position:"right",variant:"primary",action:this.routeToSyncLibrary,disabled:!1}];this.$emit("buttons-update",a)},routeBackToCustomization(){this.$router.push({name:"swag.paypal.pos.wizard.customization",params:{id:this.salesChannel.id}})},routeToSyncLibrary(){this.$router.push({name:"swag.paypal.pos.wizard.syncLibrary",params:{id:this.salesChannel.id}})},updateClone(){this.$emit("update-clone-sales-channel",null),this.forceUpdate()},forceUpdate(){this.$forceUpdate(),this.updateButtons()},toggleLoadingState(a){this.isConnecting=a,this.$emit("toggle-loading",a)}}});const mA=`{% block swag_paypal_pos_wizard_sync_prices %} <div class="swag-paypal-pos-wizard-sync-prices"> {% block swag_paypal_pos_wizard_sync_prices_header %} <div class="swag-paypal-pos-wizard-sync-prices__headline"> {{ $t('swag-paypal-pos.wizard.syncPrices.header') }} </div> {% endblock %} {% block swag_paypal_pos_wizard_sync_prices_description_input %} <swag-paypal-pos-boolean-radio v-model:value="salesChannel.extensions.paypalPosSalesChannel.syncPrices" :label="$t('swag-paypal-pos.wizard.syncPrices.description')" :optionTrue="optionTrue" :optionFalse="optionFalse" /> {% endblock %} {% block swag_paypal_pos_wizard_sync_prices_disclaimer %} <div class="swag-paypal-pos-wizard-sync-prices__disclaimer"> {{ $t('swag-paypal-pos.wizard.syncPrices.disclaimer') }} </div> {% endblock %} </div> {% endblock %}`,{Component:wA}=Shopware;wA.register("swag-paypal-pos-wizard-sync-prices",{template:mA,emits:["frw-set-title","buttons-update","toggle-loading"],props:{salesChannel:{type:Object,required:!0},cloneSalesChannelId:{type:String,required:!1,default:null},saveSalesChannel:{type:Function,required:!0}},computed:{optionTrue(){return{name:this.$t("swag-paypal-pos.wizard.syncPrices.optionTrueLabel"),description:this.$t("swag-paypal-pos.wizard.syncPrices.optionTrueDescription")}},optionFalse(){return{name:this.$t("swag-paypal-pos.wizard.syncPrices.optionFalseLabel"),description:this.$t("swag-paypal-pos.wizard.syncPrices.optionFalseDescription")}}},created(){this.createdComponent()},methods:{createdComponent(){this.updateButtons(),this.setTitle()},setTitle(){this.$emit("frw-set-title",this.$t("swag-paypal-pos.wizard.syncPrices.modalTitle"))},updateButtons(){const a=[{key:"back",label:this.$t("sw-first-run-wizard.general.buttonBack"),position:"left",action:this.routeBackToSyncLibrary,disabled:!1},{key:"next",label:this.$t("sw-first-run-wizard.general.buttonNext"),position:"right",variant:"primary",action:this.routeToFinish,disabled:!1}];this.$emit("buttons-update",a)},routeBackToSyncLibrary(){this.$router.push({name:"swag.paypal.pos.wizard.syncLibrary",params:{id:this.salesChannel.id}})},routeToFinish(){this.$router.push({name:"swag.paypal.pos.wizard.finish",params:{id:this.salesChannel.id}})},forceUpdate(){this.$forceUpdate()},toggleLoadingState(a){this.isConnecting=a,this.$emit("toggle-loading",a)}}});const vA=`{% block swag_paypal_pos_wizard_sync_library %} <div class="swag-paypal-pos-wizard-sync-library"> {% block swag_paypal_pos_wizard_sync_library_header %} <i18n class="swag-paypal-pos-wizard-sync-library__headline" path="swag-paypal-pos.wizard.syncLibrary.header" tag="div"> <template #shopwareProducts> <span>{{ $t('swag-paypal-pos.wizard.syncLibrary.shopwareProducts', shopwareProductsCount) }}</span> </template> <template #posProducts> <span>{{ $t('swag-paypal-pos.wizard.syncLibrary.posProducts', posProductsCount) }}</span> </template> </i18n> {% endblock %} {% block swag_paypal_pos_wizard_sync_library_description_input %} <sw-radio-field v-model:value="salesChannel.extensions.paypalPosSalesChannel.replace" class="swag-paypal-pos-boolean-radio" :label="$t('swag-paypal-pos.wizard.syncLibrary.description')" :options="options" /> {% endblock %} {% block swag_paypal_pos_wizard_sync_library_disclaimer %} <div class="swag-paypal-pos-wizard-sync-library__disclaimer"> {{ $t('swag-paypal-pos.wizard.syncLibrary.disclaimer') }} </div> {% endblock %} </div> {% endblock %}`,{Component:bA}=Shopware;bA.register("swag-paypal-pos-wizard-sync-library",{template:vA,inject:["SwagPayPalPosSettingApiService"],emits:["frw-set-title","buttons-update","toggle-loading"],props:{salesChannel:{type:Object,required:!0},cloneSalesChannelId:{type:String,required:!1,default:null},saveSalesChannel:{type:Function,required:!0}},data(){return{shopwareProductsCount:0,posProductsCount:0}},computed:{options(){return[{value:2,name:this.$t("swag-paypal-pos.wizard.syncLibrary.optionReplacePermanentlyLabel"),description:this.$t("swag-paypal-pos.wizard.syncLibrary.optionReplacePermanentlyDescription")},{value:1,name:this.$t("swag-paypal-pos.wizard.syncLibrary.optionReplaceOneTimeLabel"),description:this.$t("swag-paypal-pos.wizard.syncLibrary.optionReplaceOneTimeDescription")},{value:0,name:this.$t("swag-paypal-pos.wizard.syncLibrary.optionReplaceNotLabel"),description:this.$t("swag-paypal-pos.wizard.syncLibrary.optionReplaceNotDescription")}]}},created(){this.createdComponent()},methods:{createdComponent(){this.updateButtons(),this.setTitle(),this.fetchProductCounts()},setTitle(){this.$emit("frw-set-title",this.$t("swag-paypal-pos.wizard.syncLibrary.modalTitle"))},updateButtons(){const a=[{key:"back",label:this.$t("sw-first-run-wizard.general.buttonBack"),position:"left",action:this.routeBackToProductSelection,disabled:!1},{key:"next",label:this.$t("sw-first-run-wizard.general.buttonNext"),position:"right",variant:"primary",action:this.routeToSyncPrices,disabled:!1}];this.$emit("buttons-update",a)},routeBackToProductSelection(){this.$router.push({name:"swag.paypal.pos.wizard.productSelection",params:{id:this.salesChannel.id}})},routeToSyncPrices(){this.$router.push({name:"swag.paypal.pos.wizard.syncPrices",params:{id:this.salesChannel.id}})},forceUpdate(){this.$forceUpdate()},toggleLoadingState(a){this.isConnecting=a,this.$emit("toggle-loading",a)},fetchProductCounts(){this.toggleLoadingState(!0),this.SwagPayPalPosSettingApiService.getProductCount(this.salesChannel.id,this.cloneSalesChannelId).then(a=>{this.shopwareProductsCount=a.localCount,this.posProductsCount=a.remoteCount}).finally(()=>{this.toggleLoadingState(!1)})}}});const SA=`{% block swag_paypal_pos_wizard_finish %} <div class="swag-paypal-pos-wizard-finish"> {% block swag_paypal_pos_wizard_finish_content %} <div class="swag-paypal-pos-wizard-finish__content"> {% block swag_paypal_pos_wizard_finish_content_icon %} <div class="swag-paypal-pos-wizard-finish__icon-wrapper"> <mt-icon class="swag-paypal-pos-wizard-finish__icon" name="regular-checkmark" size="80px" color="#37D046" /> </div> {% endblock %} {% block swag_paypal_pos_wizard_finish_content_header %} <div class="swag-paypal-pos-wizard-finish__content-header"> {{ $t('swag-paypal-pos.wizard.finish.header') }} </div> {% endblock %} {% block swag_paypal_pos_wizard_finish_content_description %} <div class="swag-paypal-pos-wizard-finish__content-description"> <p class="swag-paypal-pos-wizard-finish__first-paragraph"> {{ $t('swag-paypal-pos.wizard.finish.firstParagraph') }} </p> <p class="swag-paypal-pos-wizard-finish__second-paragraph"> {{ $t('swag-paypal-pos.wizard.finish.secondParagraph') }} </p> </div> {% endblock %} </div> {% endblock %} </div> {% endblock %}`,{Component:CA}=Shopware;CA.register("swag-paypal-pos-wizard-finish",{template:SA,inject:["SwagPayPalPosApiService"],emits:["frw-set-title","buttons-update","frw-finish"],props:{salesChannel:{type:Object,required:!0},cloneSalesChannelId:{type:String,required:!1,default:null}},created(){this.createdComponent()},methods:{createdComponent(){this.updateButtons(),this.setTitle()},setTitle(){this.$emit("frw-set-title",this.$t("swag-paypal-pos.wizard.finish.modalTitle"))},updateButtons(){const a=[{key:"back",label:this.$t("sw-first-run-wizard.general.buttonBack"),position:"left",action:this.routeBackToSyncPrices,disabled:!1},{key:"finish",label:this.$t("sw-first-run-wizard.general.buttonFinish"),position:"right",variant:"primary",action:this.onFinish,disabled:!1}];this.$emit("buttons-update",a)},routeBackToSyncPrices(){this.$router.push({name:"swag.paypal.pos.wizard.syncPrices",params:{id:this.salesChannel.id}})},onFinish(){this.$emit("frw-finish")}}});const{Module:PA}=Shopware;PA.register("swag-paypal-pos",{type:"plugin",name:"SwagPayPalPos",title:"swag-paypal-settings.module.title",description:"swag-paypal-settings.module.description",version:"1.0.0",targetVersion:"1.0.0",color:"#9AA8B5",icon:"regular-sync",routes:{detail:{component:"swag-paypal-pos",path:":id/detail",redirect:{name:"swag.paypal.pos.detail.overview"},meta:{privilege:"sales_channel.viewer"},children:{overview:{component:"swag-paypal-pos-detail-overview",path:"overview",meta:{privilege:"sales_channel.viewer"}},syncedProducts:{component:"swag-paypal-pos-detail-synced-products",path:"synced-products",meta:{privilege:"sales_channel.viewer"}},settings:{component:"swag-paypal-pos-detail-settings",path:"settings",meta:{privilege:"sales_channel.viewer"}},runs:{component:"swag-paypal-pos-detail-runs",path:"runs",meta:{privilege:"sales_channel.viewer"}}}},wizard:{component:"swag-paypal-pos-wizard",path:":id?/wizard",redirect:{name:"swag.paypal.pos.wizard.connection"},meta:{privilege:"sales_channel.creator"},children:{connection:{component:"swag-paypal-pos-wizard-connection",path:"connection",meta:{privilege:"sales_channel.creator"}},connectionSuccess:{component:"swag-paypal-pos-wizard-connection-success",path:"connection-success",meta:{privilege:"sales_channel.creator"}},connectionDisconnect:{component:"swag-paypal-pos-wizard-connection-disconnect",path:"connection-disconnect",meta:{privilege:"sales_channel.creator"}},customization:{component:"swag-paypal-pos-wizard-customization",path:"customization",meta:{privilege:"sales_channel.creator"}},productSelection:{component:"swag-paypal-pos-wizard-product-selection",path:"product-selection",meta:{privilege:"sales_channel.creator"}},syncPrices:{component:"swag-paypal-pos-wizard-sync-prices",path:"sync-prices",meta:{privilege:"sales_channel.creator"}},syncLibrary:{component:"swag-paypal-pos-wizard-sync-library",path:"sync-library",meta:{privilege:"sales_channel.creator"}},finish:{component:"swag-paypal-pos-wizard-finish",path:"finish",meta:{privilege:"sales_channel.creator"}}}}}});Shopware.Component.register("swag-paypal-settings-icon",()=>Te(()=>import("./index-DruaxD0u.js"),__vite__mapDeps([24,25])));Shopware.Component.register("swag-paypal-settings-locale-select",()=>Te(()=>import("./index-DB5t7QRC.js"),__vite__mapDeps([26,27,28])));Shopware.Component.register("swag-paypal-settings-sales-channel-switch",()=>Te(()=>import("./index-CjRcIrtF.js"),__vite__mapDeps([29,30])));Shopware.Component.register("swag-paypal-settings-webhook",()=>Te(()=>import("./index-8wR70pcV.js"),__vite__mapDeps([31,32])));Shopware.Component.register("swag-paypal-settings-advanced",()=>Te(()=>import("./index-CPmC0Ucc.js"),__vite__mapDeps([33,27,34])));Shopware.Component.register("swag-paypal-settings-general",()=>Te(()=>import("./index-y6NUUcVz.js"),__vite__mapDeps([35,27,36])));Shopware.Component.register("swag-paypal-settings-storefront",()=>Te(()=>import("./index-D0J5BLj8.js"),__vite__mapDeps([37,27])));Shopware.Component.register("swag-paypal-settings",()=>Te(()=>import("./index-CnMEVSY-.js"),[]));Shopware.Module.register("swag-paypal-settings",{type:"plugin",name:"SwagPayPalSettings",title:"swag-paypal-settings.module.title",description:"swag-paypal-settings.module.description",version:"1.0.0",targetVersion:"1.0.0",color:"#9AA8B5",icon:"regular-cog",routes:{index:{component:"swag-paypal-settings",path:"index",redirect:{name:"swag.paypal.settings.index.general"},meta:{parentPath:"sw.settings.index.plugins",privilege:"swag_paypal.viewer"},children:{general:{path:"general",component:"swag-paypal-settings-general",meta:{privilege:"swag_paypal.viewer",parentPath:"sw.settings.index"}},storefront:{path:"storefront",component:"swag-paypal-settings-storefront",meta:{privilege:"swag_paypal.viewer",parentPath:"sw.settings.index"}},advanced:{path:"advanced",component:"swag-paypal-settings-advanced",meta:{privilege:"swag_paypal.viewer",parentPath:"sw.settings.index"}}}}},settingsItem:{group:"plugins",to:"swag.paypal.settings.index",iconComponent:"swag-paypal-settings-icon",backgroundEnabled:!0,privilege:"swag_paypal.viewer"}});const Dn=Shopware.Classes.ApiService,{EntityCollection:gc}=Shopware.Data;class AA extends Dn{constructor(i,r,o="paypal/pos"){super(i,r,o)}validateApiCredentials(i,r=null){return this.httpClient.post(`_action/${this.getApiBasePath()}/validate-api-credentials`,{apiKey:i,salesChannelId:r},{headers:this.getBasicHeaders()}).then(Dn.handleResponse.bind(this))}fetchInformation(i,r=!1){var o,c;return this.httpClient.post(`${this.getApiBasePath()}/fetch-information`,{apiKey:(c=(o=i.extensions)==null?void 0:o.paypalPosSalesChannel)==null?void 0:c.apiKey},{headers:this.getBasicHeaders()}).then(Dn.handleResponse.bind(this)).then(h=>(delete h.extensions,i.languages??(i.languages=new gc("language","language",Shopware.Context.api)),i.currencies??(i.currencies=new gc("currency","currency",Shopware.Context.api)),i.countries??(i.countries=new gc("country","country",Shopware.Context.api)),h.languageId!==null&&(i.id===null||r)?(i.languages.length=0,i.languages.push({id:h.languageId})):delete h.languageId,Object.assign(i,h),i.currencies.length=0,i.currencies.push({id:h.currencyId}),i.countries.length=0,i.countries.push({id:h.countryId}),h))}cloneProductVisibility(i,r){return this.httpClient.post(`_action/${this.getApiBasePath()}/clone-product-visibility`,{fromSalesChannelId:i,toSalesChannelId:r},{headers:this.getBasicHeaders()}).then(Dn.handleResponse.bind(this))}getProductCount(i,r){return this.httpClient.get(`${this.getApiBasePath()}/product-count`,{params:{salesChannelId:i,cloneSalesChannelId:r},headers:this.getBasicHeaders()}).then(Dn.handleResponse.bind(this))}generateApiUrl(){return`https://my.izettle.com/apps/api-keys?name=Shopware%20integration&scopes=${["READ:PURCHASE","READ:FINANCE","READ:USERINFO","READ:PRODUCT","WRITE:PRODUCT"].join("%20")}&utm_source=local_partnership&utm_medium=ecommerce&utm_campaign=shopware`}}const aa=Shopware.Classes.ApiService;class IA extends aa{constructor(r,o,c="paypal/pos"){super(r,o,c);Gp(this,"basicConfig");this.basicConfig={timeout:3e5}}startCompleteSync(r){return this.httpClient.post(`_action/${this.getApiBasePath()}/sync/${r}`,null,{...this.basicConfig,headers:this.getBasicHeaders()}).then(aa.handleResponse.bind(this))}startProductSync(r){return this.httpClient.post(`_action/${this.getApiBasePath()}/sync/${r}/products`,null,{...this.basicConfig,headers:this.getBasicHeaders()}).then(aa.handleResponse.bind(this))}startInventorySync(r){return this.httpClient.post(`_action/${this.getApiBasePath()}/sync/${r}/inventory`,null,{...this.basicConfig,headers:this.getBasicHeaders()}).then(aa.handleResponse.bind(this))}startImageSync(r){return this.httpClient.post(`_action/${this.getApiBasePath()}/sync/${r}/images`,null,{...this.basicConfig,headers:this.getBasicHeaders()}).then(aa.handleResponse.bind(this))}startLogCleanup(r){return this.httpClient.post(`_action/${this.getApiBasePath()}/log/cleanup/${r}`,null,{...this.basicConfig,headers:this.getBasicHeaders()}).then(aa.handleResponse.bind(this))}abortSync(r){return this.httpClient.post(`_action/${this.getApiBasePath()}/sync/abort/${r}`,null,{...this.basicConfig,headers:this.getBasicHeaders()}).then(aa.handleResponse.bind(this))}resetSync(r){return this.httpClient.post(`_action/${this.getApiBasePath()}/sync/reset/${r}`,null,{...this.basicConfig,headers:this.getBasicHeaders()}).then(aa.handleResponse.bind(this))}getProductLog(r,o=1,c=10){return this.httpClient.get(`${this.getApiBasePath()}/product-log/${r}`,{...this.basicConfig,headers:this.getBasicHeaders(),params:{page:o,limit:c}}).then(aa.handleResponse.bind(this))}}const _c=Shopware.Classes.ApiService;class EA extends _c{constructor(i,r,o="paypal/pos"){super(i,r,o)}registerWebhook(i){return this.httpClient.post(`_action/${this.getApiBasePath()}/webhook/registration/${i}`,{},{headers:this.getBasicHeaders()}).then(_c.handleResponse.bind(this))}unregisterWebhook(i){return this.httpClient.delete(`_action/${this.getApiBasePath()}/webhook/registration/${i}`,{headers:this.getBasicHeaders()}).then(_c.handleResponse.bind(this))}}const Zr=Shopware.Classes.ApiService;class kA extends Zr{constructor(i,r,o="paypal"){super(i,r,o)}register(i){return this.httpClient.post(`_action/${this.getApiBasePath()}/webhook/register/${i}`,{},{headers:this.getBasicHeaders()}).then(Zr.handleResponse.bind(this))}unregister(i){return this.httpClient.delete(`_action/${this.getApiBasePath()}/webhook/register/${i}`,{headers:this.getBasicHeaders()}).then(Zr.handleResponse.bind(this))}status(i){return this.httpClient.get(`_action/${this.getApiBasePath()}/webhook/status/${i}`,{headers:this.getBasicHeaders()}).then(Zr.handleResponse.bind(this))}}const Nn=Shopware.Classes.ApiService;class RA extends Nn{constructor(i,r,o="paypal"){super(i,r,o)}getPaymentDetails(i,r){return this.httpClient.get(`${this.getApiBasePath()}/payment-details/${i}/${r}`,{headers:this.getBasicHeaders()}).then(Nn.handleResponse.bind(this))}capturePayment(i,r,o,c,h,_){return this.httpClient.post(`_action/${this.getApiBasePath()}/capture-payment/${r}/${o}/${i}`,{captureAmount:c,currency:h,captureIsFinal:_},{headers:this.getBasicHeaders()}).then(Nn.handleResponse.bind(this))}refundPayment(i,r,o,c,h,_,g,w){return this.httpClient.post(`_action/${this.getApiBasePath()}/refund-payment/${r}/${o}/${i}`,{refundAmount:c,currency:h,description:_,reason:g,refundInvoiceNumber:w},{headers:this.getBasicHeaders()}).then(Nn.handleResponse.bind(this))}voidPayment(i,r,o){return this.httpClient.post(`_action/${this.getApiBasePath()}/void-payment/${r}/${o}/${i}`,{},{headers:this.getBasicHeaders()}).then(Nn.handleResponse.bind(this))}}const yc=Shopware.Classes.ApiService;class $A extends yc{constructor(i,r,o="paypal-v2"){super(i,r,o)}getOrderDetails(i,r){return this.httpClient.get(`${this.getApiBasePath()}/order/${i}/${r}`,{headers:this.getBasicHeaders()}).then(yc.handleResponse.bind(this))}refundCapture(i,r,o,c,h,_,g,w){return this.doPostRequest(`${this.getApiBasePath("","_action")}/refund-capture/${i}/${r}/${o}`,w,{currency:c,amount:h,invoiceNumber:_,noteToPayer:g})}captureAuthorization(i,r,o,c,h,_,g,w){return this.doPostRequest(`${this.getApiBasePath("","_action")}/capture-authorization/${i}/${r}`,g,{currency:o,amount:c,invoiceNumber:h,noteToPayer:_,isFinal:w})}voidAuthorization(i,r,o){return this.doPostRequest(`${this.getApiBasePath("","_action")}/void-authorization/${i}/${r}`,o)}doPostRequest(i,r,o={}){return this.httpClient.post(i,{partnerAttributionId:r,...o},{headers:this.getBasicHeaders()}).then(yc.handleResponse.bind(this))}}const Nf=Shopware.Classes.ApiService;class TA extends Nf{constructor(i,r,o="paypal"){super(i,r,o)}setDefaultPaymentForSalesChannel(i=null){return this.httpClient.post(`_action/${this.getApiBasePath()}/saleschannel-default`,{salesChannelId:i},{headers:this.getBasicHeaders()}).then(Nf.handleResponse.bind(this))}}const mc=Shopware.Classes.ApiService;class xA extends mc{constructor(i,r,o="paypal/dispute"){super(i,r,o)}list(i=null,r=null){return this.httpClient.get(this.getApiBasePath(),{params:{salesChannelId:i,disputeStateFilter:r},headers:this.getBasicHeaders()}).then(mc.handleResponse.bind(this))}detail(i,r){return this.httpClient.get(`${this.getApiBasePath()}/${i}`,{params:{salesChannelId:r},headers:this.getBasicHeaders()}).then(mc.handleResponse.bind(this))}}const zn=Shopware.Classes.ApiService;class LA extends zn{constructor(i,r,o="paypal"){super(i,r,o)}save(i){return this.httpClient.post(`_action/${this.getApiBasePath()}/save-settings`,i,{headers:this.getBasicHeaders()}).then(zn.handleResponse.bind(this))}testApiCredentials(i,r,o,c){return this.httpClient.post(`_action/${this.getApiBasePath()}/test-api-credentials`,{clientId:i,clientSecret:r,sandboxActive:c,merchantPayerId:o},{headers:this.getBasicHeaders()}).then(zn.handleResponse.bind(this))}getApiCredentials(i,r,o,c,h={},_={}){return this.httpClient.post(`_action/${this.getApiBasePath()}/get-api-credentials`,{authCode:i,sharedId:r,nonce:o,sandboxActive:c},{params:h,headers:this.getBasicHeaders(_)}).then(zn.handleResponse.bind(this))}getMerchantInformation(i=null){return this.httpClient.get(`_action/${this.getApiBasePath()}/merchant-information`,{params:{salesChannelId:i},headers:this.getBasicHeaders()}).then(zn.handleResponse.bind(this))}}const{Application:Bt}=Shopware,na=Bt.getContainer("init");Bt.addServiceProvider("SwagPayPalPosSettingApiService",a=>new AA(na.httpClient,a.loginService));Bt.addServiceProvider("SwagPayPalPosApiService",a=>new IA(na.httpClient,a.loginService));Bt.addServiceProvider("SwagPayPalPosWebhookRegisterService",a=>new EA(na.httpClient,a.loginService));Bt.addServiceProvider("SwagPayPalWebhookService",a=>new kA(na.httpClient,a.loginService));Bt.addServiceProvider("SwagPayPalPaymentService",a=>new RA(na.httpClient,a.loginService));Bt.addServiceProvider("SwagPayPalOrderService",a=>new $A(na.httpClient,a.loginService));Bt.addServiceProvider("SwagPaypalPaymentMethodService",a=>new TA(na.httpClient,a.loginService));Bt.addServiceProvider("SwagPayPalDisputeApiService",a=>new xA(na.httpClient,a.loginService));Bt.addServiceProvider("SwagPayPalSettingsService",a=>new LA(na.httpClient,a.loginService));const OA={"swag-paypal-frw-credentials":{buttonGetCredentials:"Hole API-Zugangsdaten",buttonGetSandboxCredentials:"Hole Sandbox-API-Zugangsdaten",textIntroPayPal:"Um PayPal zu nutzen mssen nur die API-Zugangsdaten eingegeben werden.",labelClientId:"Client-ID",labelClientSecret:"Client-Secret",labelMerchantPayerId:"PayPal-Hndler-ID",labelClientIdSandbox:"Sandbox-Client-ID",labelClientSecretSandbox:"Sandbox-Client-Secret",labelMerchantPayerIdSandbox:"Sandbox-PayPal-Hndler-ID",labelSandbox:"Sandbox verwenden",tooltipSandbox:"Je nach Aktivierung der Sandbox werden unterschiedliche Zugangsdaten hinterlegt.",labelSetDefault:"Als Standard-Zahlungsmethode festlegen",tooltipSetDefault:"PayPal wird als Standard-Zahlungsmethode fr alle Verkaufskanle festgelegt. Sie knnen individuelle Standard-Zahlungsmethoden pro Verkaufskanal im Einstellungsmodul festlegen.",messageFetchedError:"Bitte versuche es erneut oder nutze die erweiterten Einstellungen um die Zugangsdaten direkt einzugeben.",textFetchedSuccessful:"Die Zugangsdaten wurden erfolgreich abgerufen.",messageNoCredentials:"Es wurden keine Zugangsdaten hinterlegt.",messageInvalidCredentials:"Die Zugangsdaten sind ungltig.",messageTestSuccess:"Die Zugangsdaten sind gltig."}},DA={"swag-paypal-frw-credentials":{buttonGetCredentials:"Get API credentials",buttonGetSandboxCredentials:"Get sandbox API credentials",textIntroPayPal:"To get PayPal up and running you only need to provide your PayPal API credentials.",labelClientId:"Client ID",labelClientSecret:"Client secret",labelMerchantPayerId:"PayPal Merchant ID",labelClientIdSandbox:"Sandbox client ID",labelClientSecretSandbox:"Sandbox client secret",labelMerchantPayerIdSandbox:"Sandbox PayPal Merchant ID",labelSandbox:"Use sandbox",tooltipSandbox:"Depending on activation of the sandbox, separate credentials are saved.",labelSetDefault:"Set as default payment method",tooltipSetDefault:"PayPal will be set as default payment method of all Sales Channels. You can set individual default payment methods per Sales Channel in the settings module.",messageFetchedError:"Try again or use the advanced settings to provide your credentials.",textFetchedSuccessful:"Credentials have been fetched.",messageNoCredentials:"No credentials provided.",messageInvalidCredentials:"Credentials are invalid.",messageTestSuccess:"Credentials are valid."}};Shopware.Locale.extend("de-DE",OA);Shopware.Locale.extend("en-GB",DA);export{Nc as P};
//# sourceMappingURL=swag-pay-pal-DGVK7Ag2.js.map
