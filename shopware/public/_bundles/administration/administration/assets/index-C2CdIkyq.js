const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BtVA_3zF.js","assets/channel-DBl56l-E.js","assets/main-nI4tU56k.js","assets/administration-1banVOF8.js","assets/administration-BTKv4cTb.css","assets/main-DClh8s1v.css","assets/permissions-Cb6wGjLU.js","assets/index-ZX4AzzbJ.css","assets/index-BNFjixs8.js","assets/index-uCexztBR.css","assets/index-Drml17_-.js","assets/index-rFp0IcAg.css"])))=>i.map(i=>d[i]);
import{_ as t}from"./administration-1banVOF8.js";import{A as n}from"./api.service-BkZ2RaM_.js";import"./channel-DBl56l-E.js";class o extends n{constructor(e,i,s){super(e,i,"service","application/json"),this.systemConfigService=s,this.name="ShopwareServices"}getInstalledServices(){let e=Shopware.Store.get("session").languageId;e||(e=Shopware.Context.api.languageId);const i={"sw-language-id":e};return this.httpClient.get("service/list",{headers:this.getBasicHeaders(i)}).then(s=>s.data)}async getServicesContext(){const e=await this.systemConfigService.getValues("core.services");return{disabled:e["core.services.disabled"],permissionsConsent:typeof e["core.services.permissionsConsent"]=="string"?JSON.parse(e["core.services.permissionsConsent"]):void 0}}acceptRevision(e){return this.httpClient.post(`services/permissions/grant/${e}`,{},{headers:this.getBasicHeaders()})}revokePermissions(){return this.httpClient.post("services/permissions/revoke",{},{headers:this.getBasicHeaders()})}enableAllServices(){return this.httpClient.post("services/enable",{},{headers:this.getBasicHeaders()}).then(()=>this.getServicesContext())}disableAllServices(){return this.httpClient.post("services/disable",{},{headers:this.getBasicHeaders()})}}class a{constructor(e){this.registryUrl=e}async getCurrentRevision(e){const s=await(await fetch(new URL("/api/service/permission-revisions",this.registryUrl),{method:"GET",headers:{Accept:"application/json","Accept-Language":e},mode:"cors"})).json();return this.assertIsRevisionResponse(s),s.revisions}assertIsRevisionResponse(e){if(typeof e!="object"||e===null||!("revisions"in e))throw new Error("Could not fetch Revision data from Service Registry")}}Shopware.Service().register("shopwareServicesService",()=>new o(Shopware.Application.getContainer("init").httpClient,Shopware.Service("loginService"),Shopware.Service("systemConfigApiService")));Shopware.Service().register("serviceRegistryClient",()=>new a(Shopware.Context.api.serviceRegistryUrl));Shopware.Component.register("sw-settings-services-index",()=>t(()=>import("./index-BtVA_3zF.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])));Shopware.Component.register("sw-settings-services-dashboard-banner",()=>t(()=>import("./index-BNFjixs8.js"),__vite__mapDeps([8,9])));Shopware.Component.register("sw-settings-services-grant-permissions-modal",()=>t(()=>import("./index-Drml17_-.js"),__vite__mapDeps([10,2,1,3,4,5,6,11])));Shopware.Module.register("sw-settings-services",{type:"core",name:"services",title:"sw-settings-services.general.title",description:"sw-settings-services.general.description",color:"#9AA8B5",icon:"regular-cog",favicon:"icon-module-settings.png",entity:"store_settings",routes:{index:{component:"sw-settings-services-index",path:"index",meta:{parentPath:"sw.settings.index.system",privilege:"system.plugin_maintain"}}},settingsItem:{group:"system",to:"sw.settings.services.index",icon:"regular-view-grid",privilege:"system.plugin_maintain"}});
